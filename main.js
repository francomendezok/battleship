(()=>{var e={776:e=>{class t{constructor(e){this.size=e,this.hit=0,this.sunk=!1,this.coordinates=[]}registerHit(){return this.hit+=1}isSunk(){return this.hit===this.size}addCoordinates(e){this.coordinates.push(e)}}class a{constructor(){this.board=[],this.ships=[]}createBoard(e=8){for(let t=0;t<e;t+=1)for(let a=0;a<e;a+=1){const e=`${t},${a}`;this.board[e]={attacked:!1,missed:!1,hasShip:!1,ship:[]}}return this.board}isValid(e){let t=e.split(","),a=Number(t[0]),d=Number(t[1]);return a>=0&&a<=7&&d>=0&&d<=7}getBoard(){return this.board}addShip(e){this.ships.push(e)}placeShip(e,a){if(e!==a.length)return"Size and coordinates length should be equal";const d=new t(e);for(let e=0;e<a.length;e++)if(this.isValid(a[e]))this.board[a[e]].ship.push(a),this.board[a[e]].hasShip=!0;else if(!this.isValid(a[e]))return"No Valid";return d.addCoordinates(a),this.addShip(d),this.board}isMoveLegal(e){return!this.board[e].attacked&&!this.board[e].missed}placeEnemyShips(e){this.createCoordinates(5),this.createCoordinates(4),this.createCoordinates(3),this.createCoordinates(3),this.createCoordinates(2)}createCoordinates(e){let t=Math.floor(8*Math.random()),a=Math.floor(8*Math.random()),d=`${t},${a}`,i=[];if(this.isMoveLegal(d))i.push(d);else for(;!this.isMoveLegal(d);)t=Math.floor(8*Math.random()),a=Math.floor(8*Math.random()),d=`${t},${a}`;let n=d.split(",");i.push(d);for(let t=0;t<e-1;t++)n[Math.floor(2*Math.random())];return i}getAdjacents(e,t){let a=[],d=t.split(",");for(let t=0;t<4;t++)for(let t=0;t<e;t++){let[e,t]=d,i=`${e}, ${t++}`,n=`${e}, ${t--}`,s=`${e++}, ${t}`,o=`${e--}, ${t}`;a.push(i,n,s,o)}}receiveAttack(e){let t=`${e}`;if(!this.board[t].attacked&&!this.board[t].missed)return this.board[t].hasShip?(this.board[t].attacked=!0,this.ships.forEach((e=>{e.coordinates[0].includes(t)&&(e.registerHit(),e.isSunk()&&(e.sunk=!0))}))):this.board[t].missed=!0,!0}getShips(){return this.ships}allSunk(){return this.ships.every((e=>!0===e.sunk))}}let d=new a;d.createBoard(),d.placeShip(3,["7,1","7,2","7,3"]),d.placeShip(3,["0,1","0,2","0,3"]),d.receiveAttack("0,1"),d.receiveAttack("0,2"),d.receiveAttack("0,3"),d.receiveAttack("7,1"),d.receiveAttack("7,2"),d.receiveAttack("7,3");class i{constructor(e){this.gameboard=e}isMoveLegal(e){return!this.gameboard.board[e].attacked&&!this.gameboard.board[e].missed}makeRandomMove(){let e=Math.floor(8*Math.random()),t=Math.floor(8*Math.random()),a=`${e},${t}`;if(this.isMoveLegal(a))return a;for(;!this.isMoveLegal(a);)e=Math.floor(8*Math.random()),t=Math.floor(8*Math.random()),a=`${e},${t}`;return a}}new i(d),e.exports={Ship:t,Gameboard:a,Player:i}}},t={};function a(d){var i=t[d];if(void 0!==i)return i.exports;var n=t[d]={exports:{}};return e[d](n,n.exports,a),n.exports}(()=>{"use strict";var e=a(776);function t(){const a=document.getElementById("main"),s=document.createElement("div"),o=document.createElement("h3"),r=document.createElement("input"),c=document.createElement("button");s.classList.add("pop-up-box"),o.classList.add("title-pop-up"),r.classList.add("input-pop-up"),c.classList.add("play-button"),o.textContent="Write your Name",c.innerHTML="Battle",r.type="text",c.type="submit",s.appendChild(o),s.appendChild(r),s.appendChild(c),a.appendChild(s),c.addEventListener("click",(()=>{n(),function(a){!function(e){const t=document.getElementById("main"),a=document.createElement("div"),d=document.createElement("div"),i=document.createElement("div"),n=document.createElement("div"),s=document.createElement("h3"),o=document.createElement("div"),r=document.createElement("div"),c=document.createElement("div"),l=document.createElement("div"),m=document.createElement("div"),h=document.createElement("h3"),p=document.createElement("img"),u=document.createElement("img"),b=document.createElement("img"),g=document.createElement("img"),v=document.createElement("img");p.src="../dist/Images/5.png",u.src="../dist/Images/5.png",b.src="../dist/Images/5.png",g.src="../dist/Images/5.png",v.src="../dist/Images/5.png",[p,u,b,g,v].forEach((e=>{e.classList.add("ship"),o.appendChild(e)})),a.classList.add("my-section"),d.classList.add("my-game-section"),i.classList.add("my-board"),n.classList.add("my-name-box"),s.classList.add("my-name"),o.classList.add("my-ships"),r.classList.add("enemy-section"),c.classList.add("enemy-game-section"),l.classList.add("enemy-board"),m.classList.add("enemy-name-box"),h.classList.add("enemy-name");for(let e=0;e<8;e+=1)for(let t=0;t<8;t+=1){const a=`${e},${t}`,d=document.createElement("div"),n=document.createElement("div");d.classList.add("my-div-box"),n.classList.add("enemy-div-box"),d.id=`P ${a}`,n.id=`E ${a}`,i.appendChild(d),l.appendChild(n)}s.textContent=e,h.textContent="Enemy",n.appendChild(s),d.appendChild(i),a.appendChild(n),a.appendChild(d),m.appendChild(h),c.appendChild(l),r.appendChild(m),r.appendChild(c),t.appendChild(a),t.appendChild(o),t.appendChild(r),t.classList.add("main-game")}(a);let s=new e.Gameboard,o=new e.Gameboard;s.createBoard(),s.placeShip(2,["5,1","5,2"]),o.createBoard(),o.placeShip(5,["1,1","1,2","1,3","1,4","1,5"]),o.placeShip(4,["4,4","4,5","4,6","4,7"]);let r=new e.Player(s),c=new e.Player(o);d(r.gameboard),i(c.gameboard),[...document.querySelectorAll(".enemy-div-box")].forEach((e=>{e.addEventListener("click",(e=>{let a=e.target.id.split(" ")[1],l=c.makeRandomMove(),m=s.receiveAttack(l);if(o.receiveAttack(a)){i(c.gameboard),setTimeout((function(){for(;!m;)l=c.makeRandomMove(),m=s.receiveAttack(l);d(r.gameboard)}),1e3);let e=s.allSunk(),a=o.allSunk();e&&(n(),function(){const e=document.getElementById("main"),a=document.createElement("div"),d=document.createElement("h3"),i=document.createElement("button");a.classList.add("pop-up-box"),d.classList.add("title-pop-up"),i.classList.add("play-button"),d.textContent="You Lose",i.innerHTML="Play Again",i.type="submit",a.appendChild(d),a.appendChild(i),e.appendChild(a),i.addEventListener("click",(()=>{n(),t()}))}()),a&&(n(),function(){const e=document.getElementById("main"),a=document.createElement("div"),d=document.createElement("h3"),i=document.createElement("button");a.classList.add("pop-up-box"),d.classList.add("title-pop-up"),i.classList.add("play-button"),d.textContent="You Win",i.innerHTML="Play Again",i.type="submit",a.appendChild(d),a.appendChild(i),e.appendChild(a),i.addEventListener("click",(()=>{n(),t()}))}())}}))}))}(r.value)}))}function d(e){const t=document.querySelectorAll(".my-div-box");for(const a of t){let t=a.id.split(" ")[1];e.board[t].hasShip&&(a.style.background="green"),e.board[t].attacked&&(a.innerHTML="‚ùå",a.style.background="#F5C2C1"),e.board[t].missed&&(a.innerHTML="üí¶",a.style.background="lightblue")}}function i(e){const t=document.querySelectorAll(".enemy-div-box");for(const a of t){let t=a.id.split(" ")[1];e.board[t].hasShip&&(a.style.background="orange"),e.board[t].attacked&&(a.innerHTML="‚ùå",a.style.background="#F5C2C1"),e.board[t].missed&&(a.innerHTML="üí¶",a.style.background="lightblue")}}function n(){document.getElementById("main").innerHTML=""}t()})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNqQnNELEVBQUlRLFVBQVksSUFDaEJSLEVBQUl1RCxNQUFNQyxXQUFhLFdBRXZCcEgsRUFBTUEsTUFBTWtILEdBQUszRyxTQUNqQnFELEVBQUlRLFVBQVksS0FDaEJSLEVBQUl1RCxNQUFNQyxXQUFhLFlBRS9CLENBQ0osQ0FFQSxTQUFTbEIsRUFBa0JsRyxHQUN2QixNQUFNaUgsRUFBUXZELFNBQVN5QyxpQkFBaUIsa0JBRXhDLElBQUssTUFBTXZDLEtBQU9xRCxFQUFPLENBQ3JCLElBRUlDLEVBRmN0RCxFQUFJaUMsR0FDRWpGLE1BQU0sS0FDZCxHQUVaWixFQUFNQSxNQUFNa0gsR0FBSzFHLFVBQ2pCb0QsRUFBSXVELE1BQU1DLFdBQWEsVUFFdkJwSCxFQUFNQSxNQUFNa0gsR0FBSzVHLFdBQ2pCc0QsRUFBSVEsVUFBWSxJQUNoQlIsRUFBSXVELE1BQU1DLFdBQWEsV0FFdkJwSCxFQUFNQSxNQUFNa0gsR0FBSzNHLFNBQ2pCcUQsRUFBSVEsVUFBWSxLQUNoQlIsRUFBSXVELE1BQU1DLFdBQWEsWUFFL0IsQ0FDSixDQW9GQSxTQUFTNUMsSUFDUWQsU0FBU0MsZUFBZSxRQUNoQ1MsVUFBWSxFQUNyQixDRXZQQVosRyIsInNvdXJjZXMiOlsid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvZmFjdG9yaWVzLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9yZW5kZXIuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9nYW1lLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gU2hpcCBDbGFzcyAvL1xyXG5jbGFzcyBTaGlwIHtcclxuICAgIGNvbnN0cnVjdG9yIChzaXplKSB7XHJcbiAgICAgICAgdGhpcy5zaXplID0gc2l6ZTtcclxuICAgICAgICB0aGlzLmhpdCA9IDA7XHJcbiAgICAgICAgdGhpcy5zdW5rID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5jb29yZGluYXRlcyA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIHJlZ2lzdGVySGl0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmhpdCArPSAxO1xyXG4gICAgfVxyXG5cclxuICAgIGlzU3VuaygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5oaXQgPT09IHRoaXMuc2l6ZTtcclxuICAgIH1cclxuXHJcbiAgICBhZGRDb29yZGluYXRlcyAocG9zaXRpb24pIHtcclxuICAgICAgICB0aGlzLmNvb3JkaW5hdGVzLnB1c2gocG9zaXRpb24pO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBHYW1lYm9hcmQgQ2xhc3MgLy9cclxuY2xhc3MgR2FtZWJvYXJkIHtcclxuICAgIGNvbnN0cnVjdG9yICgpIHtcclxuICAgICAgICB0aGlzLmJvYXJkID0gW10gXHJcbiAgICAgICAgdGhpcy5zaGlwcyA9IFtdXHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNyZWF0ZUJvYXJkKHNpemUgPSA4ICkge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2l6ZTsgaSArPSAxKSB7XHJcbiAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHNpemU7IGogKz0gMSkge1xyXG4gICAgICAgICAgICBjb25zdCBjb29yZGluYXRlID0gYCR7aX0sJHtqfWA7XHJcbiAgICAgICAgICAgIHRoaXMuYm9hcmRbY29vcmRpbmF0ZV0gPSB7IGF0dGFja2VkOiBmYWxzZSwgbWlzc2VkOiBmYWxzZSwgaGFzU2hpcDogZmFsc2UsIHNoaXA6IFtdIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5ib2FyZDtcclxuICAgICAgfVxyXG5cclxuICAgICAgaXNWYWxpZCAoY29vcmRpbmF0ZXMpIHtcclxuICAgICAgICBsZXQgYXJyID0gY29vcmRpbmF0ZXMuc3BsaXQoJywnKTtcclxuICAgICAgICBsZXQgYSA9IE51bWJlcihhcnJbMF0pO1xyXG4gICAgICAgIGxldCBiID0gTnVtYmVyKGFyclsxXSk7XHJcblxyXG5cclxuICAgICAgICByZXR1cm4gYSA+PSAwICYmIGEgPD0gNyAmJiBiID49IDAgJiYgYiA8PSA3O1xyXG4gICAgICB9XHJcblxyXG4gICAgICBnZXRCb2FyZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5ib2FyZDtcclxuICAgICAgfVxyXG5cclxuICAgICAgYWRkU2hpcCAoc2hpcCkge1xyXG4gICAgICAgIHRoaXMuc2hpcHMucHVzaChzaGlwKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcGxhY2VTaGlwIChzaXplLCBjb29yZGluYXRlcykge1xyXG4gICAgICAgIGlmIChzaXplICE9PSBjb29yZGluYXRlcy5sZW5ndGgpIHJldHVybiAnU2l6ZSBhbmQgY29vcmRpbmF0ZXMgbGVuZ3RoIHNob3VsZCBiZSBlcXVhbCc7XHJcblxyXG4gICAgICAgIGNvbnN0IHNoaXAgPSBuZXcgU2hpcChzaXplKTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb29yZGluYXRlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNWYWxpZChjb29yZGluYXRlc1tpXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmJvYXJkW2Nvb3JkaW5hdGVzW2ldXS5zaGlwLnB1c2goY29vcmRpbmF0ZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYm9hcmRbY29vcmRpbmF0ZXNbaV1dLmhhc1NoaXAgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoIXRoaXMuaXNWYWxpZChjb29yZGluYXRlc1tpXSkpIHJldHVybiAnTm8gVmFsaWQnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgc2hpcC5hZGRDb29yZGluYXRlcyhjb29yZGluYXRlcyk7XHJcbiAgICAgICAgdGhpcy5hZGRTaGlwKHNoaXApO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ib2FyZDtcclxuICAgICAgfVxyXG5cclxuICAgICAgaXNNb3ZlTGVnYWwgKG1vdmUpIHtcclxuICAgICAgICByZXR1cm4gIXRoaXMuYm9hcmRbbW92ZV0uYXR0YWNrZWQgJiYgIXRoaXMuYm9hcmRbbW92ZV0ubWlzc2VkO1xyXG4gICAgfVxyXG5cclxuICAgICAgcGxhY2VFbmVteVNoaXBzIChib2FyZCkge1xyXG4gICAgICAgICAgICBsZXQgY2FycmllciA9IHRoaXMuY3JlYXRlQ29vcmRpbmF0ZXMoNSk7XHJcbiAgICAgICAgICAgIGxldCBiYXR0bGVzaGlwID0gdGhpcy5jcmVhdGVDb29yZGluYXRlcyg0KTtcclxuICAgICAgICAgICAgbGV0IGNydWlzZXIgPSB0aGlzLmNyZWF0ZUNvb3JkaW5hdGVzKDMpO1xyXG4gICAgICAgICAgICBsZXQgc3VibWFyaW5lID0gdGhpcy5jcmVhdGVDb29yZGluYXRlcygzKTtcclxuICAgICAgICAgICAgbGV0IGRlc3Ryb3llciA9IHRoaXMuY3JlYXRlQ29vcmRpbmF0ZXMoMik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNyZWF0ZUNvb3JkaW5hdGVzIChzaXplKSB7XHJcbiAgICAgICAgbGV0IG51bTEgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA4KTsgXHJcbiAgICAgICAgbGV0IG51bTIgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA4KTsgXHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IGAke251bTF9LCR7bnVtMn1gO1xyXG4gICAgICAgIGxldCBjb29yZGluYXRlcyA9IFtdO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5pc01vdmVMZWdhbChyZXN1bHQpKSBjb29yZGluYXRlcy5wdXNoKHJlc3VsdCk7XHJcbiAgICAgICAgICAgIC8vY2hlY2sgaWYgaGFzU2hpcCwgbm90IGF0dGFja2VkIG5vciBtaXNzZWQgLy9cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgd2hpbGUgKCF0aGlzLmlzTW92ZUxlZ2FsKHJlc3VsdCkpIHtcclxuICAgICAgICAgICAgICAgIG51bTEgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA4KTsgXHJcbiAgICAgICAgICAgICAgICBudW0yID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogOCk7IFxyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gYCR7bnVtMX0sJHtudW0yfWA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBzcGxpdCA9IHJlc3VsdC5zcGxpdCgnLCcpO1xyXG5cclxuICAgICAgICBjb29yZGluYXRlcy5wdXNoKHJlc3VsdCk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2l6ZSAtIDE7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgcmFuZG9tID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMik7IFxyXG4gICAgICAgICAgICBsZXQga2V5ID0gc3BsaXRbcmFuZG9tXTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGxldCBwb3NzaWJpbGl0aWVzID0gW107XHJcbiAgICAgICAgICAgIC8vIDQgZ2V0IGFkamFjZW50cyAvLyBcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjb29yZGluYXRlcztcclxuICAgIH1cclxuXHJcbiAgICAgIGdldEFkamFjZW50cyAoc2l6ZSwgY29vcmRpbmF0ZXMpIHtcclxuICAgICAgICAvLyA0LDQgLy9cclxuICAgICAgICBsZXQgYWRqYWNlbnRzID0gW107IFxyXG4gICAgICAgIGxldCBsaW5lcyA9IFtdO1xyXG4gICAgICAgIGxldCBzcGxpdCA9IGNvb3JkaW5hdGVzLnNwbGl0KCcsJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCA0OyBqKyspIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaXplOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGxldCBbeCx5XSA9IHNwbGl0O1xyXG4gICAgICAgICAgICAgICAgbGV0IGZpcnN0ID0gYCR7eH0sICR7eSsrfWA7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2Vjb25kID0gYCR7eH0sICR7eS0tfWA7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGhpcmQgPSBgJHt4Kyt9LCAke3l9YDtcclxuICAgICAgICAgICAgICAgIGxldCBmb3VydGggPSBgJHt4LS19LCAke3l9YDtcclxuXHJcbiAgICAgICAgICAgICAgICBsaW5lcy5wdXNoKGZpcnN0LCBzZWNvbmQsIHRoaXJkLCBmb3VydGgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgICAgcmVjZWl2ZUF0dGFjayAoY29vcmRpbmF0ZXMpIHtcclxuICAgICAgICBsZXQgc3RyID0gYCR7Y29vcmRpbmF0ZXN9YDtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuYm9hcmRbc3RyXS5hdHRhY2tlZCB8fCB0aGlzLmJvYXJkW3N0cl0ubWlzc2VkKSByZXR1cm47XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmJvYXJkW3N0cl0uaGFzU2hpcCkge1xyXG4gICAgICAgICAgICB0aGlzLmJvYXJkW3N0cl0uYXR0YWNrZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLnNoaXBzLmZvckVhY2goc2hpcCA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2hpcC5jb29yZGluYXRlc1swXS5pbmNsdWRlcyhzdHIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2hpcC5yZWdpc3RlckhpdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzaGlwLmlzU3VuaygpKSBzaGlwLnN1bmsgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ib2FyZFtzdHJdLm1pc3NlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBnZXRTaGlwcyAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2hpcHM7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGFsbFN1bmsgKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNoaXBzLmV2ZXJ5KHNoaXAgPT4gc2hpcC5zdW5rID09PSB0cnVlKTtcclxuICAgICAgfVxyXG59XHJcblxyXG5cclxubGV0IGJvYXJkID0gbmV3IEdhbWVib2FyZCgpO1xyXG5ib2FyZC5jcmVhdGVCb2FyZCgpO1xyXG5ib2FyZC5wbGFjZVNoaXAoMywgWyc3LDEnLCc3LDInLCc3LDMnXSk7XHJcbmJvYXJkLnBsYWNlU2hpcCgzLCBbJzAsMScsICcwLDInLCcwLDMnXSlcclxuYm9hcmQucmVjZWl2ZUF0dGFjaygnMCwxJyk7XHJcbmJvYXJkLnJlY2VpdmVBdHRhY2soJzAsMicpO1xyXG5ib2FyZC5yZWNlaXZlQXR0YWNrKCcwLDMnKTtcclxuYm9hcmQucmVjZWl2ZUF0dGFjaygnNywxJyk7XHJcbmJvYXJkLnJlY2VpdmVBdHRhY2soJzcsMicpO1xyXG5ib2FyZC5yZWNlaXZlQXR0YWNrKCc3LDMnKTtcclxuXHJcblxyXG4vLyBQbGF5ZXIgQ2xhc3MgLy9cclxuY2xhc3MgUGxheWVyIHtcclxuICAgIGNvbnN0cnVjdG9yIChnYW1lYm9hcmQpIHtcclxuICAgICAgICB0aGlzLmdhbWVib2FyZCA9IGdhbWVib2FyZDtcclxuICAgIH1cclxuXHJcbiAgICBpc01vdmVMZWdhbCAobW92ZSkge1xyXG4gICAgICAgIHJldHVybiAhdGhpcy5nYW1lYm9hcmQuYm9hcmRbbW92ZV0uYXR0YWNrZWQgJiYgIXRoaXMuZ2FtZWJvYXJkLmJvYXJkW21vdmVdLm1pc3NlZDtcclxuICAgIH1cclxuXHJcblxyXG4gICAgbWFrZVJhbmRvbU1vdmUgKCkge1xyXG4gICAgICAgIGxldCBudW0xID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogOCk7IFxyXG4gICAgICAgIGxldCBudW0yID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogOCk7IFxyXG4gICAgICAgIGxldCByZXN1bHQgPSBgJHtudW0xfSwke251bTJ9YDtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaXNNb3ZlTGVnYWwocmVzdWx0KSkgcmV0dXJuIHJlc3VsdDtcclxuXHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHdoaWxlICghdGhpcy5pc01vdmVMZWdhbChyZXN1bHQpKSB7XHJcbiAgICAgICAgICAgICAgICBudW0xID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogOCk7IFxyXG4gICAgICAgICAgICAgICAgbnVtMiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDgpOyBcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGAke251bTF9LCR7bnVtMn1gO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNvbnN0IHBsYXkgPSBuZXcgUGxheWVyKGJvYXJkKTtcclxuXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtTaGlwLCBHYW1lYm9hcmQsIFBsYXllcn07IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIERPTSBNYW5pcHVsYXRpb24sIFJlbmRlciB0aGUgR2FtZSAvLyBcclxuXHJcbi8vIFJlbmRlciBXcml0ZSBZb3VyIE5hbWUgLy8gXHJcbmltcG9ydCB7IGdhbWUgfSBmcm9tIFwiLi9nYW1lXCI7XHJcblxyXG5mdW5jdGlvbiB3cml0ZU5hbWUgKCkge1xyXG4gICAgY29uc3QgbWFpbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYWluJyk7XHJcbiAgICBjb25zdCBib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDMnKTtcclxuICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcclxuICAgIGNvbnN0IHBsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKVxyXG5cclxuICAgIGJveC5jbGFzc0xpc3QuYWRkKCdwb3AtdXAtYm94Jyk7XHJcbiAgICB0aXRsZS5jbGFzc0xpc3QuYWRkKCd0aXRsZS1wb3AtdXAnKTtcclxuICAgIGlucHV0LmNsYXNzTGlzdC5hZGQoJ2lucHV0LXBvcC11cCcpO1xyXG4gICAgcGxheS5jbGFzc0xpc3QuYWRkKCdwbGF5LWJ1dHRvbicpO1xyXG5cclxuXHJcbiAgICB0aXRsZS50ZXh0Q29udGVudCA9ICdXcml0ZSB5b3VyIE5hbWUnO1xyXG4gICAgcGxheS5pbm5lckhUTUwgPSAnQmF0dGxlJztcclxuICAgIGlucHV0LnR5cGUgPSAndGV4dCc7XHJcbiAgICBwbGF5LnR5cGUgPSAnc3VibWl0JztcclxuXHJcbiAgICBib3guYXBwZW5kQ2hpbGQodGl0bGUpO1xyXG4gICAgYm94LmFwcGVuZENoaWxkKGlucHV0KTtcclxuICAgIGJveC5hcHBlbmRDaGlsZChwbGF5KTtcclxuXHJcbiAgICBtYWluLmFwcGVuZENoaWxkKGJveCk7XHJcblxyXG4gICAgcGxheS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICBjbGVhbigpO1xyXG4gICAgICAgIGdhbWUoaW5wdXQudmFsdWUpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbmRlckluaXRhbEJvYXJkcyAobmFtZSkge1xyXG4gICAgY29uc3QgbWFpbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYWluJyk7XHJcblxyXG4gICAgY29uc3QgbXlTZWN0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBjb25zdCBteUdhbWVTZWN0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBjb25zdCBteUJvYXJkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBjb25zdCBteU5hbWVCb3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIGNvbnN0IG15TmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gzJyk7XHJcbiAgICBcclxuICAgIGNvbnN0IHNoaXBzQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBcclxuICAgIGNvbnN0IGVuZW15U2VjdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgY29uc3QgZW5lbXlHYW1lU2VjdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgY29uc3QgZW5lbXlCb2FyZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgY29uc3QgZW5lbXlOYW1lQm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBjb25zdCBlbmVteU5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMycpO1xyXG5cclxuICAgIGNvbnN0IGNhcnJpZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcclxuICAgIGNvbnN0IGJhdHRsZXNoaXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcclxuICAgIGNvbnN0IGNydWlzZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcclxuICAgIGNvbnN0IHN1Ym1hcmluZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xyXG4gICAgY29uc3QgZGVzdHJveWVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XHJcblxyXG4gICAgY2Fycmllci5zcmMgPSAnLi4vZGlzdC9JbWFnZXMvNS5wbmcnO1xyXG4gICAgYmF0dGxlc2hpcC5zcmMgPSAnLi4vZGlzdC9JbWFnZXMvNS5wbmcnO1xyXG4gICAgY3J1aXNlci5zcmMgPSAnLi4vZGlzdC9JbWFnZXMvNS5wbmcnO1xyXG4gICAgc3VibWFyaW5lLnNyYyA9ICcuLi9kaXN0L0ltYWdlcy81LnBuZyc7XHJcbiAgICBkZXN0cm95ZXIuc3JjID0gJy4uL2Rpc3QvSW1hZ2VzLzUucG5nJztcclxuXHJcblxyXG4gICAgY29uc3Qgc2hpcHMgPSBbY2FycmllciwgYmF0dGxlc2hpcCwgY3J1aXNlciwgc3VibWFyaW5lLCBkZXN0cm95ZXJdO1xyXG5cclxuXHJcbiAgICBzaGlwcy5mb3JFYWNoKHNoaXAgPT4ge1xyXG4gICAgICAgIHNoaXAuY2xhc3NMaXN0LmFkZCgnc2hpcCcpO1xyXG4gICAgICAgIHNoaXBzQ29udGFpbmVyLmFwcGVuZENoaWxkKHNoaXApO1xyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIFxyXG4gICAgXHJcbiAgICBteVNlY3Rpb24uY2xhc3NMaXN0LmFkZCgnbXktc2VjdGlvbicpO1xyXG4gICAgbXlHYW1lU2VjdGlvbi5jbGFzc0xpc3QuYWRkKCdteS1nYW1lLXNlY3Rpb24nKTtcclxuICAgIG15Qm9hcmQuY2xhc3NMaXN0LmFkZCgnbXktYm9hcmQnKTtcclxuICAgIG15TmFtZUJveC5jbGFzc0xpc3QuYWRkKCdteS1uYW1lLWJveCcpO1xyXG4gICAgbXlOYW1lLmNsYXNzTGlzdC5hZGQoJ215LW5hbWUnKTtcclxuICAgIFxyXG4gICAgc2hpcHNDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnbXktc2hpcHMnKTtcclxuICAgIGVuZW15U2VjdGlvbi5jbGFzc0xpc3QuYWRkKCdlbmVteS1zZWN0aW9uJyk7XHJcbiAgICBlbmVteUdhbWVTZWN0aW9uLmNsYXNzTGlzdC5hZGQoJ2VuZW15LWdhbWUtc2VjdGlvbicpO1xyXG4gICAgZW5lbXlCb2FyZC5jbGFzc0xpc3QuYWRkKCdlbmVteS1ib2FyZCcpO1xyXG4gICAgZW5lbXlOYW1lQm94LmNsYXNzTGlzdC5hZGQoJ2VuZW15LW5hbWUtYm94Jyk7XHJcbiAgICBlbmVteU5hbWUuY2xhc3NMaXN0LmFkZCgnZW5lbXktbmFtZScpO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgODsgaSArPSAxKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCA4OyBqICs9IDEpIHtcclxuICAgICAgICAgIGNvbnN0IGNvb3JkaW5hdGUgPSBgJHtpfSwke2p9YDtcclxuICAgICAgICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgY29uc3QgZGl2RW5lbXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgIGRpdi5jbGFzc0xpc3QuYWRkKCdteS1kaXYtYm94Jyk7XHJcbiAgICAgICAgICBkaXZFbmVteS5jbGFzc0xpc3QuYWRkKCdlbmVteS1kaXYtYm94Jyk7XHJcblxyXG4gICAgICAgICAgZGl2LmlkID0gYFAgJHtjb29yZGluYXRlfWA7XHJcbiAgICAgICAgICBkaXZFbmVteS5pZCA9IGBFICR7Y29vcmRpbmF0ZX1gO1xyXG4gIFxyXG4gICAgICAgICAgbXlCb2FyZC5hcHBlbmRDaGlsZChkaXYpO1xyXG4gICAgICAgICAgZW5lbXlCb2FyZC5hcHBlbmRDaGlsZChkaXZFbmVteSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG15TmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICBlbmVteU5hbWUudGV4dENvbnRlbnQgPSAnRW5lbXknO1xyXG5cclxuICAgIG15TmFtZUJveC5hcHBlbmRDaGlsZChteU5hbWUpO1xyXG4gICAgbXlHYW1lU2VjdGlvbi5hcHBlbmRDaGlsZChteUJvYXJkKTtcclxuICAgIG15U2VjdGlvbi5hcHBlbmRDaGlsZChteU5hbWVCb3gpO1xyXG4gICAgbXlTZWN0aW9uLmFwcGVuZENoaWxkKG15R2FtZVNlY3Rpb24pO1xyXG4gICAgXHJcbiAgICBlbmVteU5hbWVCb3guYXBwZW5kQ2hpbGQoZW5lbXlOYW1lKTtcclxuICAgIGVuZW15R2FtZVNlY3Rpb24uYXBwZW5kQ2hpbGQoZW5lbXlCb2FyZCk7XHJcbiAgICBlbmVteVNlY3Rpb24uYXBwZW5kQ2hpbGQoZW5lbXlOYW1lQm94KTtcclxuICAgIGVuZW15U2VjdGlvbi5hcHBlbmRDaGlsZChlbmVteUdhbWVTZWN0aW9uKTtcclxuXHJcbiAgICBtYWluLmFwcGVuZENoaWxkKG15U2VjdGlvbik7XHJcbiAgICBtYWluLmFwcGVuZENoaWxkKHNoaXBzQ29udGFpbmVyKTtcclxuICAgIG1haW4uYXBwZW5kQ2hpbGQoZW5lbXlTZWN0aW9uKTtcclxuXHJcbiAgICBtYWluLmNsYXNzTGlzdC5hZGQoJ21haW4tZ2FtZScpO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXJNeUJvYXJkIChib2FyZCkge1xyXG4gICAgY29uc3QgYm94ZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubXktZGl2LWJveCcpO1xyXG5cclxuICAgIGZvciAoY29uc3QgYm94IG9mIGJveGVzKSB7XHJcbiAgICAgICAgbGV0IGNvb3JkaW5hdGVzID0gYm94LmlkO1xyXG4gICAgICAgIGxldCBzcGxpdCA9IGNvb3JkaW5hdGVzLnNwbGl0KCcgJyk7XHJcbiAgICAgICAgbGV0IG51bSA9IHNwbGl0WzFdOyBcclxuICAgICAgICBcclxuICAgICAgICBpZiAoYm9hcmQuYm9hcmRbbnVtXS5oYXNTaGlwKSB7XHJcbiAgICAgICAgICAgIGJveC5zdHlsZS5iYWNrZ3JvdW5kID0gJ2dyZWVuJztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGJvYXJkLmJvYXJkW251bV0uYXR0YWNrZWQpIHtcclxuICAgICAgICAgICAgYm94LmlubmVySFRNTCA9ICfinYwnO1xyXG4gICAgICAgICAgICBib3guc3R5bGUuYmFja2dyb3VuZCA9ICcjRjVDMkMxJztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGJvYXJkLmJvYXJkW251bV0ubWlzc2VkKSB7XHJcbiAgICAgICAgICAgIGJveC5pbm5lckhUTUwgPSAn8J+Spic7XHJcbiAgICAgICAgICAgIGJveC5zdHlsZS5iYWNrZ3JvdW5kID0gJ2xpZ2h0Ymx1ZSc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXJFbmVteUJvYXJkIChib2FyZCkge1xyXG4gICAgY29uc3QgYm94ZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZW5lbXktZGl2LWJveCcpO1xyXG5cclxuICAgIGZvciAoY29uc3QgYm94IG9mIGJveGVzKSB7XHJcbiAgICAgICAgbGV0IGNvb3JkaW5hdGVzID0gYm94LmlkO1xyXG4gICAgICAgIGxldCBzcGxpdCA9IGNvb3JkaW5hdGVzLnNwbGl0KCcgJyk7XHJcbiAgICAgICAgbGV0IG51bSA9IHNwbGl0WzFdOyBcclxuICAgICAgICBcclxuICAgICAgICBpZiAoYm9hcmQuYm9hcmRbbnVtXS5oYXNTaGlwKSB7XHJcbiAgICAgICAgICAgIGJveC5zdHlsZS5iYWNrZ3JvdW5kID0gJ29yYW5nZSc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChib2FyZC5ib2FyZFtudW1dLmF0dGFja2VkKSB7XHJcbiAgICAgICAgICAgIGJveC5pbm5lckhUTUwgPSAn4p2MJztcclxuICAgICAgICAgICAgYm94LnN0eWxlLmJhY2tncm91bmQgPSAnI0Y1QzJDMSc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChib2FyZC5ib2FyZFtudW1dLm1pc3NlZCkge1xyXG4gICAgICAgICAgICBib3guaW5uZXJIVE1MID0gJ/CfkqYnO1xyXG4gICAgICAgICAgICBib3guc3R5bGUuYmFja2dyb3VuZCA9ICdsaWdodGJsdWUnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZHJhZ0FuZERyb3AgKCkge1xyXG4gICAgbGV0IHNoaXBzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNoaXAnKTtcclxuICAgIGxldCBib3hlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5teS1kaXYtYm94Jyk7XHJcblxyXG4gICAgc2hpcHMuZm9yRWFjaChzaGlwID0+IHtcclxuICAgICAgICBzaGlwLmRyYWdnYWJsZSA9IHRydWU7XHJcbiAgICBcclxuICAgICAgICBzaGlwLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdzdGFydCcsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBzZWxlY3RlZCA9IGUudGFyZ2V0O1xyXG4gICAgICAgICAgICBib3hlcy5mb3JFYWNoKGJveCA9PiB7XHJcbiAgICAgICAgICAgICAgICBib3guYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYm94LnN0eWxlLmJhY2tncm91bmQgPSAncmVkJztcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbmQnLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGxldCBib3hJZCA9IGUudGFyZ2V0LmlkO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGxldCBteUJveCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGJveElkKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhlLnRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbXlCb3guYXBwZW5kQ2hpbGQoc2VsZWN0ZWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHNlbGVjdGVkID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGxldCBib3hJZCA9IGUudGFyZ2V0LmlkO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGxldCBteUJveCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGJveElkKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlLnRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbXlCb3guYXBwZW5kQ2hpbGQoc2VsZWN0ZWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHNlbGVjdGVkID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXJXaW4gKCkge1xyXG4gICAgY29uc3QgbWFpbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYWluJyk7XHJcbiAgICBjb25zdCBib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDMnKTsgXHJcbiAgICBjb25zdCBwbGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJylcclxuXHJcbiAgICBib3guY2xhc3NMaXN0LmFkZCgncG9wLXVwLWJveCcpO1xyXG4gICAgdGl0bGUuY2xhc3NMaXN0LmFkZCgndGl0bGUtcG9wLXVwJyk7XHJcbiAgICBwbGF5LmNsYXNzTGlzdC5hZGQoJ3BsYXktYnV0dG9uJyk7XHJcblxyXG4gICAgdGl0bGUudGV4dENvbnRlbnQgPSAnWW91IFdpbic7XHJcbiAgICBwbGF5LmlubmVySFRNTCA9ICdQbGF5IEFnYWluJztcclxuICAgIHBsYXkudHlwZSA9ICdzdWJtaXQnO1xyXG5cclxuICAgIGJveC5hcHBlbmRDaGlsZCh0aXRsZSk7XHJcbiAgICBib3guYXBwZW5kQ2hpbGQocGxheSk7XHJcblxyXG4gICAgbWFpbi5hcHBlbmRDaGlsZChib3gpO1xyXG5cclxuICAgIHBsYXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgY2xlYW4oKTtcclxuICAgICAgICB3cml0ZU5hbWUoKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXJMb3NlICgpIHtcclxuICAgIGNvbnN0IG1haW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFpbicpO1xyXG4gICAgY29uc3QgYm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gzJyk7IFxyXG4gICAgY29uc3QgcGxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpXHJcblxyXG4gICAgYm94LmNsYXNzTGlzdC5hZGQoJ3BvcC11cC1ib3gnKTtcclxuICAgIHRpdGxlLmNsYXNzTGlzdC5hZGQoJ3RpdGxlLXBvcC11cCcpO1xyXG4gICAgcGxheS5jbGFzc0xpc3QuYWRkKCdwbGF5LWJ1dHRvbicpO1xyXG5cclxuICAgIHRpdGxlLnRleHRDb250ZW50ID0gJ1lvdSBMb3NlJztcclxuICAgIHBsYXkuaW5uZXJIVE1MID0gJ1BsYXkgQWdhaW4nO1xyXG4gICAgcGxheS50eXBlID0gJ3N1Ym1pdCc7XHJcblxyXG4gICAgYm94LmFwcGVuZENoaWxkKHRpdGxlKTtcclxuICAgIGJveC5hcHBlbmRDaGlsZChwbGF5KTtcclxuXHJcbiAgICBtYWluLmFwcGVuZENoaWxkKGJveCk7XHJcblxyXG4gICAgcGxheS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICBjbGVhbigpO1xyXG4gICAgICAgIHdyaXRlTmFtZSgpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNsZWFuICgpIHtcclxuICAgIGNvbnN0IG1haW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFpbicpO1xyXG4gICAgbWFpbi5pbm5lckhUTUwgPSAnJztcclxufVxyXG5cclxuXHJcbmV4cG9ydCB7d3JpdGVOYW1lLCBjbGVhbiwgcmVuZGVySW5pdGFsQm9hcmRzLCByZW5kZXJNeUJvYXJkLCByZW5kZXJFbmVteUJvYXJkLCByZW5kZXJXaW4sIHJlbmRlckxvc2V9O1xyXG4iLCJpbXBvcnQgeyBTaGlwLCBHYW1lYm9hcmQsIFBsYXllciB9IGZyb20gXCIuL2ZhY3Rvcmllc1wiO1xyXG5pbXBvcnQgeyB3cml0ZU5hbWUsIHJlbmRlckluaXRhbEJvYXJkcywgcmVuZGVyTXlCb2FyZCwgcmVuZGVyRW5lbXlCb2FyZCwgIGNsZWFuLCByZW5kZXJXaW4sIHJlbmRlckxvc2UgfSBmcm9tIFwiLi9yZW5kZXJcIjtcclxuXHJcblxyXG5mdW5jdGlvbiBnYW1lIChuYW1lKSB7XHJcbiAgICByZW5kZXJJbml0YWxCb2FyZHMobmFtZSk7XHJcbiAgICBsZXQgbXlCb2FyZCA9IG5ldyBHYW1lYm9hcmQoKTtcclxuICAgIGxldCBlbmVteUJvYXJkID0gbmV3IEdhbWVib2FyZCgpO1xyXG4gICAgXHJcbiAgICBteUJvYXJkLmNyZWF0ZUJvYXJkKCk7XHJcbiAgICAvLyBteUJvYXJkLnBsYWNlU2hpcCg1LCBbJzEsMScsJzEsMicsJzEsMycsICcxLDQnLCAnMSw1J10pO1xyXG4gICAgLy8gbXlCb2FyZC5wbGFjZVNoaXAoNCwgWyc0LDQnLCc0LDUnLCc0LDYnLCAnNCw3J10pO1xyXG4gICAgLy8gbXlCb2FyZC5wbGFjZVNoaXAoMywgWyc3LDEnLCc3LDInLCc3LDMnXSk7XHJcbiAgICAvLyBteUJvYXJkLnBsYWNlU2hpcCgzLCBbJzAsMScsJzAsMicsJzAsMyddKTtcclxuICAgIG15Qm9hcmQucGxhY2VTaGlwKDIsIFsnNSwxJywnNSwyJ10pO1xyXG4gICAgXHJcbiAgICBlbmVteUJvYXJkLmNyZWF0ZUJvYXJkKCk7XHJcbiAgICBlbmVteUJvYXJkLnBsYWNlU2hpcCg1LCBbJzEsMScsJzEsMicsJzEsMycsICcxLDQnLCAnMSw1J10pO1xyXG4gICAgZW5lbXlCb2FyZC5wbGFjZVNoaXAoNCwgWyc0LDQnLCc0LDUnLCc0LDYnLCAnNCw3J10pO1xyXG4gICAgXHJcbiAgICBsZXQgcGxheWVyID0gbmV3IFBsYXllcihteUJvYXJkKTtcclxuICAgIGxldCBlbmVteSA9IG5ldyBQbGF5ZXIoZW5lbXlCb2FyZCk7XHJcblxyXG4gICAgcmVuZGVyTXlCb2FyZChwbGF5ZXIuZ2FtZWJvYXJkKTtcclxuICAgIHJlbmRlckVuZW15Qm9hcmQoZW5lbXkuZ2FtZWJvYXJkKTtcclxuXHJcbiAgICBjb25zdCBlbmVteUJveGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmVuZW15LWRpdi1ib3gnKTtcclxuICAgIGxldCBlQm94ZXMgPSBbLi4uZW5lbXlCb3hlc107XHJcblxyXG4gICAgZUJveGVzLmZvckVhY2goZUJveCA9PiB7XHJcbiAgICAgICAgZUJveC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBlQ29vcmRpbmF0ZXMgPSBlLnRhcmdldC5pZDtcclxuICAgICAgICAgICAgbGV0IGVTcGxpdCA9IGVDb29yZGluYXRlcy5zcGxpdCgnICcpO1xyXG4gICAgICAgICAgICBsZXQgZU51bSA9IGVTcGxpdFsxXTsgXHJcblxyXG4gICAgICAgICAgICBsZXQgZW5lbXlNb3ZlID0gZW5lbXkubWFrZVJhbmRvbU1vdmUoKTtcclxuICAgICAgICAgICAgbGV0IGVuZW15QXR0YWNrID0gbXlCb2FyZC5yZWNlaXZlQXR0YWNrKGVuZW15TW92ZSk7XHJcbiAgICAgICAgICAgIGxldCBhdHRhY2sgPSBlbmVteUJvYXJkLnJlY2VpdmVBdHRhY2soZU51bSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoYXR0YWNrKSB7XHJcbiAgICAgICAgICAgICAgICByZW5kZXJFbmVteUJvYXJkKGVuZW15LmdhbWVib2FyZCk7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlICghZW5lbXlBdHRhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW5lbXlNb3ZlID0gZW5lbXkubWFrZVJhbmRvbU1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW5lbXlBdHRhY2sgPSBteUJvYXJkLnJlY2VpdmVBdHRhY2soZW5lbXlNb3ZlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyTXlCb2FyZChwbGF5ZXIuZ2FtZWJvYXJkKTtcclxuICAgICAgICAgICAgICAgICAgfSwgMTAwMCk7IFxyXG4gICAgICAgICAgICAgICAgICBcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgbGV0IG15U3VuayA9IG15Qm9hcmQuYWxsU3VuaygpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGVuZW15U3VuayA9IGVuZW15Qm9hcmQuYWxsU3VuaygpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBpZiAobXlTdW5rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xlYW4oKTtcclxuICAgICAgICAgICAgICAgICAgICByZW5kZXJMb3NlKCk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgaWYgKGVuZW15U3Vuaykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsZWFuKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyV2luKCk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcblxyXG5cclxuXHJcblxyXG4vLyAxLiBDcmVhdGUgdGhlIG1haW4gZ2FtZSBsb29wIGFuZCBhIG1vZHVsZSBmb3IgRE9NIGludGVyYWN0aW9uLlxyXG4vLyAgICAgIGEuIEF0IHRoaXMgcG9pbnQgaXQgaXMgYXBwcm9wcmlhdGUgdG8gYmVnaW4gY3JhZnRpbmcgeW91ciBVc2VyIEludGVyZmFjZS5cclxuLy8gICAgICBiLiBUaGUgZ2FtZSBsb29wIHNob3VsZCBzZXQgdXAgYSBuZXcgZ2FtZSBieSBjcmVhdGluZyBQbGF5ZXJzIGFuZCBHYW1lYm9hcmRzLiBGb3Igbm93IGp1c3QgcG9wdWxhdGUgZWFjaCBHYW1lYm9hcmQgd2l0aCBwcmVkZXRlcm1pbmVkIGNvb3JkaW5hdGVzLiBZb3UgY2FuIGltcGxlbWVudCBhIHN5c3RlbSBmb3IgYWxsb3dpbmcgcGxheWVycyB0byBwbGFjZSB0aGVpciBzaGlwcyBsYXRlci5cclxuLy8gICAgICBjLiBXZeKAmWxsIGxlYXZlIHRoZSBIVE1MIGltcGxlbWVudGF0aW9uIHVwIHRvIHlvdSBmb3Igbm93LCBidXQgeW91IHNob3VsZCBkaXNwbGF5IGJvdGggdGhlIHBsYXllcuKAmXMgYm9hcmRzIGFuZCByZW5kZXIgdGhlbSB1c2luZyBpbmZvcm1hdGlvbiBmcm9tIHRoZSBHYW1lYm9hcmQgY2xhc3MvZmFjdG9yeS5cclxuLy8gICAgICAgICAgYS4gWW91IG5lZWQgbWV0aG9kcyB0byByZW5kZXIgdGhlIGdhbWVib2FyZHMgYW5kIHRvIHRha2UgdXNlciBpbnB1dCBmb3IgYXR0YWNraW5nLiBGb3IgYXR0YWNrcywgbGV0IHRoZSB1c2VyIGNsaWNrIG9uIGEgY29vcmRpbmF0ZSBpbiB0aGUgZW5lbXkgR2FtZWJvYXJkLlxyXG4vLyAgICAgIGQuIFRoZSBnYW1lIGxvb3Agc2hvdWxkIHN0ZXAgdGhyb3VnaCB0aGUgZ2FtZSB0dXJuIGJ5IHR1cm4gdXNpbmcgb25seSBtZXRob2RzIGZyb20gb3RoZXIgb2JqZWN0cy4gSWYgYXQgYW55IHBvaW50IHlvdSBhcmUgdGVtcHRlZCB0byB3cml0ZSBhIG5ldyBmdW5jdGlvbiBpbnNpZGUgdGhlIGdhbWUgbG9vcCwgc3RlcCBiYWNrIGFuZCBmaWd1cmUgb3V0IHdoaWNoIGNsYXNzIG9yIG1vZHVsZSB0aGF0IGZ1bmN0aW9uIHNob3VsZCBiZWxvbmcgdG8uXHJcbi8vICAgICAgZS4gQ3JlYXRlIGNvbmRpdGlvbnMgc28gdGhhdCB0aGUgZ2FtZSBlbmRzIG9uY2Ugb25lIHBsYXllcuKAmXMgc2hpcHMgaGF2ZSBhbGwgYmVlbiBzdW5rLiBUaGlzIGZ1bmN0aW9uIGlzIGFwcHJvcHJpYXRlIGZvciB0aGUgR2FtZSBtb2R1bGUuXHJcblxyXG5cclxuLy8gMi4gRmluaXNoIGl0IHVwXHJcbi8vICAgICAgYS4gVGhlcmUgYXJlIHNldmVyYWwgb3B0aW9ucyBhdmFpbGFibGUgZm9yIGxldHRpbmcgdXNlcnMgcGxhY2UgdGhlaXIgc2hpcHMuIFlvdSBjYW4gbGV0IHRoZW0gdHlwZSBjb29yZGluYXRlcyBmb3IgZWFjaCBzaGlwLCBvciBpbnZlc3RpZ2F0ZSBpbXBsZW1lbnRpbmcgZHJhZyBhbmQgZHJvcC5cclxuLy8gICAgICBiLiBZb3UgY2FuIHBvbGlzaCB0aGUgaW50ZWxsaWdlbmNlIG9mIHRoZSBjb21wdXRlciBwbGF5ZXIgYnkgaGF2aW5nIGl0IHRyeSBhZGphY2VudCBzbG90cyBhZnRlciBnZXR0aW5nIGEg4oCYaGl04oCZLlxyXG4vLyAgICAgIGMuIE9wdGlvbmFsbHksIGNyZWF0ZSBhIDIgcGxheWVyIG9wdGlvbiB0aGF0IGxldHMgdXNlcnMgdGFrZSB0dXJucyBieSBwYXNzaW5nIHRoZSBkZXZpY2UgYmFjayBhbmQgZm9ydGguIElmIHlvdeKAmXJlIGdvaW5nIHRvIGdvIHRoaXMgcm91dGUsIG1ha2Ugc3VyZSB0aGUgZ2FtZSBpcyBwbGF5YWJsZSBvbiBhIG1vYmlsZSBzY3JlZW4gYW5kIGltcGxlbWVudCBhIOKAmHBhc3MgZGV2aWNl4oCZIHNjcmVlbiBzbyB0aGF0IHBsYXllcnMgZG9u4oCZdCBzZWUgZWFjaCBvdGhlcnMgYm9hcmRzIVxyXG4gXHJcblxyXG4vLyAgVGhlIDUgc2hpcHMgYXJlOiBDYXJyaWVyIChvY2N1cGllcyA1IHNwYWNlcyksIEJhdHRsZXNoaXAgKDQpLCBDcnVpc2VyICgzKSwgU3VibWFyaW5lICgzKSwgYW5kIERlc3Ryb3llciAoMikuIC8vXHJcblxyXG5cclxuXHJcbmV4cG9ydCB7Z2FtZX07IiwiLy8gTGludGVyLCBQcmV0dGllciwgSmVzdC5jb25maWcgLy8gXHJcblxyXG5pbXBvcnQgeyBTaGlwLCBHYW1lYm9hcmQsIFBsYXllciB9IGZyb20gXCIuL2ZhY3Rvcmllc1wiO1xyXG5pbXBvcnQgeyB3cml0ZU5hbWUsIGNsZWFuLCByZW5kZXJJbml0YWxCb2FyZHMsIHJlbmRlcldpbiwgcmVuZGVyTG9zZSB9IGZyb20gXCIuL3JlbmRlclwiO1xyXG5pbXBvcnQgeyBnYW1lIH0gZnJvbSBcIi4vZ2FtZVwiO1xyXG5cclxud3JpdGVOYW1lKCk7XHJcbiJdLCJuYW1lcyI6WyJTaGlwIiwiY29uc3RydWN0b3IiLCJzaXplIiwidGhpcyIsImhpdCIsInN1bmsiLCJjb29yZGluYXRlcyIsInJlZ2lzdGVySGl0IiwiaXNTdW5rIiwiYWRkQ29vcmRpbmF0ZXMiLCJwb3NpdGlvbiIsInB1c2giLCJHYW1lYm9hcmQiLCJib2FyZCIsInNoaXBzIiwiY3JlYXRlQm9hcmQiLCJpIiwiaiIsImNvb3JkaW5hdGUiLCJhdHRhY2tlZCIsIm1pc3NlZCIsImhhc1NoaXAiLCJzaGlwIiwiaXNWYWxpZCIsImFyciIsInNwbGl0IiwiYSIsIk51bWJlciIsImIiLCJnZXRCb2FyZCIsImFkZFNoaXAiLCJwbGFjZVNoaXAiLCJsZW5ndGgiLCJpc01vdmVMZWdhbCIsIm1vdmUiLCJwbGFjZUVuZW15U2hpcHMiLCJjcmVhdGVDb29yZGluYXRlcyIsIm51bTEiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJudW0yIiwicmVzdWx0IiwiZ2V0QWRqYWNlbnRzIiwibGluZXMiLCJ4IiwieSIsImZpcnN0Iiwic2Vjb25kIiwidGhpcmQiLCJmb3VydGgiLCJyZWNlaXZlQXR0YWNrIiwic3RyIiwiZm9yRWFjaCIsImluY2x1ZGVzIiwiZ2V0U2hpcHMiLCJhbGxTdW5rIiwiZXZlcnkiLCJQbGF5ZXIiLCJnYW1lYm9hcmQiLCJtYWtlUmFuZG9tTW92ZSIsIm1vZHVsZSIsImV4cG9ydHMiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwid3JpdGVOYW1lIiwibWFpbiIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJib3giLCJjcmVhdGVFbGVtZW50IiwidGl0bGUiLCJpbnB1dCIsInBsYXkiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0ZXh0Q29udGVudCIsImlubmVySFRNTCIsInR5cGUiLCJhcHBlbmRDaGlsZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJjbGVhbiIsIm5hbWUiLCJteVNlY3Rpb24iLCJteUdhbWVTZWN0aW9uIiwibXlCb2FyZCIsIm15TmFtZUJveCIsIm15TmFtZSIsInNoaXBzQ29udGFpbmVyIiwiZW5lbXlTZWN0aW9uIiwiZW5lbXlHYW1lU2VjdGlvbiIsImVuZW15Qm9hcmQiLCJlbmVteU5hbWVCb3giLCJlbmVteU5hbWUiLCJjYXJyaWVyIiwiYmF0dGxlc2hpcCIsImNydWlzZXIiLCJzdWJtYXJpbmUiLCJkZXN0cm95ZXIiLCJzcmMiLCJkaXYiLCJkaXZFbmVteSIsImlkIiwicmVuZGVySW5pdGFsQm9hcmRzIiwicGxheWVyIiwiZW5lbXkiLCJyZW5kZXJNeUJvYXJkIiwicmVuZGVyRW5lbXlCb2FyZCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJlQm94IiwiZSIsImVOdW0iLCJ0YXJnZXQiLCJlbmVteU1vdmUiLCJlbmVteUF0dGFjayIsInNldFRpbWVvdXQiLCJteVN1bmsiLCJlbmVteVN1bmsiLCJyZW5kZXJMb3NlIiwicmVuZGVyV2luIiwiZ2FtZSIsInZhbHVlIiwiYm94ZXMiLCJudW0iLCJzdHlsZSIsImJhY2tncm91bmQiXSwic291cmNlUm9vdCI6IiJ9