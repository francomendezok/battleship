(()=>{var e={776:e=>{class t{constructor(e){this.size=e,this.hit=0,this.sunk=!1,this.coordinates=[]}registerHit(){return this.hit+=1}isSunk(){return this.hit===this.size}addCoordinates(e){this.coordinates.push(e)}}class a{constructor(){this.board=[],this.ships=[]}createBoard(e=8){for(let t=0;t<e;t+=1)for(let a=0;a<e;a+=1){const e=`${t},${a}`;this.board[e]={attacked:!1,missed:!1,hasShip:!1,ship:[]}}return this.board}isValid(e){let t=e.split(","),a=Number(t[0]),d=Number(t[1]);return a>=0&&a<=7&&d>=0&&d<=7}getBoard(){return this.board}addShip(e){this.ships.push(e)}placeShip(e,a){if(e!==a.length)return"Size and coordinates length should be equal";const d=new t(e);for(let e=0;e<a.length;e++)if(this.isValid(a[e]))this.board[a[e]].ship.push(a),this.board[a[e]].hasShip=!0;else if(!this.isValid(a[e]))return"No Valid";return d.addCoordinates(a),this.addShip(d),this.board}placeEnemyShips(e){for(let e=5;e>0&&!(e<2);e--){let e=this.createCoordinates(),[t,a]=e.split(",")}}createCoordinates(){let e=Math.floor(8*Math.random()),t=Math.floor(8*Math.random()),a=`${e},${t}`;if(this.isMoveLegal(a))return a;for(;!this.isMoveLegal(a);)e=Math.floor(8*Math.random()),t=Math.floor(8*Math.random()),a=`${e},${t}`;return a}receiveAttack(e){let t=`${e}`;if(!this.board[t].attacked&&!this.board[t].missed)return this.board[t].hasShip?(this.board[t].attacked=!0,this.ships.forEach((e=>{e.coordinates[0].includes(t)&&(e.registerHit(),e.isSunk()&&(e.sunk=!0))}))):this.board[t].missed=!0,!0}getShips(){return this.ships}allSunk(){return this.ships.every((e=>!0===e.sunk))}}let d=new a;d.createBoard(),d.placeShip(3,["7,1","7,2","7,3"]),d.placeShip(3,["0,1","0,2","0,3"]),d.receiveAttack("0,1"),d.receiveAttack("0,2"),d.receiveAttack("0,3"),d.receiveAttack("7,1"),d.receiveAttack("7,2"),d.receiveAttack("7,3");class n{constructor(e){this.gameboard=e}isMoveLegal(e){return!this.gameboard.board[e].attacked&&!this.gameboard.board[e].missed}makeRandomMove(){let e=Math.floor(8*Math.random()),t=Math.floor(8*Math.random()),a=`${e},${t}`;if(this.isMoveLegal(a))return a;for(;!this.isMoveLegal(a);)e=Math.floor(8*Math.random()),t=Math.floor(8*Math.random()),a=`${e},${t}`;return a}}new n(d),e.exports={Ship:t,Gameboard:a,Player:n}}},t={};function a(d){var n=t[d];if(void 0!==n)return n.exports;var i=t[d]={exports:{}};return e[d](i,i.exports,a),i.exports}(()=>{"use strict";var e=a(776);function t(){const a=document.getElementById("main"),s=document.createElement("div"),o=document.createElement("h3"),r=document.createElement("input"),c=document.createElement("button");s.classList.add("pop-up-box"),o.classList.add("title-pop-up"),r.classList.add("input-pop-up"),c.classList.add("play-button"),o.textContent="Write your Name",c.innerHTML="Battle",r.type="text",c.type="submit",s.appendChild(o),s.appendChild(r),s.appendChild(c),a.appendChild(s),c.addEventListener("click",(()=>{i(),function(a){!function(e){const t=document.getElementById("main"),a=document.createElement("div"),d=document.createElement("div"),n=document.createElement("div"),i=document.createElement("div"),s=document.createElement("h3"),o=document.createElement("div"),r=document.createElement("div"),c=document.createElement("div"),l=document.createElement("div"),m=document.createElement("div"),p=document.createElement("h3"),h=document.createElement("img"),u=document.createElement("img"),b=document.createElement("img"),g=document.createElement("img"),v=document.createElement("img");h.src="../dist/Images/5.png",u.src="../dist/Images/5.png",b.src="../dist/Images/5.png",g.src="../dist/Images/5.png",v.src="../dist/Images/5.png",[h,u,b,g,v].forEach((e=>{e.classList.add("ship"),o.appendChild(e)})),a.classList.add("my-section"),d.classList.add("my-game-section"),n.classList.add("my-board"),i.classList.add("my-name-box"),s.classList.add("my-name"),o.classList.add("my-ships"),r.classList.add("enemy-section"),c.classList.add("enemy-game-section"),l.classList.add("enemy-board"),m.classList.add("enemy-name-box"),p.classList.add("enemy-name");for(let e=0;e<8;e+=1)for(let t=0;t<8;t+=1){const a=`${e},${t}`,d=document.createElement("div"),i=document.createElement("div");d.classList.add("my-div-box"),i.classList.add("enemy-div-box"),d.id=`P ${a}`,i.id=`E ${a}`,n.appendChild(d),l.appendChild(i)}s.textContent=e,p.textContent="Enemy",i.appendChild(s),d.appendChild(n),a.appendChild(i),a.appendChild(d),m.appendChild(p),c.appendChild(l),r.appendChild(m),r.appendChild(c),t.appendChild(a),t.appendChild(o),t.appendChild(r),t.classList.add("main-game")}(a);let s=new e.Gameboard,o=new e.Gameboard;s.createBoard(),s.placeShip(2,["5,1","5,2"]),o.createBoard(),o.placeShip(5,["1,1","1,2","1,3","1,4","1,5"]),o.placeShip(4,["4,4","4,5","4,6","4,7"]);let r=new e.Player(s),c=new e.Player(o);d(r.gameboard),n(c.gameboard),[...document.querySelectorAll(".enemy-div-box")].forEach((e=>{e.addEventListener("click",(e=>{let a=e.target.id.split(" ")[1],l=c.makeRandomMove(),m=s.receiveAttack(l);if(o.receiveAttack(a)){n(c.gameboard),setTimeout((function(){for(;!m;)l=c.makeRandomMove(),m=s.receiveAttack(l);d(r.gameboard)}),1e3);let e=s.allSunk(),a=o.allSunk();e&&(i(),function(){const e=document.getElementById("main"),a=document.createElement("div"),d=document.createElement("h3"),n=document.createElement("button");a.classList.add("pop-up-box"),d.classList.add("title-pop-up"),n.classList.add("play-button"),d.textContent="You Lose",n.innerHTML="Play Again",n.type="submit",a.appendChild(d),a.appendChild(n),e.appendChild(a),n.addEventListener("click",(()=>{i(),t()}))}()),a&&(i(),function(){const e=document.getElementById("main"),a=document.createElement("div"),d=document.createElement("h3"),n=document.createElement("button");a.classList.add("pop-up-box"),d.classList.add("title-pop-up"),n.classList.add("play-button"),d.textContent="You Win",n.innerHTML="Play Again",n.type="submit",a.appendChild(d),a.appendChild(n),e.appendChild(a),n.addEventListener("click",(()=>{i(),t()}))}())}}))}))}(r.value)}))}function d(e){const t=document.querySelectorAll(".my-div-box");for(const a of t){let t=a.id.split(" ")[1];e.board[t].hasShip&&(a.style.background="green"),e.board[t].attacked&&(a.innerHTML="‚ùå",a.style.background="#F5C2C1"),e.board[t].missed&&(a.innerHTML="üí¶",a.style.background="lightblue")}}function n(e){const t=document.querySelectorAll(".enemy-div-box");for(const a of t){let t=a.id.split(" ")[1];e.board[t].hasShip&&(a.style.background="orange"),e.board[t].attacked&&(a.innerHTML="‚ùå",a.style.background="#F5C2C1"),e.board[t].missed&&(a.innerHTML="üí¶",a.style.background="lightblue")}}function i(){document.getElementById("main").innerHTML=""}t()})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Iiwid2VicGFjazovL2JhdHRsZXNoaXAvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9yZW5kZXIuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9nYW1lLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gU2hpcCBDbGFzcyAvL1xyXG5jbGFzcyBTaGlwIHtcclxuICAgIGNvbnN0cnVjdG9yIChzaXplKSB7XHJcbiAgICAgICAgdGhpcy5zaXplID0gc2l6ZTtcclxuICAgICAgICB0aGlzLmhpdCA9IDA7XHJcbiAgICAgICAgdGhpcy5zdW5rID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5jb29yZGluYXRlcyA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIHJlZ2lzdGVySGl0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmhpdCArPSAxO1xyXG4gICAgfVxyXG5cclxuICAgIGlzU3VuaygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5oaXQgPT09IHRoaXMuc2l6ZTtcclxuICAgIH1cclxuXHJcbiAgICBhZGRDb29yZGluYXRlcyAocG9zaXRpb24pIHtcclxuICAgICAgICB0aGlzLmNvb3JkaW5hdGVzLnB1c2gocG9zaXRpb24pO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBHYW1lYm9hcmQgQ2xhc3MgLy9cclxuY2xhc3MgR2FtZWJvYXJkIHtcclxuICAgIGNvbnN0cnVjdG9yICgpIHtcclxuICAgICAgICB0aGlzLmJvYXJkID0gW10gXHJcbiAgICAgICAgdGhpcy5zaGlwcyA9IFtdXHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNyZWF0ZUJvYXJkKHNpemUgPSA4ICkge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2l6ZTsgaSArPSAxKSB7XHJcbiAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHNpemU7IGogKz0gMSkge1xyXG4gICAgICAgICAgICBjb25zdCBjb29yZGluYXRlID0gYCR7aX0sJHtqfWA7XHJcbiAgICAgICAgICAgIHRoaXMuYm9hcmRbY29vcmRpbmF0ZV0gPSB7IGF0dGFja2VkOiBmYWxzZSwgbWlzc2VkOiBmYWxzZSwgaGFzU2hpcDogZmFsc2UsIHNoaXA6IFtdIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5ib2FyZDtcclxuICAgICAgfVxyXG5cclxuICAgICAgaXNWYWxpZCAoY29vcmRpbmF0ZXMpIHtcclxuICAgICAgICBsZXQgYXJyID0gY29vcmRpbmF0ZXMuc3BsaXQoJywnKTtcclxuICAgICAgICBsZXQgYSA9IE51bWJlcihhcnJbMF0pO1xyXG4gICAgICAgIGxldCBiID0gTnVtYmVyKGFyclsxXSk7XHJcblxyXG5cclxuICAgICAgICByZXR1cm4gYSA+PSAwICYmIGEgPD0gNyAmJiBiID49IDAgJiYgYiA8PSA3O1xyXG4gICAgICB9XHJcblxyXG4gICAgICBnZXRCb2FyZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5ib2FyZDtcclxuICAgICAgfVxyXG5cclxuICAgICAgYWRkU2hpcCAoc2hpcCkge1xyXG4gICAgICAgIHRoaXMuc2hpcHMucHVzaChzaGlwKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcGxhY2VTaGlwIChzaXplLCBjb29yZGluYXRlcykge1xyXG4gICAgICAgIGlmIChzaXplICE9PSBjb29yZGluYXRlcy5sZW5ndGgpIHJldHVybiAnU2l6ZSBhbmQgY29vcmRpbmF0ZXMgbGVuZ3RoIHNob3VsZCBiZSBlcXVhbCc7XHJcblxyXG4gICAgICAgIGNvbnN0IHNoaXAgPSBuZXcgU2hpcChzaXplKTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb29yZGluYXRlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNWYWxpZChjb29yZGluYXRlc1tpXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmJvYXJkW2Nvb3JkaW5hdGVzW2ldXS5zaGlwLnB1c2goY29vcmRpbmF0ZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYm9hcmRbY29vcmRpbmF0ZXNbaV1dLmhhc1NoaXAgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoIXRoaXMuaXNWYWxpZChjb29yZGluYXRlc1tpXSkpIHJldHVybiAnTm8gVmFsaWQnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgc2hpcC5hZGRDb29yZGluYXRlcyhjb29yZGluYXRlcyk7XHJcbiAgICAgICAgdGhpcy5hZGRTaGlwKHNoaXApO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ib2FyZDtcclxuICAgICAgfVxyXG5cclxuICAgICAgcGxhY2VFbmVteVNoaXBzIChib2FyZCkge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSA1OyBpID4gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgIGlmIChpIDwgMikgYnJlYWs7XHJcbiAgICAgICAgICAgIGxldCBjb29yZGluYXRlcyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgbGV0IG51bSA9IHRoaXMuY3JlYXRlQ29vcmRpbmF0ZXMoKTtcclxuICAgICAgICAgICAgbGV0IFt4LHldID0gbnVtLnNwbGl0KCcsJylcclxuXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgY3JlYXRlQ29vcmRpbmF0ZXMgKCkge1xyXG4gICAgICAgIGxldCBudW0xID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogOCk7IFxyXG4gICAgICAgIGxldCBudW0yID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogOCk7IFxyXG4gICAgICAgIGxldCByZXN1bHQgPSBgJHtudW0xfSwke251bTJ9YDtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaXNNb3ZlTGVnYWwocmVzdWx0KSkgcmV0dXJuIHJlc3VsdDtcclxuXHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHdoaWxlICghdGhpcy5pc01vdmVMZWdhbChyZXN1bHQpKSB7XHJcbiAgICAgICAgICAgICAgICBudW0xID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogOCk7IFxyXG4gICAgICAgICAgICAgICAgbnVtMiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDgpOyBcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGAke251bTF9LCR7bnVtMn1gO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgICByZWNlaXZlQXR0YWNrIChjb29yZGluYXRlcykge1xyXG4gICAgICAgIGxldCBzdHIgPSBgJHtjb29yZGluYXRlc31gO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5ib2FyZFtzdHJdLmF0dGFja2VkIHx8IHRoaXMuYm9hcmRbc3RyXS5taXNzZWQpIHJldHVybjtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuYm9hcmRbc3RyXS5oYXNTaGlwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYm9hcmRbc3RyXS5hdHRhY2tlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuc2hpcHMuZm9yRWFjaChzaGlwID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChzaGlwLmNvb3JkaW5hdGVzWzBdLmluY2x1ZGVzKHN0cikpIHtcclxuICAgICAgICAgICAgICAgICAgICBzaGlwLnJlZ2lzdGVySGl0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNoaXAuaXNTdW5rKCkpIHNoaXAuc3VuayA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJvYXJkW3N0cl0ubWlzc2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGdldFNoaXBzICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zaGlwcztcclxuICAgICAgfVxyXG5cclxuICAgICAgYWxsU3VuayAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2hpcHMuZXZlcnkoc2hpcCA9PiBzaGlwLnN1bmsgPT09IHRydWUpO1xyXG4gICAgICB9XHJcbn1cclxuXHJcblxyXG5sZXQgYm9hcmQgPSBuZXcgR2FtZWJvYXJkKCk7XHJcbmJvYXJkLmNyZWF0ZUJvYXJkKCk7XHJcbmJvYXJkLnBsYWNlU2hpcCgzLCBbJzcsMScsJzcsMicsJzcsMyddKTtcclxuYm9hcmQucGxhY2VTaGlwKDMsIFsnMCwxJywgJzAsMicsJzAsMyddKVxyXG5ib2FyZC5yZWNlaXZlQXR0YWNrKCcwLDEnKTtcclxuYm9hcmQucmVjZWl2ZUF0dGFjaygnMCwyJyk7XHJcbmJvYXJkLnJlY2VpdmVBdHRhY2soJzAsMycpO1xyXG5ib2FyZC5yZWNlaXZlQXR0YWNrKCc3LDEnKTtcclxuYm9hcmQucmVjZWl2ZUF0dGFjaygnNywyJyk7XHJcbmJvYXJkLnJlY2VpdmVBdHRhY2soJzcsMycpO1xyXG5cclxuXHJcbi8vIFBsYXllciBDbGFzcyAvL1xyXG5jbGFzcyBQbGF5ZXIge1xyXG4gICAgY29uc3RydWN0b3IgKGdhbWVib2FyZCkge1xyXG4gICAgICAgIHRoaXMuZ2FtZWJvYXJkID0gZ2FtZWJvYXJkO1xyXG4gICAgfVxyXG5cclxuICAgIGlzTW92ZUxlZ2FsIChtb3ZlKSB7XHJcbiAgICAgICAgcmV0dXJuICF0aGlzLmdhbWVib2FyZC5ib2FyZFttb3ZlXS5hdHRhY2tlZCAmJiAhdGhpcy5nYW1lYm9hcmQuYm9hcmRbbW92ZV0ubWlzc2VkO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBtYWtlUmFuZG9tTW92ZSAoKSB7XHJcbiAgICAgICAgbGV0IG51bTEgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA4KTsgXHJcbiAgICAgICAgbGV0IG51bTIgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA4KTsgXHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IGAke251bTF9LCR7bnVtMn1gO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5pc01vdmVMZWdhbChyZXN1bHQpKSByZXR1cm4gcmVzdWx0O1xyXG5cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgd2hpbGUgKCF0aGlzLmlzTW92ZUxlZ2FsKHJlc3VsdCkpIHtcclxuICAgICAgICAgICAgICAgIG51bTEgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA4KTsgXHJcbiAgICAgICAgICAgICAgICBudW0yID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogOCk7IFxyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gYCR7bnVtMX0sJHtudW0yfWA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxufVxyXG5cclxuY29uc3QgcGxheSA9IG5ldyBQbGF5ZXIoYm9hcmQpO1xyXG5cclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1NoaXAsIEdhbWVib2FyZCwgUGxheWVyfTsiLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gRE9NIE1hbmlwdWxhdGlvbiwgUmVuZGVyIHRoZSBHYW1lIC8vIFxyXG5cclxuLy8gUmVuZGVyIFdyaXRlIFlvdXIgTmFtZSAvLyBcclxuaW1wb3J0IHsgZ2FtZSB9IGZyb20gXCIuL2dhbWVcIjtcclxuXHJcbmZ1bmN0aW9uIHdyaXRlTmFtZSAoKSB7XHJcbiAgICBjb25zdCBtYWluID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21haW4nKTtcclxuICAgIGNvbnN0IGJveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMycpO1xyXG4gICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xyXG4gICAgY29uc3QgcGxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpXHJcblxyXG4gICAgYm94LmNsYXNzTGlzdC5hZGQoJ3BvcC11cC1ib3gnKTtcclxuICAgIHRpdGxlLmNsYXNzTGlzdC5hZGQoJ3RpdGxlLXBvcC11cCcpO1xyXG4gICAgaW5wdXQuY2xhc3NMaXN0LmFkZCgnaW5wdXQtcG9wLXVwJyk7XHJcbiAgICBwbGF5LmNsYXNzTGlzdC5hZGQoJ3BsYXktYnV0dG9uJyk7XHJcblxyXG5cclxuICAgIHRpdGxlLnRleHRDb250ZW50ID0gJ1dyaXRlIHlvdXIgTmFtZSc7XHJcbiAgICBwbGF5LmlubmVySFRNTCA9ICdCYXR0bGUnO1xyXG4gICAgaW5wdXQudHlwZSA9ICd0ZXh0JztcclxuICAgIHBsYXkudHlwZSA9ICdzdWJtaXQnO1xyXG5cclxuICAgIGJveC5hcHBlbmRDaGlsZCh0aXRsZSk7XHJcbiAgICBib3guYXBwZW5kQ2hpbGQoaW5wdXQpO1xyXG4gICAgYm94LmFwcGVuZENoaWxkKHBsYXkpO1xyXG5cclxuICAgIG1haW4uYXBwZW5kQ2hpbGQoYm94KTtcclxuXHJcbiAgICBwbGF5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgIGNsZWFuKCk7XHJcbiAgICAgICAgZ2FtZShpbnB1dC52YWx1ZSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVuZGVySW5pdGFsQm9hcmRzIChuYW1lKSB7XHJcbiAgICBjb25zdCBtYWluID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21haW4nKTtcclxuXHJcbiAgICBjb25zdCBteVNlY3Rpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIGNvbnN0IG15R2FtZVNlY3Rpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIGNvbnN0IG15Qm9hcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIGNvbnN0IG15TmFtZUJveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgY29uc3QgbXlOYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDMnKTtcclxuICAgIFxyXG4gICAgY29uc3Qgc2hpcHNDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIFxyXG4gICAgY29uc3QgZW5lbXlTZWN0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBjb25zdCBlbmVteUdhbWVTZWN0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBjb25zdCBlbmVteUJvYXJkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBjb25zdCBlbmVteU5hbWVCb3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIGNvbnN0IGVuZW15TmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gzJyk7XHJcblxyXG4gICAgY29uc3QgY2FycmllciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xyXG4gICAgY29uc3QgYmF0dGxlc2hpcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xyXG4gICAgY29uc3QgY3J1aXNlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xyXG4gICAgY29uc3Qgc3VibWFyaW5lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XHJcbiAgICBjb25zdCBkZXN0cm95ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcclxuXHJcbiAgICBjYXJyaWVyLnNyYyA9ICcuLi9kaXN0L0ltYWdlcy81LnBuZyc7XHJcbiAgICBiYXR0bGVzaGlwLnNyYyA9ICcuLi9kaXN0L0ltYWdlcy81LnBuZyc7XHJcbiAgICBjcnVpc2VyLnNyYyA9ICcuLi9kaXN0L0ltYWdlcy81LnBuZyc7XHJcbiAgICBzdWJtYXJpbmUuc3JjID0gJy4uL2Rpc3QvSW1hZ2VzLzUucG5nJztcclxuICAgIGRlc3Ryb3llci5zcmMgPSAnLi4vZGlzdC9JbWFnZXMvNS5wbmcnO1xyXG5cclxuXHJcbiAgICBjb25zdCBzaGlwcyA9IFtjYXJyaWVyLCBiYXR0bGVzaGlwLCBjcnVpc2VyLCBzdWJtYXJpbmUsIGRlc3Ryb3llcl07XHJcblxyXG5cclxuICAgIHNoaXBzLmZvckVhY2goc2hpcCA9PiB7XHJcbiAgICAgICAgc2hpcC5jbGFzc0xpc3QuYWRkKCdzaGlwJyk7XHJcbiAgICAgICAgc2hpcHNDb250YWluZXIuYXBwZW5kQ2hpbGQoc2hpcCk7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgXHJcbiAgICBcclxuICAgIG15U2VjdGlvbi5jbGFzc0xpc3QuYWRkKCdteS1zZWN0aW9uJyk7XHJcbiAgICBteUdhbWVTZWN0aW9uLmNsYXNzTGlzdC5hZGQoJ215LWdhbWUtc2VjdGlvbicpO1xyXG4gICAgbXlCb2FyZC5jbGFzc0xpc3QuYWRkKCdteS1ib2FyZCcpO1xyXG4gICAgbXlOYW1lQm94LmNsYXNzTGlzdC5hZGQoJ215LW5hbWUtYm94Jyk7XHJcbiAgICBteU5hbWUuY2xhc3NMaXN0LmFkZCgnbXktbmFtZScpO1xyXG4gICAgXHJcbiAgICBzaGlwc0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdteS1zaGlwcycpO1xyXG4gICAgZW5lbXlTZWN0aW9uLmNsYXNzTGlzdC5hZGQoJ2VuZW15LXNlY3Rpb24nKTtcclxuICAgIGVuZW15R2FtZVNlY3Rpb24uY2xhc3NMaXN0LmFkZCgnZW5lbXktZ2FtZS1zZWN0aW9uJyk7XHJcbiAgICBlbmVteUJvYXJkLmNsYXNzTGlzdC5hZGQoJ2VuZW15LWJvYXJkJyk7XHJcbiAgICBlbmVteU5hbWVCb3guY2xhc3NMaXN0LmFkZCgnZW5lbXktbmFtZS1ib3gnKTtcclxuICAgIGVuZW15TmFtZS5jbGFzc0xpc3QuYWRkKCdlbmVteS1uYW1lJyk7XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCA4OyBpICs9IDEpIHtcclxuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDg7IGogKz0gMSkge1xyXG4gICAgICAgICAgY29uc3QgY29vcmRpbmF0ZSA9IGAke2l9LCR7an1gO1xyXG4gICAgICAgICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICBjb25zdCBkaXZFbmVteSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgZGl2LmNsYXNzTGlzdC5hZGQoJ215LWRpdi1ib3gnKTtcclxuICAgICAgICAgIGRpdkVuZW15LmNsYXNzTGlzdC5hZGQoJ2VuZW15LWRpdi1ib3gnKTtcclxuXHJcbiAgICAgICAgICBkaXYuaWQgPSBgUCAke2Nvb3JkaW5hdGV9YDtcclxuICAgICAgICAgIGRpdkVuZW15LmlkID0gYEUgJHtjb29yZGluYXRlfWA7XHJcbiAgXHJcbiAgICAgICAgICBteUJvYXJkLmFwcGVuZENoaWxkKGRpdik7XHJcbiAgICAgICAgICBlbmVteUJvYXJkLmFwcGVuZENoaWxkKGRpdkVuZW15KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbXlOYW1lLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIGVuZW15TmFtZS50ZXh0Q29udGVudCA9ICdFbmVteSc7XHJcblxyXG4gICAgbXlOYW1lQm94LmFwcGVuZENoaWxkKG15TmFtZSk7XHJcbiAgICBteUdhbWVTZWN0aW9uLmFwcGVuZENoaWxkKG15Qm9hcmQpO1xyXG4gICAgbXlTZWN0aW9uLmFwcGVuZENoaWxkKG15TmFtZUJveCk7XHJcbiAgICBteVNlY3Rpb24uYXBwZW5kQ2hpbGQobXlHYW1lU2VjdGlvbik7XHJcbiAgICBcclxuICAgIGVuZW15TmFtZUJveC5hcHBlbmRDaGlsZChlbmVteU5hbWUpO1xyXG4gICAgZW5lbXlHYW1lU2VjdGlvbi5hcHBlbmRDaGlsZChlbmVteUJvYXJkKTtcclxuICAgIGVuZW15U2VjdGlvbi5hcHBlbmRDaGlsZChlbmVteU5hbWVCb3gpO1xyXG4gICAgZW5lbXlTZWN0aW9uLmFwcGVuZENoaWxkKGVuZW15R2FtZVNlY3Rpb24pO1xyXG5cclxuICAgIG1haW4uYXBwZW5kQ2hpbGQobXlTZWN0aW9uKTtcclxuICAgIG1haW4uYXBwZW5kQ2hpbGQoc2hpcHNDb250YWluZXIpO1xyXG4gICAgbWFpbi5hcHBlbmRDaGlsZChlbmVteVNlY3Rpb24pO1xyXG5cclxuICAgIG1haW4uY2xhc3NMaXN0LmFkZCgnbWFpbi1nYW1lJyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbmRlck15Qm9hcmQgKGJvYXJkKSB7XHJcbiAgICBjb25zdCBib3hlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5teS1kaXYtYm94Jyk7XHJcblxyXG4gICAgZm9yIChjb25zdCBib3ggb2YgYm94ZXMpIHtcclxuICAgICAgICBsZXQgY29vcmRpbmF0ZXMgPSBib3guaWQ7XHJcbiAgICAgICAgbGV0IHNwbGl0ID0gY29vcmRpbmF0ZXMuc3BsaXQoJyAnKTtcclxuICAgICAgICBsZXQgbnVtID0gc3BsaXRbMV07IFxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChib2FyZC5ib2FyZFtudW1dLmhhc1NoaXApIHtcclxuICAgICAgICAgICAgYm94LnN0eWxlLmJhY2tncm91bmQgPSAnZ3JlZW4nO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYm9hcmQuYm9hcmRbbnVtXS5hdHRhY2tlZCkge1xyXG4gICAgICAgICAgICBib3guaW5uZXJIVE1MID0gJ+KdjCc7XHJcbiAgICAgICAgICAgIGJveC5zdHlsZS5iYWNrZ3JvdW5kID0gJyNGNUMyQzEnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYm9hcmQuYm9hcmRbbnVtXS5taXNzZWQpIHtcclxuICAgICAgICAgICAgYm94LmlubmVySFRNTCA9ICfwn5KmJztcclxuICAgICAgICAgICAgYm94LnN0eWxlLmJhY2tncm91bmQgPSAnbGlnaHRibHVlJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbmRlckVuZW15Qm9hcmQgKGJvYXJkKSB7XHJcbiAgICBjb25zdCBib3hlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lbmVteS1kaXYtYm94Jyk7XHJcblxyXG4gICAgZm9yIChjb25zdCBib3ggb2YgYm94ZXMpIHtcclxuICAgICAgICBsZXQgY29vcmRpbmF0ZXMgPSBib3guaWQ7XHJcbiAgICAgICAgbGV0IHNwbGl0ID0gY29vcmRpbmF0ZXMuc3BsaXQoJyAnKTtcclxuICAgICAgICBsZXQgbnVtID0gc3BsaXRbMV07IFxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChib2FyZC5ib2FyZFtudW1dLmhhc1NoaXApIHtcclxuICAgICAgICAgICAgYm94LnN0eWxlLmJhY2tncm91bmQgPSAnb3JhbmdlJztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGJvYXJkLmJvYXJkW251bV0uYXR0YWNrZWQpIHtcclxuICAgICAgICAgICAgYm94LmlubmVySFRNTCA9ICfinYwnO1xyXG4gICAgICAgICAgICBib3guc3R5bGUuYmFja2dyb3VuZCA9ICcjRjVDMkMxJztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGJvYXJkLmJvYXJkW251bV0ubWlzc2VkKSB7XHJcbiAgICAgICAgICAgIGJveC5pbm5lckhUTUwgPSAn8J+Spic7XHJcbiAgICAgICAgICAgIGJveC5zdHlsZS5iYWNrZ3JvdW5kID0gJ2xpZ2h0Ymx1ZSc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBkcmFnQW5kRHJvcCAoKSB7XHJcbiAgICBsZXQgc2hpcHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2hpcCcpO1xyXG4gICAgbGV0IGJveGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm15LWRpdi1ib3gnKTtcclxuXHJcbiAgICBzaGlwcy5mb3JFYWNoKHNoaXAgPT4ge1xyXG4gICAgICAgIHNoaXAuZHJhZ2dhYmxlID0gdHJ1ZTtcclxuICAgIFxyXG4gICAgICAgIHNoaXAuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0JywgKGUpID0+IHtcclxuICAgICAgICAgICAgbGV0IHNlbGVjdGVkID0gZS50YXJnZXQ7XHJcbiAgICAgICAgICAgIGJveGVzLmZvckVhY2goYm94ID0+IHtcclxuICAgICAgICAgICAgICAgIGJveC5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBib3guc3R5bGUuYmFja2dyb3VuZCA9ICdyZWQnO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBib3guYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2VuZCcsIChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbGV0IGJveElkID0gZS50YXJnZXQuaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbGV0IG15Qm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYm94SWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGUudGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBteUJveC5hcHBlbmRDaGlsZChzZWxlY3RlZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gc2VsZWN0ZWQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBib3guYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbGV0IGJveElkID0gZS50YXJnZXQuaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbGV0IG15Qm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYm94SWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUudGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBteUJveC5hcHBlbmRDaGlsZChzZWxlY3RlZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gc2VsZWN0ZWQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbmRlcldpbiAoKSB7XHJcbiAgICBjb25zdCBtYWluID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21haW4nKTtcclxuICAgIGNvbnN0IGJveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMycpOyBcclxuICAgIGNvbnN0IHBsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKVxyXG5cclxuICAgIGJveC5jbGFzc0xpc3QuYWRkKCdwb3AtdXAtYm94Jyk7XHJcbiAgICB0aXRsZS5jbGFzc0xpc3QuYWRkKCd0aXRsZS1wb3AtdXAnKTtcclxuICAgIHBsYXkuY2xhc3NMaXN0LmFkZCgncGxheS1idXR0b24nKTtcclxuXHJcbiAgICB0aXRsZS50ZXh0Q29udGVudCA9ICdZb3UgV2luJztcclxuICAgIHBsYXkuaW5uZXJIVE1MID0gJ1BsYXkgQWdhaW4nO1xyXG4gICAgcGxheS50eXBlID0gJ3N1Ym1pdCc7XHJcblxyXG4gICAgYm94LmFwcGVuZENoaWxkKHRpdGxlKTtcclxuICAgIGJveC5hcHBlbmRDaGlsZChwbGF5KTtcclxuXHJcbiAgICBtYWluLmFwcGVuZENoaWxkKGJveCk7XHJcblxyXG4gICAgcGxheS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICBjbGVhbigpO1xyXG4gICAgICAgIHdyaXRlTmFtZSgpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbmRlckxvc2UgKCkge1xyXG4gICAgY29uc3QgbWFpbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYWluJyk7XHJcbiAgICBjb25zdCBib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDMnKTsgXHJcbiAgICBjb25zdCBwbGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJylcclxuXHJcbiAgICBib3guY2xhc3NMaXN0LmFkZCgncG9wLXVwLWJveCcpO1xyXG4gICAgdGl0bGUuY2xhc3NMaXN0LmFkZCgndGl0bGUtcG9wLXVwJyk7XHJcbiAgICBwbGF5LmNsYXNzTGlzdC5hZGQoJ3BsYXktYnV0dG9uJyk7XHJcblxyXG4gICAgdGl0bGUudGV4dENvbnRlbnQgPSAnWW91IExvc2UnO1xyXG4gICAgcGxheS5pbm5lckhUTUwgPSAnUGxheSBBZ2Fpbic7XHJcbiAgICBwbGF5LnR5cGUgPSAnc3VibWl0JztcclxuXHJcbiAgICBib3guYXBwZW5kQ2hpbGQodGl0bGUpO1xyXG4gICAgYm94LmFwcGVuZENoaWxkKHBsYXkpO1xyXG5cclxuICAgIG1haW4uYXBwZW5kQ2hpbGQoYm94KTtcclxuXHJcbiAgICBwbGF5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgIGNsZWFuKCk7XHJcbiAgICAgICAgd3JpdGVOYW1lKCk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gY2xlYW4gKCkge1xyXG4gICAgY29uc3QgbWFpbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYWluJyk7XHJcbiAgICBtYWluLmlubmVySFRNTCA9ICcnO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IHt3cml0ZU5hbWUsIGNsZWFuLCByZW5kZXJJbml0YWxCb2FyZHMsIHJlbmRlck15Qm9hcmQsIHJlbmRlckVuZW15Qm9hcmQsIHJlbmRlcldpbiwgcmVuZGVyTG9zZX07XHJcbiIsImltcG9ydCB7IFNoaXAsIEdhbWVib2FyZCwgUGxheWVyIH0gZnJvbSBcIi4vZmFjdG9yaWVzXCI7XHJcbmltcG9ydCB7IHdyaXRlTmFtZSwgcmVuZGVySW5pdGFsQm9hcmRzLCByZW5kZXJNeUJvYXJkLCByZW5kZXJFbmVteUJvYXJkLCAgY2xlYW4sIHJlbmRlcldpbiwgcmVuZGVyTG9zZSB9IGZyb20gXCIuL3JlbmRlclwiO1xyXG5cclxuXHJcbmZ1bmN0aW9uIGdhbWUgKG5hbWUpIHtcclxuICAgIHJlbmRlckluaXRhbEJvYXJkcyhuYW1lKTtcclxuICAgIGxldCBteUJvYXJkID0gbmV3IEdhbWVib2FyZCgpO1xyXG4gICAgbGV0IGVuZW15Qm9hcmQgPSBuZXcgR2FtZWJvYXJkKCk7XHJcbiAgICBcclxuICAgIG15Qm9hcmQuY3JlYXRlQm9hcmQoKTtcclxuICAgIC8vIG15Qm9hcmQucGxhY2VTaGlwKDUsIFsnMSwxJywnMSwyJywnMSwzJywgJzEsNCcsICcxLDUnXSk7XHJcbiAgICAvLyBteUJvYXJkLnBsYWNlU2hpcCg0LCBbJzQsNCcsJzQsNScsJzQsNicsICc0LDcnXSk7XHJcbiAgICAvLyBteUJvYXJkLnBsYWNlU2hpcCgzLCBbJzcsMScsJzcsMicsJzcsMyddKTtcclxuICAgIC8vIG15Qm9hcmQucGxhY2VTaGlwKDMsIFsnMCwxJywnMCwyJywnMCwzJ10pO1xyXG4gICAgbXlCb2FyZC5wbGFjZVNoaXAoMiwgWyc1LDEnLCc1LDInXSk7XHJcbiAgICBcclxuICAgIGVuZW15Qm9hcmQuY3JlYXRlQm9hcmQoKTtcclxuICAgIGVuZW15Qm9hcmQucGxhY2VTaGlwKDUsIFsnMSwxJywnMSwyJywnMSwzJywgJzEsNCcsICcxLDUnXSk7XHJcbiAgICBlbmVteUJvYXJkLnBsYWNlU2hpcCg0LCBbJzQsNCcsJzQsNScsJzQsNicsICc0LDcnXSk7XHJcbiAgICBcclxuICAgIGxldCBwbGF5ZXIgPSBuZXcgUGxheWVyKG15Qm9hcmQpO1xyXG4gICAgbGV0IGVuZW15ID0gbmV3IFBsYXllcihlbmVteUJvYXJkKTtcclxuXHJcbiAgICByZW5kZXJNeUJvYXJkKHBsYXllci5nYW1lYm9hcmQpO1xyXG4gICAgcmVuZGVyRW5lbXlCb2FyZChlbmVteS5nYW1lYm9hcmQpO1xyXG5cclxuICAgIGNvbnN0IGVuZW15Qm94ZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZW5lbXktZGl2LWJveCcpO1xyXG4gICAgbGV0IGVCb3hlcyA9IFsuLi5lbmVteUJveGVzXTtcclxuXHJcbiAgICBlQm94ZXMuZm9yRWFjaChlQm94ID0+IHtcclxuICAgICAgICBlQm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgICAgICAgbGV0IGVDb29yZGluYXRlcyA9IGUudGFyZ2V0LmlkO1xyXG4gICAgICAgICAgICBsZXQgZVNwbGl0ID0gZUNvb3JkaW5hdGVzLnNwbGl0KCcgJyk7XHJcbiAgICAgICAgICAgIGxldCBlTnVtID0gZVNwbGl0WzFdOyBcclxuXHJcbiAgICAgICAgICAgIGxldCBlbmVteU1vdmUgPSBlbmVteS5tYWtlUmFuZG9tTW92ZSgpO1xyXG4gICAgICAgICAgICBsZXQgZW5lbXlBdHRhY2sgPSBteUJvYXJkLnJlY2VpdmVBdHRhY2soZW5lbXlNb3ZlKTtcclxuICAgICAgICAgICAgbGV0IGF0dGFjayA9IGVuZW15Qm9hcmQucmVjZWl2ZUF0dGFjayhlTnVtKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChhdHRhY2spIHtcclxuICAgICAgICAgICAgICAgIHJlbmRlckVuZW15Qm9hcmQoZW5lbXkuZ2FtZWJvYXJkKTtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKCFlbmVteUF0dGFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmVteU1vdmUgPSBlbmVteS5tYWtlUmFuZG9tTW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmVteUF0dGFjayA9IG15Qm9hcmQucmVjZWl2ZUF0dGFjayhlbmVteU1vdmUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZW5kZXJNeUJvYXJkKHBsYXllci5nYW1lYm9hcmQpO1xyXG4gICAgICAgICAgICAgICAgICB9LCAxMDAwKTsgXHJcbiAgICAgICAgICAgICAgICAgIFxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBsZXQgbXlTdW5rID0gbXlCb2FyZC5hbGxTdW5rKCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgZW5lbXlTdW5rID0gZW5lbXlCb2FyZC5hbGxTdW5rKCk7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGlmIChteVN1bmspIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGVhbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbmRlckxvc2UoKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBpZiAoZW5lbXlTdW5rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xlYW4oKTtcclxuICAgICAgICAgICAgICAgICAgICByZW5kZXJXaW4oKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuXHJcblxyXG5cclxuXHJcbi8vIDEuIENyZWF0ZSB0aGUgbWFpbiBnYW1lIGxvb3AgYW5kIGEgbW9kdWxlIGZvciBET00gaW50ZXJhY3Rpb24uXHJcbi8vICAgICAgYS4gQXQgdGhpcyBwb2ludCBpdCBpcyBhcHByb3ByaWF0ZSB0byBiZWdpbiBjcmFmdGluZyB5b3VyIFVzZXIgSW50ZXJmYWNlLlxyXG4vLyAgICAgIGIuIFRoZSBnYW1lIGxvb3Agc2hvdWxkIHNldCB1cCBhIG5ldyBnYW1lIGJ5IGNyZWF0aW5nIFBsYXllcnMgYW5kIEdhbWVib2FyZHMuIEZvciBub3cganVzdCBwb3B1bGF0ZSBlYWNoIEdhbWVib2FyZCB3aXRoIHByZWRldGVybWluZWQgY29vcmRpbmF0ZXMuIFlvdSBjYW4gaW1wbGVtZW50IGEgc3lzdGVtIGZvciBhbGxvd2luZyBwbGF5ZXJzIHRvIHBsYWNlIHRoZWlyIHNoaXBzIGxhdGVyLlxyXG4vLyAgICAgIGMuIFdl4oCZbGwgbGVhdmUgdGhlIEhUTUwgaW1wbGVtZW50YXRpb24gdXAgdG8geW91IGZvciBub3csIGJ1dCB5b3Ugc2hvdWxkIGRpc3BsYXkgYm90aCB0aGUgcGxheWVy4oCZcyBib2FyZHMgYW5kIHJlbmRlciB0aGVtIHVzaW5nIGluZm9ybWF0aW9uIGZyb20gdGhlIEdhbWVib2FyZCBjbGFzcy9mYWN0b3J5LlxyXG4vLyAgICAgICAgICBhLiBZb3UgbmVlZCBtZXRob2RzIHRvIHJlbmRlciB0aGUgZ2FtZWJvYXJkcyBhbmQgdG8gdGFrZSB1c2VyIGlucHV0IGZvciBhdHRhY2tpbmcuIEZvciBhdHRhY2tzLCBsZXQgdGhlIHVzZXIgY2xpY2sgb24gYSBjb29yZGluYXRlIGluIHRoZSBlbmVteSBHYW1lYm9hcmQuXHJcbi8vICAgICAgZC4gVGhlIGdhbWUgbG9vcCBzaG91bGQgc3RlcCB0aHJvdWdoIHRoZSBnYW1lIHR1cm4gYnkgdHVybiB1c2luZyBvbmx5IG1ldGhvZHMgZnJvbSBvdGhlciBvYmplY3RzLiBJZiBhdCBhbnkgcG9pbnQgeW91IGFyZSB0ZW1wdGVkIHRvIHdyaXRlIGEgbmV3IGZ1bmN0aW9uIGluc2lkZSB0aGUgZ2FtZSBsb29wLCBzdGVwIGJhY2sgYW5kIGZpZ3VyZSBvdXQgd2hpY2ggY2xhc3Mgb3IgbW9kdWxlIHRoYXQgZnVuY3Rpb24gc2hvdWxkIGJlbG9uZyB0by5cclxuLy8gICAgICBlLiBDcmVhdGUgY29uZGl0aW9ucyBzbyB0aGF0IHRoZSBnYW1lIGVuZHMgb25jZSBvbmUgcGxheWVy4oCZcyBzaGlwcyBoYXZlIGFsbCBiZWVuIHN1bmsuIFRoaXMgZnVuY3Rpb24gaXMgYXBwcm9wcmlhdGUgZm9yIHRoZSBHYW1lIG1vZHVsZS5cclxuXHJcblxyXG4vLyAyLiBGaW5pc2ggaXQgdXBcclxuLy8gICAgICBhLiBUaGVyZSBhcmUgc2V2ZXJhbCBvcHRpb25zIGF2YWlsYWJsZSBmb3IgbGV0dGluZyB1c2VycyBwbGFjZSB0aGVpciBzaGlwcy4gWW91IGNhbiBsZXQgdGhlbSB0eXBlIGNvb3JkaW5hdGVzIGZvciBlYWNoIHNoaXAsIG9yIGludmVzdGlnYXRlIGltcGxlbWVudGluZyBkcmFnIGFuZCBkcm9wLlxyXG4vLyAgICAgIGIuIFlvdSBjYW4gcG9saXNoIHRoZSBpbnRlbGxpZ2VuY2Ugb2YgdGhlIGNvbXB1dGVyIHBsYXllciBieSBoYXZpbmcgaXQgdHJ5IGFkamFjZW50IHNsb3RzIGFmdGVyIGdldHRpbmcgYSDigJhoaXTigJkuXHJcbi8vICAgICAgYy4gT3B0aW9uYWxseSwgY3JlYXRlIGEgMiBwbGF5ZXIgb3B0aW9uIHRoYXQgbGV0cyB1c2VycyB0YWtlIHR1cm5zIGJ5IHBhc3NpbmcgdGhlIGRldmljZSBiYWNrIGFuZCBmb3J0aC4gSWYgeW914oCZcmUgZ29pbmcgdG8gZ28gdGhpcyByb3V0ZSwgbWFrZSBzdXJlIHRoZSBnYW1lIGlzIHBsYXlhYmxlIG9uIGEgbW9iaWxlIHNjcmVlbiBhbmQgaW1wbGVtZW50IGEg4oCYcGFzcyBkZXZpY2XigJkgc2NyZWVuIHNvIHRoYXQgcGxheWVycyBkb27igJl0IHNlZSBlYWNoIG90aGVycyBib2FyZHMhXHJcbiBcclxuXHJcbi8vICBUaGUgNSBzaGlwcyBhcmU6IENhcnJpZXIgKG9jY3VwaWVzIDUgc3BhY2VzKSwgQmF0dGxlc2hpcCAoNCksIENydWlzZXIgKDMpLCBTdWJtYXJpbmUgKDMpLCBhbmQgRGVzdHJveWVyICgyKS4gLy9cclxuXHJcblxyXG5cclxuZXhwb3J0IHtnYW1lfTsiLCIvLyBMaW50ZXIsIFByZXR0aWVyLCBKZXN0LmNvbmZpZyAvLyBcclxuXHJcbmltcG9ydCB7IFNoaXAsIEdhbWVib2FyZCwgUGxheWVyIH0gZnJvbSBcIi4vZmFjdG9yaWVzXCI7XHJcbmltcG9ydCB7IHdyaXRlTmFtZSwgY2xlYW4sIHJlbmRlckluaXRhbEJvYXJkcywgcmVuZGVyV2luLCByZW5kZXJMb3NlIH0gZnJvbSBcIi4vcmVuZGVyXCI7XHJcbmltcG9ydCB7IGdhbWUgfSBmcm9tIFwiLi9nYW1lXCI7XHJcblxyXG53cml0ZU5hbWUoKTtcclxuIl0sIm5hbWVzIjpbIlNoaXAiLCJjb25zdHJ1Y3RvciIsInNpemUiLCJ0aGlzIiwiaGl0Iiwic3VuayIsImNvb3JkaW5hdGVzIiwicmVnaXN0ZXJIaXQiLCJpc1N1bmsiLCJhZGRDb29yZGluYXRlcyIsInBvc2l0aW9uIiwicHVzaCIsIkdhbWVib2FyZCIsImJvYXJkIiwic2hpcHMiLCJjcmVhdGVCb2FyZCIsImkiLCJqIiwiY29vcmRpbmF0ZSIsImF0dGFja2VkIiwibWlzc2VkIiwiaGFzU2hpcCIsInNoaXAiLCJpc1ZhbGlkIiwiYXJyIiwic3BsaXQiLCJhIiwiTnVtYmVyIiwiYiIsImdldEJvYXJkIiwiYWRkU2hpcCIsInBsYWNlU2hpcCIsImxlbmd0aCIsInBsYWNlRW5lbXlTaGlwcyIsIm51bSIsImNyZWF0ZUNvb3JkaW5hdGVzIiwieCIsInkiLCJudW0xIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwibnVtMiIsInJlc3VsdCIsImlzTW92ZUxlZ2FsIiwicmVjZWl2ZUF0dGFjayIsInN0ciIsImZvckVhY2giLCJpbmNsdWRlcyIsImdldFNoaXBzIiwiYWxsU3VuayIsImV2ZXJ5IiwiUGxheWVyIiwiZ2FtZWJvYXJkIiwibW92ZSIsIm1ha2VSYW5kb21Nb3ZlIiwibW9kdWxlIiwiZXhwb3J0cyIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsIl9fd2VicGFja19tb2R1bGVzX18iLCJ3cml0ZU5hbWUiLCJtYWluIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImJveCIsImNyZWF0ZUVsZW1lbnQiLCJ0aXRsZSIsImlucHV0IiwicGxheSIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwiaW5uZXJIVE1MIiwidHlwZSIsImFwcGVuZENoaWxkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsZWFuIiwibmFtZSIsIm15U2VjdGlvbiIsIm15R2FtZVNlY3Rpb24iLCJteUJvYXJkIiwibXlOYW1lQm94IiwibXlOYW1lIiwic2hpcHNDb250YWluZXIiLCJlbmVteVNlY3Rpb24iLCJlbmVteUdhbWVTZWN0aW9uIiwiZW5lbXlCb2FyZCIsImVuZW15TmFtZUJveCIsImVuZW15TmFtZSIsImNhcnJpZXIiLCJiYXR0bGVzaGlwIiwiY3J1aXNlciIsInN1Ym1hcmluZSIsImRlc3Ryb3llciIsInNyYyIsImRpdiIsImRpdkVuZW15IiwiaWQiLCJyZW5kZXJJbml0YWxCb2FyZHMiLCJwbGF5ZXIiLCJlbmVteSIsInJlbmRlck15Qm9hcmQiLCJyZW5kZXJFbmVteUJvYXJkIiwicXVlcnlTZWxlY3RvckFsbCIsImVCb3giLCJlIiwiZU51bSIsInRhcmdldCIsImVuZW15TW92ZSIsImVuZW15QXR0YWNrIiwic2V0VGltZW91dCIsIm15U3VuayIsImVuZW15U3VuayIsInJlbmRlckxvc2UiLCJyZW5kZXJXaW4iLCJnYW1lIiwidmFsdWUiLCJib3hlcyIsInN0eWxlIiwiYmFja2dyb3VuZCJdLCJzb3VyY2VSb290IjoiIn0=