(()=>{var e={776:e=>{class t{constructor(e){this.size=e,this.hit=0,this.sunk=!1,this.coordinates=[]}registerHit(){return this.hit+=1}isSunk(){return this.hit===this.size}addCoordinates(e){this.coordinates.push(e)}}class a{constructor(){this.board=[],this.ships=[]}createBoard(e=8){for(let t=0;t<e;t+=1)for(let a=0;a<e;a+=1){const e=`${t},${a}`;this.board[e]={attacked:!1,missed:!1,hasShip:!1,ship:[]}}return this.board}isValid(e){let t=e.split(","),a=Number(t[0]),i=Number(t[1]);return a>=0&&a<=7&&i>=0&&i<=7}getBoard(){return this.board}addShip(e){this.ships.push(e)}placeShip(e,a){if(e!==a.length)return"Size and coordinates length should be equal";const i=new t(e);for(let e=0;e<a.length;e++)if(this.isValid(a[e]))this.board[a[e]].ship.push(a),this.board[a[e]].hasShip=!0;else if(!this.isValid(a[e]))return"No Valid";return i.addCoordinates(a),this.addShip(i),this.board}receiveAttack(e){let t=`${e}`;this.board[t].hasShip?(this.board[t].attacked=!0,this.ships.forEach((e=>{e.coordinates[0].includes(t)&&(e.registerHit(),e.isSunk()&&(e.sunk=!0))}))):this.board[t].missed=!0}getShips(){return this.ships}allSunk(){return this.ships.every((e=>!0===e.sunk))}}let i=new a;i.createBoard(),i.placeShip(3,["7,1","7,2","7,3"]),i.placeShip(3,["0,1","0,2","0,3"]),i.receiveAttack("0,1"),i.receiveAttack("0,2"),i.receiveAttack("0,3"),i.receiveAttack("7,1"),i.receiveAttack("7,2"),i.receiveAttack("7,3");class s{constructor(e){this.gameboard=e}isMoveLegal(e){return!this.gameboard.board[e].attacked&&!this.gameboard.board[e].missed}makeRandomMove(){let e=Math.floor(8*Math.random()),t=Math.floor(8*Math.random()),a=`${e},${t}`;if(this.isMoveLegal(a))return a;for(;!this.isMoveLegal(a);)e=Math.floor(8*Math.random()),t=Math.floor(8*Math.random()),a=`${e},${t}`;return a}}new s(i),e.exports={Ship:t,Gameboard:a,Player:s}}},t={};function a(i){var s=t[i];if(void 0!==s)return s.exports;var d=t[i]={exports:{}};return e[i](d,d.exports,a),d.exports}(()=>{"use strict";var e=a(776);function t(e){const t=document.querySelectorAll(".my-div-box");for(const a of t){let t=a.id.split(" ")[1];e.board[t].hasShip&&(a.style.background="green"),e.board[t].attacked&&(a.style.background="red"),e.board[t].missed&&(a.style.background="white")}}(function(){const e=document.getElementById("main"),t=document.createElement("div"),a=document.createElement("div"),i=document.createElement("div"),s=document.createElement("div"),d=document.createElement("div"),r=document.createElement("h3"),n=document.createElement("div"),c=document.createElement("div"),o=document.createElement("div"),l=document.createElement("div"),m=document.createElement("div"),h=document.createElement("h3"),p=document.createElement("img"),u=document.createElement("img"),g=document.createElement("img"),b=document.createElement("img"),v=document.createElement("img");p.src="../dist/Images/5.png",u.src="../dist/Images/5.png",g.src="../dist/Images/5.png",b.src="../dist/Images/5.png",v.src="../dist/Images/5.png";const y=document.createElement("img"),E=document.createElement("img"),k=document.createElement("img"),S=document.createElement("img"),f=document.createElement("img");y.src="../dist/Images/5.png",E.src="../dist/Images/5.png",k.src="../dist/Images/5.png",S.src="../dist/Images/5.png",f.src="../dist/Images/5.png";const L=[y,E,k,S,f];[p,u,g,b,v].forEach((e=>{e.classList.add("ship"),s.appendChild(e)})),L.forEach((e=>{e.classList.add("ship"),l.appendChild(e)})),t.classList.add("my-section"),a.classList.add("my-game-section"),i.classList.add("my-board"),s.classList.add("my-ships"),d.classList.add("my-name-box"),r.classList.add("my-name"),n.classList.add("enemy-section"),c.classList.add("enemy-game-section"),o.classList.add("enemy-board"),l.classList.add("enemy-ships"),m.classList.add("enemy-name-box"),h.classList.add("enemy-name");for(let e=0;e<8;e+=1)for(let t=0;t<8;t+=1){const a=`${e},${t}`,s=document.createElement("div"),d=document.createElement("div");s.classList.add("my-div-box"),d.classList.add("enemy-div-box"),s.id=`P ${a}`,d.id=`E ${a}`,i.appendChild(s),o.appendChild(d)}r.textContent="Franco",h.textContent="Enemy",d.appendChild(r),a.appendChild(i),a.appendChild(s),t.appendChild(d),t.appendChild(a),m.appendChild(h),c.appendChild(o),c.appendChild(l),n.appendChild(m),n.appendChild(c),e.appendChild(t),e.appendChild(n),e.classList.add("main-game")})(),function(){let a=new e.Gameboard,i=new e.Gameboard;a.createBoard(),a.placeShip(5,["1,1","1,2","1,3","1,4","1,5"]),a.placeShip(4,["4,4","4,5","4,6","4,7"]),a.placeShip(3,["7,1","7,2","7,3"]),a.placeShip(3,["0,1","0,2","0,3"]),a.placeShip(2,["5,1","5,2"]),i.createBoard(),i.placeShip(5,["1,1","1,2","1,3","1,4","1,5"]),i.placeShip(4,["4,4","4,5","4,6","4,7"]),i.placeShip(3,["7,1","7,2","7,3"]),i.placeShip(3,["0,1","0,2","0,3"]),i.placeShip(2,["5,1","5,2"]);let s=new e.Player(a),d=new e.Player(i);a.receiveAttack("0,1"),a.receiveAttack("0,0"),i.receiveAttack("4,4"),t(s.gameboard),function(e){const t=document.querySelectorAll(".enemy-div-box");for(const a of t){let t=a.id.split(" ")[1];e.board[t].hasShip&&(a.style.background="orange"),e.board[t].attacked&&(a.style.background="red"),e.board[t].missed&&(a.style.background="white")}}(d.gameboard),[...document.querySelectorAll(".my-div-box")].forEach((e=>{e.addEventListener("click",(e=>{let i=e.target.id.split(" ")[1];a.receiveAttack(i),t(s.gameboard)}))})),[...document.querySelectorAll(".enemy-div-box")].forEach((e=>{e.addEventListener("click",(e=>{let a=e.target.id.split(" ")[1];i.receiveAttack(a),t(d.gameboard)}))}))}()})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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NUIsR0FDdkIsTUFBTStDLEVBQVFDLFNBQVNDLGlCQUFpQixrQkFFeEMsSUFBSyxNQUFNQyxLQUFPSCxFQUFPLENBQ3JCLElBRUlJLEVBRmNELEVBQUlFLEdBQ0V4QyxNQUFNLEtBQ2QsR0FFWlosRUFBTUEsTUFBTW1ELEdBQUszQyxVQUNqQjBDLEVBQUlHLE1BQU1DLFdBQWEsVUFFdkJ0RCxFQUFNQSxNQUFNbUQsR0FBSzdDLFdBQ2pCNEMsRUFBSUcsTUFBTUMsV0FBYSxPQUV2QnRELEVBQU1BLE1BQU1tRCxHQUFLNUMsU0FDakIyQyxFQUFJRyxNQUFNQyxXQUFhLFFBRS9CLENBQ0osQ0V2SklxQyxDQUFpQk4sRUFBTXpELFdBR1YsSUFER29CLFNBQVNDLGlCQUFpQixnQkFHbkMzQixTQUFRc0UsSUFDWEEsRUFBS0MsaUJBQWlCLFNBQVVDLElBQzVCLElBRUlDLEVBRmVELEVBQUVFLE9BQU81QyxHQUNGeEMsTUFBTSxLQUNkLEdBRWxCZ0QsRUFBUXhDLGNBQWMyRSxHQUN0QmpELEVBQWM0QyxFQUFPOUQsVUFBVSxHQUdqQyxJQUlPLElBRE1vQixTQUFTQyxpQkFBaUIsbUJBR3RDM0IsU0FBUTJFLElBQ1hBLEVBQUtKLGlCQUFpQixTQUFVQyxJQUM1QixJQUVJSSxFQUZlSixFQUFFRSxPQUFPNUMsR0FDRnhDLE1BQU0sS0FDZCxHQUVsQnNELEVBQVc5QyxjQUFjOEUsR0FDekJwRCxFQUFjdUMsRUFBTXpELFVBQVUsR0FDaEMsR0FFVixDRHJEQXVFLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2ZhY3Rvcmllcy5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvcmVuZGVyLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9nYW1lLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFNoaXAgQ2xhc3MgLy9cclxuY2xhc3MgU2hpcCB7XHJcbiAgICBjb25zdHJ1Y3RvciAoc2l6ZSkge1xyXG4gICAgICAgIHRoaXMuc2l6ZSA9IHNpemU7XHJcbiAgICAgICAgdGhpcy5oaXQgPSAwO1xyXG4gICAgICAgIHRoaXMuc3VuayA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuY29vcmRpbmF0ZXMgPSBbXTtcclxuICAgIH1cclxuXHJcbiAgICByZWdpc3RlckhpdCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5oaXQgKz0gMTtcclxuICAgIH1cclxuXHJcbiAgICBpc1N1bmsoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaGl0ID09PSB0aGlzLnNpemU7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkQ29vcmRpbmF0ZXMgKHBvc2l0aW9uKSB7XHJcbiAgICAgICAgdGhpcy5jb29yZGluYXRlcy5wdXNoKHBvc2l0aW9uKTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gR2FtZWJvYXJkIENsYXNzIC8vXHJcbmNsYXNzIEdhbWVib2FyZCB7XHJcbiAgICBjb25zdHJ1Y3RvciAoKSB7XHJcbiAgICAgICAgdGhpcy5ib2FyZCA9IFtdIFxyXG4gICAgICAgIHRoaXMuc2hpcHMgPSBbXVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjcmVhdGVCb2FyZChzaXplID0gOCApIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNpemU7IGkgKz0gMSkge1xyXG4gICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBzaXplOyBqICs9IDEpIHtcclxuICAgICAgICAgICAgY29uc3QgY29vcmRpbmF0ZSA9IGAke2l9LCR7an1gO1xyXG4gICAgICAgICAgICB0aGlzLmJvYXJkW2Nvb3JkaW5hdGVdID0geyBhdHRhY2tlZDogZmFsc2UsIG1pc3NlZDogZmFsc2UsIGhhc1NoaXA6IGZhbHNlLCBzaGlwOiBbXSB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYm9hcmQ7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlzVmFsaWQgKGNvb3JkaW5hdGVzKSB7XHJcbiAgICAgICAgbGV0IGFyciA9IGNvb3JkaW5hdGVzLnNwbGl0KCcsJyk7XHJcbiAgICAgICAgbGV0IGEgPSBOdW1iZXIoYXJyWzBdKTtcclxuICAgICAgICBsZXQgYiA9IE51bWJlcihhcnJbMV0pO1xyXG5cclxuXHJcbiAgICAgICAgcmV0dXJuIGEgPj0gMCAmJiBhIDw9IDcgJiYgYiA+PSAwICYmIGIgPD0gNztcclxuICAgICAgfVxyXG5cclxuICAgICAgZ2V0Qm9hcmQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYm9hcmQ7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGFkZFNoaXAgKHNoaXApIHtcclxuICAgICAgICB0aGlzLnNoaXBzLnB1c2goc2hpcCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHBsYWNlU2hpcCAoc2l6ZSwgY29vcmRpbmF0ZXMpIHtcclxuICAgICAgICBpZiAoc2l6ZSAhPT0gY29vcmRpbmF0ZXMubGVuZ3RoKSByZXR1cm4gJ1NpemUgYW5kIGNvb3JkaW5hdGVzIGxlbmd0aCBzaG91bGQgYmUgZXF1YWwnO1xyXG5cclxuICAgICAgICBjb25zdCBzaGlwID0gbmV3IFNoaXAoc2l6ZSk7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29vcmRpbmF0ZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzVmFsaWQoY29vcmRpbmF0ZXNbaV0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ib2FyZFtjb29yZGluYXRlc1tpXV0uc2hpcC5wdXNoKGNvb3JkaW5hdGVzKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmJvYXJkW2Nvb3JkaW5hdGVzW2ldXS5oYXNTaGlwID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCF0aGlzLmlzVmFsaWQoY29vcmRpbmF0ZXNbaV0pKSByZXR1cm4gJ05vIFZhbGlkJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIHNoaXAuYWRkQ29vcmRpbmF0ZXMoY29vcmRpbmF0ZXMpO1xyXG4gICAgICAgIHRoaXMuYWRkU2hpcChzaGlwKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYm9hcmQ7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJlY2VpdmVBdHRhY2sgKGNvb3JkaW5hdGVzKSB7XHJcbiAgICAgICAgbGV0IHN0ciA9IGAke2Nvb3JkaW5hdGVzfWA7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmJvYXJkW3N0cl0uaGFzU2hpcCkge1xyXG4gICAgICAgICAgICB0aGlzLmJvYXJkW3N0cl0uYXR0YWNrZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLnNoaXBzLmZvckVhY2goc2hpcCA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2hpcC5jb29yZGluYXRlc1swXS5pbmNsdWRlcyhzdHIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2hpcC5yZWdpc3RlckhpdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzaGlwLmlzU3VuaygpKSBzaGlwLnN1bmsgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ib2FyZFtzdHJdLm1pc3NlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgZ2V0U2hpcHMgKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNoaXBzO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBhbGxTdW5rICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zaGlwcy5ldmVyeShzaGlwID0+IHNoaXAuc3VuayA9PT0gdHJ1ZSk7XHJcbiAgICAgIH1cclxufVxyXG5cclxuXHJcbmxldCBib2FyZCA9IG5ldyBHYW1lYm9hcmQoKTtcclxuYm9hcmQuY3JlYXRlQm9hcmQoKTtcclxuYm9hcmQucGxhY2VTaGlwKDMsIFsnNywxJywnNywyJywnNywzJ10pO1xyXG5ib2FyZC5wbGFjZVNoaXAoMywgWycwLDEnLCAnMCwyJywnMCwzJ10pXHJcbmJvYXJkLnJlY2VpdmVBdHRhY2soJzAsMScpO1xyXG5ib2FyZC5yZWNlaXZlQXR0YWNrKCcwLDInKTtcclxuYm9hcmQucmVjZWl2ZUF0dGFjaygnMCwzJyk7XHJcbmJvYXJkLnJlY2VpdmVBdHRhY2soJzcsMScpO1xyXG5ib2FyZC5yZWNlaXZlQXR0YWNrKCc3LDInKTtcclxuYm9hcmQucmVjZWl2ZUF0dGFjaygnNywzJyk7XHJcblxyXG5cclxuLy8gUGxheWVyIENsYXNzIC8vXHJcbmNsYXNzIFBsYXllciB7XHJcbiAgICBjb25zdHJ1Y3RvciAoZ2FtZWJvYXJkKSB7XHJcbiAgICAgICAgdGhpcy5nYW1lYm9hcmQgPSBnYW1lYm9hcmQ7XHJcbiAgICB9XHJcblxyXG4gICAgaXNNb3ZlTGVnYWwgKG1vdmUpIHtcclxuICAgICAgICByZXR1cm4gIXRoaXMuZ2FtZWJvYXJkLmJvYXJkW21vdmVdLmF0dGFja2VkICYmICF0aGlzLmdhbWVib2FyZC5ib2FyZFttb3ZlXS5taXNzZWQ7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIG1ha2VSYW5kb21Nb3ZlICgpIHtcclxuICAgICAgICBsZXQgbnVtMSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDgpOyBcclxuICAgICAgICBsZXQgbnVtMiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDgpOyBcclxuICAgICAgICBsZXQgcmVzdWx0ID0gYCR7bnVtMX0sJHtudW0yfWA7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmlzTW92ZUxlZ2FsKHJlc3VsdCkpIHJldHVybiByZXN1bHQ7XHJcblxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB3aGlsZSAoIXRoaXMuaXNNb3ZlTGVnYWwocmVzdWx0KSkge1xyXG4gICAgICAgICAgICAgICAgbnVtMSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDgpOyBcclxuICAgICAgICAgICAgICAgIG51bTIgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA4KTsgXHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBgJHtudW0xfSwke251bTJ9YDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBwbGF5ID0gbmV3IFBsYXllcihib2FyZCk7XHJcblxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB7U2hpcCwgR2FtZWJvYXJkLCBQbGF5ZXJ9OyIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBET00gTWFuaXB1bGF0aW9uLCBSZW5kZXIgdGhlIEdhbWUgLy8gXHJcblxyXG4vLyBSZW5kZXIgV3JpdGUgWW91ciBOYW1lIC8vIFxyXG5cclxuXHJcbmZ1bmN0aW9uIHdyaXRlTmFtZSAoKSB7XHJcbiAgICBjb25zdCBtYWluID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21haW4nKTtcclxuICAgIGNvbnN0IGJveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMycpO1xyXG4gICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xyXG4gICAgY29uc3QgcGxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpXHJcblxyXG4gICAgYm94LmNsYXNzTGlzdC5hZGQoJ3BvcC11cC1ib3gnKTtcclxuICAgIHRpdGxlLmNsYXNzTGlzdC5hZGQoJ3RpdGxlLXBvcC11cCcpO1xyXG4gICAgaW5wdXQuY2xhc3NMaXN0LmFkZCgnaW5wdXQtcG9wLXVwJyk7XHJcbiAgICBwbGF5LmNsYXNzTGlzdC5hZGQoJ3BsYXktYnV0dG9uJyk7XHJcblxyXG5cclxuICAgIHRpdGxlLnRleHRDb250ZW50ID0gJ1dyaXRlIHlvdXIgTmFtZSc7XHJcbiAgICBwbGF5LmlubmVySFRNTCA9ICdCYXR0bGUnO1xyXG4gICAgaW5wdXQudHlwZSA9ICd0ZXh0JztcclxuICAgIHBsYXkudHlwZSA9ICdzdWJtaXQnO1xyXG5cclxuICAgIGJveC5hcHBlbmRDaGlsZCh0aXRsZSk7XHJcbiAgICBib3guYXBwZW5kQ2hpbGQoaW5wdXQpO1xyXG4gICAgYm94LmFwcGVuZENoaWxkKHBsYXkpO1xyXG5cclxuICAgIG1haW4uYXBwZW5kQ2hpbGQoYm94KTtcclxuXHJcbiAgICBwbGF5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgIGNsZWFuKCk7XHJcbiAgICAgICAgcmVuZGVySW5pdGFsQm9hcmRzKCk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVuZGVySW5pdGFsQm9hcmRzICgpIHtcclxuICAgIGNvbnN0IG1haW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFpbicpO1xyXG5cclxuICAgIGNvbnN0IG15U2VjdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgY29uc3QgbXlHYW1lU2VjdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgY29uc3QgbXlCb2FyZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgY29uc3QgbXlTaGlwcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgY29uc3QgbXlOYW1lQm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBjb25zdCBteU5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMycpO1xyXG5cclxuICAgIGNvbnN0IGVuZW15U2VjdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgY29uc3QgZW5lbXlHYW1lU2VjdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgY29uc3QgZW5lbXlCb2FyZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgY29uc3QgZW5lbXlTaGlwcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgY29uc3QgZW5lbXlOYW1lQm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBjb25zdCBlbmVteU5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMycpO1xyXG5cclxuICAgIGNvbnN0IGNhcnJpZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcclxuICAgIGNvbnN0IGJhdHRsZXNoaXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcclxuICAgIGNvbnN0IGNydWlzZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcclxuICAgIGNvbnN0IHN1Ym1hcmluZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xyXG4gICAgY29uc3QgZGVzdHJveWVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XHJcblxyXG4gICAgY2Fycmllci5zcmMgPSAnLi4vZGlzdC9JbWFnZXMvNS5wbmcnO1xyXG4gICAgYmF0dGxlc2hpcC5zcmMgPSAnLi4vZGlzdC9JbWFnZXMvNS5wbmcnO1xyXG4gICAgY3J1aXNlci5zcmMgPSAnLi4vZGlzdC9JbWFnZXMvNS5wbmcnO1xyXG4gICAgc3VibWFyaW5lLnNyYyA9ICcuLi9kaXN0L0ltYWdlcy81LnBuZyc7XHJcbiAgICBkZXN0cm95ZXIuc3JjID0gJy4uL2Rpc3QvSW1hZ2VzLzUucG5nJztcclxuXHJcbiAgICBjb25zdCBlbmVteUNhcnJpZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcclxuICAgIGNvbnN0IGVuZW15QmF0dGxlc2hpcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xyXG4gICAgY29uc3QgZW5lbXlDcnVpc2VyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XHJcbiAgICBjb25zdCBlbmVteVN1Ym1hcmluZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xyXG4gICAgY29uc3QgZW5lbXlEZXN0cm95ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcclxuXHJcbiAgICBlbmVteUNhcnJpZXIuc3JjID0gJy4uL2Rpc3QvSW1hZ2VzLzUucG5nJztcclxuICAgIGVuZW15QmF0dGxlc2hpcC5zcmMgPSAnLi4vZGlzdC9JbWFnZXMvNS5wbmcnO1xyXG4gICAgZW5lbXlDcnVpc2VyLnNyYyA9ICcuLi9kaXN0L0ltYWdlcy81LnBuZyc7XHJcbiAgICBlbmVteVN1Ym1hcmluZS5zcmMgPSAnLi4vZGlzdC9JbWFnZXMvNS5wbmcnO1xyXG4gICAgZW5lbXlEZXN0cm95ZXIuc3JjID0gJy4uL2Rpc3QvSW1hZ2VzLzUucG5nJztcclxuXHJcbiAgICBjb25zdCBzaGlwcyA9IFtjYXJyaWVyLCBiYXR0bGVzaGlwLCBjcnVpc2VyLCBzdWJtYXJpbmUsIGRlc3Ryb3llcl07XHJcblxyXG4gICAgY29uc3Qgcml2YWxTaGlwcyA9IFtlbmVteUNhcnJpZXIsIGVuZW15QmF0dGxlc2hpcCwgZW5lbXlDcnVpc2VyLCBlbmVteVN1Ym1hcmluZSwgZW5lbXlEZXN0cm95ZXJdO1xyXG5cclxuICAgIHNoaXBzLmZvckVhY2goc2hpcCA9PiB7XHJcbiAgICAgICAgc2hpcC5jbGFzc0xpc3QuYWRkKCdzaGlwJyk7XHJcbiAgICAgICAgbXlTaGlwcy5hcHBlbmRDaGlsZChzaGlwKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJpdmFsU2hpcHMuZm9yRWFjaChlbmVteSA9PiB7XHJcbiAgICAgICAgZW5lbXkuY2xhc3NMaXN0LmFkZCgnc2hpcCcpO1xyXG4gICAgICAgIGVuZW15U2hpcHMuYXBwZW5kQ2hpbGQoZW5lbXkpO1xyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIG15U2VjdGlvbi5jbGFzc0xpc3QuYWRkKCdteS1zZWN0aW9uJyk7XHJcbiAgICBteUdhbWVTZWN0aW9uLmNsYXNzTGlzdC5hZGQoJ215LWdhbWUtc2VjdGlvbicpO1xyXG4gICAgbXlCb2FyZC5jbGFzc0xpc3QuYWRkKCdteS1ib2FyZCcpO1xyXG4gICAgbXlTaGlwcy5jbGFzc0xpc3QuYWRkKCdteS1zaGlwcycpO1xyXG4gICAgbXlOYW1lQm94LmNsYXNzTGlzdC5hZGQoJ215LW5hbWUtYm94Jyk7XHJcbiAgICBteU5hbWUuY2xhc3NMaXN0LmFkZCgnbXktbmFtZScpO1xyXG5cclxuICAgIGVuZW15U2VjdGlvbi5jbGFzc0xpc3QuYWRkKCdlbmVteS1zZWN0aW9uJyk7XHJcbiAgICBlbmVteUdhbWVTZWN0aW9uLmNsYXNzTGlzdC5hZGQoJ2VuZW15LWdhbWUtc2VjdGlvbicpO1xyXG4gICAgZW5lbXlCb2FyZC5jbGFzc0xpc3QuYWRkKCdlbmVteS1ib2FyZCcpO1xyXG4gICAgZW5lbXlTaGlwcy5jbGFzc0xpc3QuYWRkKCdlbmVteS1zaGlwcycpO1xyXG4gICAgZW5lbXlOYW1lQm94LmNsYXNzTGlzdC5hZGQoJ2VuZW15LW5hbWUtYm94Jyk7XHJcbiAgICBlbmVteU5hbWUuY2xhc3NMaXN0LmFkZCgnZW5lbXktbmFtZScpO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgODsgaSArPSAxKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCA4OyBqICs9IDEpIHtcclxuICAgICAgICAgIGNvbnN0IGNvb3JkaW5hdGUgPSBgJHtpfSwke2p9YDtcclxuICAgICAgICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgY29uc3QgZGl2RW5lbXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgIGRpdi5jbGFzc0xpc3QuYWRkKCdteS1kaXYtYm94Jyk7XHJcbiAgICAgICAgICBkaXZFbmVteS5jbGFzc0xpc3QuYWRkKCdlbmVteS1kaXYtYm94Jyk7XHJcblxyXG4gICAgICAgICAgZGl2LmlkID0gYFAgJHtjb29yZGluYXRlfWA7XHJcbiAgICAgICAgICBkaXZFbmVteS5pZCA9IGBFICR7Y29vcmRpbmF0ZX1gO1xyXG4gIFxyXG4gICAgICAgICAgbXlCb2FyZC5hcHBlbmRDaGlsZChkaXYpO1xyXG4gICAgICAgICAgZW5lbXlCb2FyZC5hcHBlbmRDaGlsZChkaXZFbmVteSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG15TmFtZS50ZXh0Q29udGVudCA9ICdGcmFuY28nO1xyXG4gICAgZW5lbXlOYW1lLnRleHRDb250ZW50ID0gJ0VuZW15JztcclxuXHJcbiAgICBteU5hbWVCb3guYXBwZW5kQ2hpbGQobXlOYW1lKTtcclxuICAgIG15R2FtZVNlY3Rpb24uYXBwZW5kQ2hpbGQobXlCb2FyZCk7XHJcbiAgICBteUdhbWVTZWN0aW9uLmFwcGVuZENoaWxkKG15U2hpcHMpO1xyXG4gICAgbXlTZWN0aW9uLmFwcGVuZENoaWxkKG15TmFtZUJveCk7XHJcbiAgICBteVNlY3Rpb24uYXBwZW5kQ2hpbGQobXlHYW1lU2VjdGlvbik7XHJcblxyXG4gICAgZW5lbXlOYW1lQm94LmFwcGVuZENoaWxkKGVuZW15TmFtZSk7XHJcbiAgICBlbmVteUdhbWVTZWN0aW9uLmFwcGVuZENoaWxkKGVuZW15Qm9hcmQpO1xyXG4gICAgZW5lbXlHYW1lU2VjdGlvbi5hcHBlbmRDaGlsZChlbmVteVNoaXBzKTtcclxuICAgIGVuZW15U2VjdGlvbi5hcHBlbmRDaGlsZChlbmVteU5hbWVCb3gpO1xyXG4gICAgZW5lbXlTZWN0aW9uLmFwcGVuZENoaWxkKGVuZW15R2FtZVNlY3Rpb24pO1xyXG5cclxuICAgIG1haW4uYXBwZW5kQ2hpbGQobXlTZWN0aW9uKTtcclxuICAgIG1haW4uYXBwZW5kQ2hpbGQoZW5lbXlTZWN0aW9uKTtcclxuXHJcbiAgICBtYWluLmNsYXNzTGlzdC5hZGQoJ21haW4tZ2FtZScpO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXJNeUJvYXJkIChib2FyZCkge1xyXG4gICAgY29uc3QgYm94ZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubXktZGl2LWJveCcpO1xyXG5cclxuICAgIGZvciAoY29uc3QgYm94IG9mIGJveGVzKSB7XHJcbiAgICAgICAgbGV0IGNvb3JkaW5hdGVzID0gYm94LmlkO1xyXG4gICAgICAgIGxldCBzcGxpdCA9IGNvb3JkaW5hdGVzLnNwbGl0KCcgJyk7XHJcbiAgICAgICAgbGV0IG51bSA9IHNwbGl0WzFdOyBcclxuICAgICAgICBcclxuICAgICAgICBpZiAoYm9hcmQuYm9hcmRbbnVtXS5oYXNTaGlwKSB7XHJcbiAgICAgICAgICAgIGJveC5zdHlsZS5iYWNrZ3JvdW5kID0gJ2dyZWVuJztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGJvYXJkLmJvYXJkW251bV0uYXR0YWNrZWQpIHtcclxuICAgICAgICAgICAgYm94LnN0eWxlLmJhY2tncm91bmQgPSAncmVkJztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGJvYXJkLmJvYXJkW251bV0ubWlzc2VkKSB7XHJcbiAgICAgICAgICAgIGJveC5zdHlsZS5iYWNrZ3JvdW5kID0gJ3doaXRlJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbmRlckVuZW15Qm9hcmQgKGJvYXJkKSB7XHJcbiAgICBjb25zdCBib3hlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lbmVteS1kaXYtYm94Jyk7XHJcblxyXG4gICAgZm9yIChjb25zdCBib3ggb2YgYm94ZXMpIHtcclxuICAgICAgICBsZXQgY29vcmRpbmF0ZXMgPSBib3guaWQ7XHJcbiAgICAgICAgbGV0IHNwbGl0ID0gY29vcmRpbmF0ZXMuc3BsaXQoJyAnKTtcclxuICAgICAgICBsZXQgbnVtID0gc3BsaXRbMV07IFxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChib2FyZC5ib2FyZFtudW1dLmhhc1NoaXApIHtcclxuICAgICAgICAgICAgYm94LnN0eWxlLmJhY2tncm91bmQgPSAnb3JhbmdlJztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGJvYXJkLmJvYXJkW251bV0uYXR0YWNrZWQpIHtcclxuICAgICAgICAgICAgYm94LnN0eWxlLmJhY2tncm91bmQgPSAncmVkJztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGJvYXJkLmJvYXJkW251bV0ubWlzc2VkKSB7XHJcbiAgICAgICAgICAgIGJveC5zdHlsZS5iYWNrZ3JvdW5kID0gJ3doaXRlJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRyYWdBbmREcm9wICgpIHtcclxuICAgIGxldCBzaGlwcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zaGlwJyk7XHJcbiAgICBsZXQgYm94ZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubXktZGl2LWJveCcpO1xyXG5cclxuICAgIHNoaXBzLmZvckVhY2goc2hpcCA9PiB7XHJcbiAgICAgICAgc2hpcC5kcmFnZ2FibGUgPSB0cnVlO1xyXG4gICAgXHJcbiAgICAgICAgc2hpcC5hZGRFdmVudExpc3RlbmVyKCdkcmFnc3RhcnQnLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgc2VsZWN0ZWQgPSBlLnRhcmdldDtcclxuICAgICAgICAgICAgYm94ZXMuZm9yRWFjaChib3ggPT4ge1xyXG4gICAgICAgICAgICAgICAgYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGJveC5zdHlsZS5iYWNrZ3JvdW5kID0gJ3JlZCc7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGJveC5hZGRFdmVudExpc3RlbmVyKCdkcmFnZW5kJywgKGUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBsZXQgYm94SWQgPSBlLnRhcmdldC5pZDtcclxuICAgICAgICAgICAgICAgICAgICAvLyBsZXQgbXlCb3ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChib3hJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZS50YXJnZXQpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIG15Qm94LmFwcGVuZENoaWxkKHNlbGVjdGVkKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBzZWxlY3RlZCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGJveC5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgKGUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBsZXQgYm94SWQgPSBlLnRhcmdldC5pZDtcclxuICAgICAgICAgICAgICAgICAgICAvLyBsZXQgbXlCb3ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChib3hJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZS50YXJnZXQpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIG15Qm94LmFwcGVuZENoaWxkKHNlbGVjdGVkKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBzZWxlY3RlZCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVuZGVyV2luICgpIHtcclxuICAgIGNvbnN0IG1haW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFpbicpO1xyXG4gICAgY29uc3QgYm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gzJyk7IFxyXG4gICAgY29uc3QgcGxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpXHJcblxyXG4gICAgYm94LmNsYXNzTGlzdC5hZGQoJ3BvcC11cC1ib3gnKTtcclxuICAgIHRpdGxlLmNsYXNzTGlzdC5hZGQoJ3RpdGxlLXBvcC11cCcpO1xyXG4gICAgcGxheS5jbGFzc0xpc3QuYWRkKCdwbGF5LWJ1dHRvbicpO1xyXG5cclxuICAgIHRpdGxlLnRleHRDb250ZW50ID0gJ1lvdSBXaW4nO1xyXG4gICAgcGxheS5pbm5lckhUTUwgPSAnUGxheSBBZ2Fpbic7XHJcbiAgICBwbGF5LnR5cGUgPSAnc3VibWl0JztcclxuXHJcbiAgICBib3guYXBwZW5kQ2hpbGQodGl0bGUpO1xyXG4gICAgYm94LmFwcGVuZENoaWxkKHBsYXkpO1xyXG5cclxuICAgIG1haW4uYXBwZW5kQ2hpbGQoYm94KTtcclxuXHJcbiAgICBwbGF5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgIGNsZWFuKCk7XHJcbiAgICAgICAgd3JpdGVOYW1lKCk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVuZGVyTG9zZSAoKSB7XHJcbiAgICBjb25zdCBtYWluID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21haW4nKTtcclxuICAgIGNvbnN0IGJveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMycpOyBcclxuICAgIGNvbnN0IHBsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKVxyXG5cclxuICAgIGJveC5jbGFzc0xpc3QuYWRkKCdwb3AtdXAtYm94Jyk7XHJcbiAgICB0aXRsZS5jbGFzc0xpc3QuYWRkKCd0aXRsZS1wb3AtdXAnKTtcclxuICAgIHBsYXkuY2xhc3NMaXN0LmFkZCgncGxheS1idXR0b24nKTtcclxuXHJcbiAgICB0aXRsZS50ZXh0Q29udGVudCA9ICdZb3UgTG9zZSc7XHJcbiAgICBwbGF5LmlubmVySFRNTCA9ICdQbGF5IEFnYWluJztcclxuICAgIHBsYXkudHlwZSA9ICdzdWJtaXQnO1xyXG5cclxuICAgIGJveC5hcHBlbmRDaGlsZCh0aXRsZSk7XHJcbiAgICBib3guYXBwZW5kQ2hpbGQocGxheSk7XHJcblxyXG4gICAgbWFpbi5hcHBlbmRDaGlsZChib3gpO1xyXG5cclxuICAgIHBsYXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgY2xlYW4oKTtcclxuICAgICAgICB3cml0ZU5hbWUoKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjbGVhbiAoKSB7XHJcbiAgICBjb25zdCBtYWluID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21haW4nKTtcclxuICAgIG1haW4uaW5uZXJIVE1MID0gJyc7XHJcbn1cclxuXHJcblxyXG5leHBvcnQge3dyaXRlTmFtZSwgY2xlYW4sIHJlbmRlckluaXRhbEJvYXJkcywgcmVuZGVyTXlCb2FyZCwgcmVuZGVyRW5lbXlCb2FyZCwgcmVuZGVyV2luLCByZW5kZXJMb3NlfTtcclxuIiwiLy8gTGludGVyLCBQcmV0dGllciwgSmVzdC5jb25maWcgLy8gXHJcblxyXG5pbXBvcnQgeyBTaGlwLCBHYW1lYm9hcmQsIFBsYXllciB9IGZyb20gXCIuL2ZhY3Rvcmllc1wiO1xyXG5pbXBvcnQgeyB3cml0ZU5hbWUsIGNsZWFuLCByZW5kZXJJbml0YWxCb2FyZHMsIHJlbmRlcldpbiwgcmVuZGVyTG9zZSB9IGZyb20gXCIuL3JlbmRlclwiO1xyXG5pbXBvcnQgeyBnYW1lIH0gZnJvbSBcIi4vZ2FtZVwiO1xyXG5cclxucmVuZGVySW5pdGFsQm9hcmRzKCk7XHJcbmdhbWUoKTsiLCJpbXBvcnQgeyBTaGlwLCBHYW1lYm9hcmQsIFBsYXllciB9IGZyb20gXCIuL2ZhY3Rvcmllc1wiO1xyXG5pbXBvcnQgeyB3cml0ZU5hbWUsIHJlbmRlckluaXRhbEJvYXJkcywgcmVuZGVyTXlCb2FyZCwgcmVuZGVyRW5lbXlCb2FyZCwgIGNsZWFuLCByZW5kZXJXaW4sIHJlbmRlckxvc2UgfSBmcm9tIFwiLi9yZW5kZXJcIjtcclxuXHJcblxyXG5mdW5jdGlvbiBnYW1lICgpIHtcclxuICAgIGxldCBteUJvYXJkID0gbmV3IEdhbWVib2FyZCgpO1xyXG4gICAgbGV0IGVuZW15Qm9hcmQgPSBuZXcgR2FtZWJvYXJkKCk7XHJcbiAgICBcclxuICAgIG15Qm9hcmQuY3JlYXRlQm9hcmQoKTtcclxuICAgIG15Qm9hcmQucGxhY2VTaGlwKDUsIFsnMSwxJywnMSwyJywnMSwzJywgJzEsNCcsICcxLDUnXSk7XHJcbiAgICBteUJvYXJkLnBsYWNlU2hpcCg0LCBbJzQsNCcsJzQsNScsJzQsNicsICc0LDcnXSk7XHJcbiAgICBteUJvYXJkLnBsYWNlU2hpcCgzLCBbJzcsMScsJzcsMicsJzcsMyddKTtcclxuICAgIG15Qm9hcmQucGxhY2VTaGlwKDMsIFsnMCwxJywnMCwyJywnMCwzJ10pO1xyXG4gICAgbXlCb2FyZC5wbGFjZVNoaXAoMiwgWyc1LDEnLCc1LDInXSk7XHJcbiAgICBcclxuICAgIGVuZW15Qm9hcmQuY3JlYXRlQm9hcmQoKTtcclxuICAgIGVuZW15Qm9hcmQucGxhY2VTaGlwKDUsIFsnMSwxJywnMSwyJywnMSwzJywgJzEsNCcsICcxLDUnXSk7XHJcbiAgICBlbmVteUJvYXJkLnBsYWNlU2hpcCg0LCBbJzQsNCcsJzQsNScsJzQsNicsICc0LDcnXSk7XHJcbiAgICBlbmVteUJvYXJkLnBsYWNlU2hpcCgzLCBbJzcsMScsJzcsMicsJzcsMyddKTtcclxuICAgIGVuZW15Qm9hcmQucGxhY2VTaGlwKDMsIFsnMCwxJywnMCwyJywnMCwzJ10pO1xyXG4gICAgZW5lbXlCb2FyZC5wbGFjZVNoaXAoMiwgWyc1LDEnLCc1LDInXSk7XHJcbiAgICBcclxuICAgIGxldCBwbGF5ZXIgPSBuZXcgUGxheWVyKG15Qm9hcmQpO1xyXG4gICAgbGV0IGVuZW15ID0gbmV3IFBsYXllcihlbmVteUJvYXJkKTtcclxuXHJcbiAgICBteUJvYXJkLnJlY2VpdmVBdHRhY2soJzAsMScpO1xyXG4gICAgbXlCb2FyZC5yZWNlaXZlQXR0YWNrKCcwLDAnKTtcclxuICAgIGVuZW15Qm9hcmQucmVjZWl2ZUF0dGFjaygnNCw0Jyk7XHJcbiAgICByZW5kZXJNeUJvYXJkKHBsYXllci5nYW1lYm9hcmQpO1xyXG4gICAgcmVuZGVyRW5lbXlCb2FyZChlbmVteS5nYW1lYm9hcmQpO1xyXG5cclxuICAgIGNvbnN0IG15Qm94ZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubXktZGl2LWJveCcpO1xyXG4gICAgbGV0IHBCb3hlcyA9IFsuLi5teUJveGVzXTtcclxuXHJcbiAgICBwQm94ZXMuZm9yRWFjaChwQm94ID0+IHtcclxuICAgICAgICBwQm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgICAgICAgbGV0IHBDb29yZGluYXRlcyA9IGUudGFyZ2V0LmlkO1xyXG4gICAgICAgICAgICBsZXQgcFNwbGl0ID0gcENvb3JkaW5hdGVzLnNwbGl0KCcgJyk7XHJcbiAgICAgICAgICAgIGxldCBwTnVtID0gcFNwbGl0WzFdOyBcclxuXHJcbiAgICAgICAgICAgIG15Qm9hcmQucmVjZWl2ZUF0dGFjayhwTnVtKTtcclxuICAgICAgICAgICAgcmVuZGVyTXlCb2FyZChwbGF5ZXIuZ2FtZWJvYXJkKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIEZpeCBidWcgY2xpY2sgZW5lbXkgYm9hcmQgc3ByZWFkIHRoZSBjbGljayB0byBteSBib2FyZCAvLyBcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IGVuZW15Qm94ZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZW5lbXktZGl2LWJveCcpO1xyXG4gICAgbGV0IGVCb3hlcyA9IFsuLi5lbmVteUJveGVzXTtcclxuXHJcbiAgICBlQm94ZXMuZm9yRWFjaChlQm94ID0+IHtcclxuICAgICAgICBlQm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgICAgICAgbGV0IGVDb29yZGluYXRlcyA9IGUudGFyZ2V0LmlkO1xyXG4gICAgICAgICAgICBsZXQgZVNwbGl0ID0gZUNvb3JkaW5hdGVzLnNwbGl0KCcgJyk7XHJcbiAgICAgICAgICAgIGxldCBlTnVtID0gZVNwbGl0WzFdOyBcclxuXHJcbiAgICAgICAgICAgIGVuZW15Qm9hcmQucmVjZWl2ZUF0dGFjayhlTnVtKTtcclxuICAgICAgICAgICAgcmVuZGVyTXlCb2FyZChlbmVteS5nYW1lYm9hcmQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcblxyXG5cclxuXHJcblxyXG4vLyAxLiBDcmVhdGUgdGhlIG1haW4gZ2FtZSBsb29wIGFuZCBhIG1vZHVsZSBmb3IgRE9NIGludGVyYWN0aW9uLlxyXG4vLyAgICAgIGEuIEF0IHRoaXMgcG9pbnQgaXQgaXMgYXBwcm9wcmlhdGUgdG8gYmVnaW4gY3JhZnRpbmcgeW91ciBVc2VyIEludGVyZmFjZS5cclxuLy8gICAgICBiLiBUaGUgZ2FtZSBsb29wIHNob3VsZCBzZXQgdXAgYSBuZXcgZ2FtZSBieSBjcmVhdGluZyBQbGF5ZXJzIGFuZCBHYW1lYm9hcmRzLiBGb3Igbm93IGp1c3QgcG9wdWxhdGUgZWFjaCBHYW1lYm9hcmQgd2l0aCBwcmVkZXRlcm1pbmVkIGNvb3JkaW5hdGVzLiBZb3UgY2FuIGltcGxlbWVudCBhIHN5c3RlbSBmb3IgYWxsb3dpbmcgcGxheWVycyB0byBwbGFjZSB0aGVpciBzaGlwcyBsYXRlci5cclxuLy8gICAgICBjLiBXZeKAmWxsIGxlYXZlIHRoZSBIVE1MIGltcGxlbWVudGF0aW9uIHVwIHRvIHlvdSBmb3Igbm93LCBidXQgeW91IHNob3VsZCBkaXNwbGF5IGJvdGggdGhlIHBsYXllcuKAmXMgYm9hcmRzIGFuZCByZW5kZXIgdGhlbSB1c2luZyBpbmZvcm1hdGlvbiBmcm9tIHRoZSBHYW1lYm9hcmQgY2xhc3MvZmFjdG9yeS5cclxuLy8gICAgICAgICAgYS4gWW91IG5lZWQgbWV0aG9kcyB0byByZW5kZXIgdGhlIGdhbWVib2FyZHMgYW5kIHRvIHRha2UgdXNlciBpbnB1dCBmb3IgYXR0YWNraW5nLiBGb3IgYXR0YWNrcywgbGV0IHRoZSB1c2VyIGNsaWNrIG9uIGEgY29vcmRpbmF0ZSBpbiB0aGUgZW5lbXkgR2FtZWJvYXJkLlxyXG4vLyAgICAgIGQuIFRoZSBnYW1lIGxvb3Agc2hvdWxkIHN0ZXAgdGhyb3VnaCB0aGUgZ2FtZSB0dXJuIGJ5IHR1cm4gdXNpbmcgb25seSBtZXRob2RzIGZyb20gb3RoZXIgb2JqZWN0cy4gSWYgYXQgYW55IHBvaW50IHlvdSBhcmUgdGVtcHRlZCB0byB3cml0ZSBhIG5ldyBmdW5jdGlvbiBpbnNpZGUgdGhlIGdhbWUgbG9vcCwgc3RlcCBiYWNrIGFuZCBmaWd1cmUgb3V0IHdoaWNoIGNsYXNzIG9yIG1vZHVsZSB0aGF0IGZ1bmN0aW9uIHNob3VsZCBiZWxvbmcgdG8uXHJcbi8vICAgICAgZS4gQ3JlYXRlIGNvbmRpdGlvbnMgc28gdGhhdCB0aGUgZ2FtZSBlbmRzIG9uY2Ugb25lIHBsYXllcuKAmXMgc2hpcHMgaGF2ZSBhbGwgYmVlbiBzdW5rLiBUaGlzIGZ1bmN0aW9uIGlzIGFwcHJvcHJpYXRlIGZvciB0aGUgR2FtZSBtb2R1bGUuXHJcblxyXG5cclxuLy8gMi4gRmluaXNoIGl0IHVwXHJcbi8vICAgICAgYS4gVGhlcmUgYXJlIHNldmVyYWwgb3B0aW9ucyBhdmFpbGFibGUgZm9yIGxldHRpbmcgdXNlcnMgcGxhY2UgdGhlaXIgc2hpcHMuIFlvdSBjYW4gbGV0IHRoZW0gdHlwZSBjb29yZGluYXRlcyBmb3IgZWFjaCBzaGlwLCBvciBpbnZlc3RpZ2F0ZSBpbXBsZW1lbnRpbmcgZHJhZyBhbmQgZHJvcC5cclxuLy8gICAgICBiLiBZb3UgY2FuIHBvbGlzaCB0aGUgaW50ZWxsaWdlbmNlIG9mIHRoZSBjb21wdXRlciBwbGF5ZXIgYnkgaGF2aW5nIGl0IHRyeSBhZGphY2VudCBzbG90cyBhZnRlciBnZXR0aW5nIGEg4oCYaGl04oCZLlxyXG4vLyAgICAgIGMuIE9wdGlvbmFsbHksIGNyZWF0ZSBhIDIgcGxheWVyIG9wdGlvbiB0aGF0IGxldHMgdXNlcnMgdGFrZSB0dXJucyBieSBwYXNzaW5nIHRoZSBkZXZpY2UgYmFjayBhbmQgZm9ydGguIElmIHlvdeKAmXJlIGdvaW5nIHRvIGdvIHRoaXMgcm91dGUsIG1ha2Ugc3VyZSB0aGUgZ2FtZSBpcyBwbGF5YWJsZSBvbiBhIG1vYmlsZSBzY3JlZW4gYW5kIGltcGxlbWVudCBhIOKAmHBhc3MgZGV2aWNl4oCZIHNjcmVlbiBzbyB0aGF0IHBsYXllcnMgZG9u4oCZdCBzZWUgZWFjaCBvdGhlcnMgYm9hcmRzIVxyXG4gXHJcblxyXG4vLyAgVGhlIDUgc2hpcHMgYXJlOiBDYXJyaWVyIChvY2N1cGllcyA1IHNwYWNlcyksIEJhdHRsZXNoaXAgKDQpLCBDcnVpc2VyICgzKSwgU3VibWFyaW5lICgzKSwgYW5kIERlc3Ryb3llciAoMikuIC8vXHJcblxyXG5cclxuXHJcbmV4cG9ydCB7Z2FtZX07Il0sIm5hbWVzIjpbIlNoaXAiLCJjb25zdHJ1Y3RvciIsInNpemUiLCJ0aGlzIiwiaGl0Iiwic3VuayIsImNvb3JkaW5hdGVzIiwicmVnaXN0ZXJIaXQiLCJpc1N1bmsiLCJhZGRDb29yZGluYXRlcyIsInBvc2l0aW9uIiwicHVzaCIsIkdhbWVib2FyZCIsImJvYXJkIiwic2hpcHMiLCJjcmVhdGVCb2FyZCIsImkiLCJqIiwiY29vcmRpbmF0ZSIsImF0dGFja2VkIiwibWlzc2VkIiwiaGFzU2hpcCIsInNoaXAiLCJpc1ZhbGlkIiwiYXJyIiwic3BsaXQiLCJhIiwiTnVtYmVyIiwiYiIsImdldEJvYXJkIiwiYWRkU2hpcCIsInBsYWNlU2hpcCIsImxlbmd0aCIsInJlY2VpdmVBdHRhY2siLCJzdHIiLCJmb3JFYWNoIiwiaW5jbHVkZXMiLCJnZXRTaGlwcyIsImFsbFN1bmsiLCJldmVyeSIsIlBsYXllciIsImdhbWVib2FyZCIsImlzTW92ZUxlZ2FsIiwibW92ZSIsIm1ha2VSYW5kb21Nb3ZlIiwibnVtMSIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsIm51bTIiLCJyZXN1bHQiLCJtb2R1bGUiLCJleHBvcnRzIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsInJlbmRlck15Qm9hcmQiLCJib3hlcyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImJveCIsIm51bSIsImlkIiwic3R5bGUiLCJiYWNrZ3JvdW5kIiwibWFpbiIsImdldEVsZW1lbnRCeUlkIiwibXlTZWN0aW9uIiwiY3JlYXRlRWxlbWVudCIsIm15R2FtZVNlY3Rpb24iLCJteUJvYXJkIiwibXlTaGlwcyIsIm15TmFtZUJveCIsIm15TmFtZSIsImVuZW15U2VjdGlvbiIsImVuZW15R2FtZVNlY3Rpb24iLCJlbmVteUJvYXJkIiwiZW5lbXlTaGlwcyIsImVuZW15TmFtZUJveCIsImVuZW15TmFtZSIsImNhcnJpZXIiLCJiYXR0bGVzaGlwIiwiY3J1aXNlciIsInN1Ym1hcmluZSIsImRlc3Ryb3llciIsInNyYyIsImVuZW15Q2FycmllciIsImVuZW15QmF0dGxlc2hpcCIsImVuZW15Q3J1aXNlciIsImVuZW15U3VibWFyaW5lIiwiZW5lbXlEZXN0cm95ZXIiLCJyaXZhbFNoaXBzIiwiY2xhc3NMaXN0IiwiYWRkIiwiYXBwZW5kQ2hpbGQiLCJlbmVteSIsImRpdiIsImRpdkVuZW15IiwidGV4dENvbnRlbnQiLCJyZW5kZXJJbml0YWxCb2FyZHMiLCJwbGF5ZXIiLCJyZW5kZXJFbmVteUJvYXJkIiwicEJveCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwicE51bSIsInRhcmdldCIsImVCb3giLCJlTnVtIiwiZ2FtZSJdLCJzb3VyY2VSb290IjoiIn0=