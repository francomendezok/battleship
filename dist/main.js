(()=>{var e={776:e=>{class t{constructor(e){this.size=e,this.hit=0,this.sunk=!1,this.coordinates=[]}registerHit(){return this.hit+=1}isSunk(){return this.hit===this.size}addCoordinates(e){this.coordinates.push(e)}}e.exports={Ship:t,Gameboard:class{constructor(){this.board=[],this.ships=[]}createBoard(e=8){for(let t=0;t<e;t+=1)for(let a=0;a<e;a+=1){const e=`${t},${a}`;this.board[e]={coordinates:e,attacked:!1,missed:!1,hasShip:!1,ship:[]}}return this.board}isValid(e){let t=e.split(","),a=Number(t[0]),n=Number(t[1]);return a>=0&&a<=7&&n>=0&&n<=7}getBoard(){return this.board}addShip(e){this.ships.push(e)}placeShip(e,a){if(e!==a.length)return!1;const n=new t(e);for(let e=0;e<a.length;e++){if(this.hasShip(a[e]))return!1;this.board[a[e]].ship.push(a),this.board[a[e]].hasShip=!0}return n.addCoordinates(a),this.addShip(n),!0}isMoveLegal(e){return!this.board[e].attacked&&!this.board[e].missed}hasShip(e){return this.board[e].hasShip}placeEnemyShips(e){let t=this.createCoordinates(),a=this.createCoordinates(),n=this.createCoordinates(),d=this.createCoordinates(),s=this.createCoordinates(),o=[e.getAdjacents(e,5,t),e.getAdjacents(e,4,a),e.getAdjacents(e,3,n),e.getAdjacents(e,3,d),e.getAdjacents(e,2,s)],r=[5,4,3,3,2],i=[];for(let e=0;e<o.length;e++){let t=o[e].filter((t=>t.length===r[e]));i.push(t)}i.forEach((e=>{this.placeShip(e[0].length,e[0])}))}createCoordinates(){let e=Math.floor(8*Math.random()),t=Math.floor(8*Math.random()),a=`${e},${t}`;if(this.hasShip(a)){for(;this.hasShip(a);)e=Math.floor(8*Math.random()),t=Math.floor(8*Math.random()),a=`${e},${t}`;return a}return a}getAdjacents(e,t,a){let n=e.boardArray(),d=[[],[]],s=1,o=8,r=0;for(let e=0;e<n.length;e++)if(n[e].coordinates===a){r=e;break}for(let e=0;e<t;e++){if(n[r+s]){let e=a.split(","),t=n[r+s].coordinates,o=t.split(",");t&&o[0]===e[0]&&(d[0].push(n[r+s].coordinates),s++)}if(n[r+o]){let e=a.split(","),t=n[r+o].coordinates;t.split(","),t&&t.includes(e[1])&&(d[1].push(n[r+o].coordinates),o+=8)}}return d}hasAllShipsPlaced(){return 5===this.ships.length}receiveAttack(e){let t=`${e}`;if(!this.board[t].attacked&&!this.board[t].missed)return this.board[t].hasShip?(this.board[t].attacked=!0,this.ships.forEach((e=>{e.coordinates[0].includes(t)&&(e.registerHit(),e.isSunk()&&(e.sunk=!0))}))):this.board[t].missed=!0,!0}getShips(){return this.ships}allSunk(){return this.ships.every((e=>!0===e.sunk))}boardArray(){const e=this.board,t=[];for(let a in e)t.push(e[a]);return t}},Player:class{constructor(e){this.gameboard=e}isMoveLegal(e){return!this.gameboard.board[e].attacked&&!this.gameboard.board[e].missed}makeRandomMove(){let e=Math.floor(8*Math.random()),t=Math.floor(8*Math.random()),a=`${e},${t}`;if(this.isMoveLegal(a))return a;for(;!this.isMoveLegal(a);)e=Math.floor(8*Math.random()),t=Math.floor(8*Math.random()),a=`${e},${t}`;return a}}}}},t={};function a(n){var d=t[n];if(void 0!==d)return d.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,a),s.exports}(()=>{"use strict";var e=a(776);function t(t,a){const s=document.getElementById("main"),o=document.createElement("div"),r=document.createElement("div"),i=document.createElement("div"),l=document.createElement("div"),c=document.createElement("h3"),h=document.createElement("div"),u=document.createElement("div"),m=document.createElement("div"),p=document.createElement("div"),y=document.createElement("h3");o.classList.add("my-section"),r.classList.add("my-game-section"),i.classList.add("my-board"),l.classList.add("my-name-box"),c.classList.add("my-name"),h.classList.add("enemy-section"),u.classList.add("enemy-game-section"),m.classList.add("enemy-board"),p.classList.add("enemy-name-box"),y.classList.add("enemy-name");for(let e=0;e<8;e+=1)for(let t=0;t<8;t+=1){const a=`${e},${t}`,n=document.createElement("div"),d=document.createElement("div");n.classList.add("my-div-box"),d.classList.add("enemy-div-box"),n.id=`${a}`,d.id=`E ${a}`,i.appendChild(n),m.appendChild(d)}c.innerHTML=t,y.innerHTML="Enemy",l.appendChild(c),r.appendChild(i),o.appendChild(l),o.appendChild(r),p.appendChild(y),u.appendChild(m),h.appendChild(p),h.appendChild(u),s.appendChild(o),s.appendChild(h),s.classList.add("main-game"),n(a),function(t){let a=new e.Gameboard,s=t,o=new e.Player(s);a.createBoard();let r=new e.Player(a);n(t),d(a),[...document.querySelectorAll(".enemy-div-box")].forEach((e=>{e.addEventListener("click",(e=>{let t=e.target.id.split(" ")[1],i=r.makeRandomMove(),l=s.receiveAttack(i);a.receiveAttack(t)&&(d(r.gameboard),setTimeout((function(){for(;!l;)i=r.makeRandomMove(),l=s.receiveAttack(i);n(o.gameboard)}),1e3))}))}))}(a)}function n(e){let t=e.boardArray();for(let e=0;e<t.length;e++){if(t[e].hasShip&&(document.getElementById(t[e].coordinates).style.background="green"),t[e].attacked){let a=document.getElementById(t[e].coordinates);a.innerHTML="âŒ",a.style.background="#F5C2C1"}if(t[e].missed){let a=document.getElementById(t[e].coordinates);a.innerHTML="ðŸ’¦",a.style.background="lightblue"}t[e].hasShip||t[e].attacked||t[e].missed||(document.getElementById(t[e].coordinates).style.background="lightgoldenrodyellow")}}function d(e){const t=document.querySelectorAll(".enemy-div-box");for(const a of t){let t=a.id.split(" ")[1];e.board[t].attacked&&(a.innerHTML="âŒ",a.style.background="#F5C2C1"),e.board[t].missed&&(a.innerHTML="ðŸ’¦",a.style.background="lightblue"),e.board[t].hasShip&&(a.innerHTML="ðŸš¢",a.style.background="lightblue")}}function s(){document.getElementById("main").innerHTML=""}!function(){const a=document.getElementById("main"),d=document.createElement("div"),o=document.createElement("h3"),r=document.createElement("input"),i=document.createElement("button");d.classList.add("pop-up-box"),o.classList.add("title-pop-up"),r.classList.add("input-pop-up"),i.classList.add("play-button"),o.textContent="Write your Name",i.innerHTML="Battle",r.type="text",i.type="submit",d.appendChild(o),d.appendChild(r),d.appendChild(i),a.appendChild(d),i.addEventListener("click",(()=>{r.value?(s(),function(a){const d=document.getElementById("main"),o=document.createElement("div"),r=document.createElement("div"),i=document.createElement("div"),l=document.createElement("div"),c=document.createElement("h3"),h=document.createElement("button"),u=["Carrier","Battleship","Cruiser","Submarine","Destroyer"];let m=[4,3,2,2,1];d.classList.add("main-game"),o.classList.add("my-section"),r.classList.add("my-game-section"),i.classList.add("my-board"),l.classList.add("my-name-box"),c.classList.add("my-name"),h.classList.add("axis");let p=0;c.innerHTML=`${a},  place your  ${u[p]}`,c.dataset.size=p,h.innerHTML="Axis X",h.addEventListener("click",(()=>{"Axis X"===h.innerHTML?h.innerHTML="Axis Y":h.innerHTML="Axis X"}));let y=new e.Gameboard;y.createBoard(),new e.Player(y);for(let e=0;e<8;e+=1)for(let a=0;a<8;a+=1){const d=`${e},${a}`,o=document.createElement("div");o.classList.add("my-div-box"),o.id=`${d}`,7===a&&(o.dataset.xNotAllowed=!0),7===e&&(o.dataset.yNotAllowed=!0),o.addEventListener("mouseover",(()=>{let e=document.querySelector(".my-name").textContent.split(" "),t=e[e.length-1],a=u.indexOf(t),n=m[a],d=document.querySelector(".axis").textContent.split(" ")[1],s=y.getAdjacents(y,n,o.id);if("X"===d){let e=s[0].some((e=>y.hasShip(e)));y.hasShip(o.id)||e||s[0].length<n?(y.hasShip(o.id)||(o.style.background="red"),o.style.cursor="not-allowed"):s[0].forEach((e=>{y.hasShip(e)?(o.style.cursor="not-allowed",document.getElementById(e).style.background="green"):(document.getElementById(e).style.background="black",o.style.background="black",o.style.cursor="crosshair")}))}if("Y"===d){let e=s[1].some((e=>y.hasShip(e)));y.hasShip(o.id)||e||s[1].length<n?(y.hasShip(o.id)||(o.style.background="red"),o.style.cursor="not-allowed"):s[1].forEach((e=>{y.hasShip(e)?(o.style.cursor="not-allowed",document.getElementById(e).style.background="green"):(document.getElementById(e).style.background="black",o.style.background="black",o.style.cursor="crosshair")}))}})),o.addEventListener("mouseleave",(()=>{let e=document.querySelector(".my-name").textContent.split(" "),t=e[e.length-1],a=u.indexOf(t),n=m[a],d=document.querySelector(".axis").textContent.split(" ")[1],s=y.getAdjacents(y,n,o.id);"X"===d&&(o.dataset.xNotAllowed&&(o.style.background="lightgoldenrodyellow",o.style.cursor="crosshair"),y.hasShip(o.id)?(o.style.background="green",o.style.cursor="not-allowed"):s[0].forEach((e=>{y.hasShip(e)?(o.style.cursor="not-allowed",o.style.background="lightgoldenrodyellow",document.getElementById(e).style.background="green"):(document.getElementById(e).style.background="lightgoldenrodyellow",o.style.background="lightgoldenrodyellow")}))),"Y"===d&&(o.dataset.yNotAllowed&&(o.style.background="lightgoldenrodyellow",o.style.cursor="crosshair"),y.hasShip(o.id)?(o.style.background="green",o.style.cursor="not-allowed"):s[1].forEach((e=>{y.hasShip(e)?(o.style.cursor="not-allowed",o.style.background="lightgoldenrodyellow",document.getElementById(e).style.background="green"):(document.getElementById(e).style.background="lightgoldenrodyellow",o.style.background="lightgoldenrodyellow")})))})),o.addEventListener("click",(()=>{let e=document.querySelector(".my-name").textContent.split(" "),a=e[e.length-1],d=e[0].split(",")[0],r=u.indexOf(a),i=m[r],l=document.querySelector(".axis").textContent.split(" ")[1],h=y.getAdjacents(y,i,o.id);"X"===l&&(i+=1,h[0].unshift(o.id),y.placeShip(i,h[0])&&(n(y),p+=1,p===u.length&&(s(),t(d,y)),c.innerHTML=`${d},  place your ${u[p]}`)),"Y"===l&&(i+=1,h[1].unshift(o.id),y.placeShip(i,h[1])&&(n(y),p+=1,p===u.length&&(s(),t(d,y)),c.innerHTML=`${d},  place your ${u[p]}`))})),i.appendChild(o)}l.appendChild(c),l.appendChild(h),r.appendChild(i),o.appendChild(l),o.appendChild(r),d.appendChild(o),n(y)}(r.value)):alert("Please Write Your Name")}))}()})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUEyQmpJLEVBQU1rQyxPQUk5QyxNQUFiMEYsSUFDQTFJLEdBQVEsRUFDUjJELEVBQVUsR0FBR3FGLFFBQVEzQyxFQUFJRSxJQUVaMUYsRUFBTWtCLFVBQVUvQixFQUFNMkQsRUFBVSxNQUV6QytDLEVBQWM3RixHQUNkbUMsR0FBTyxFQUNQQSxJQUFRbEMsRUFBTWtCLFNBQ1Y2RixJQUVBekMsRUFBbUIyRCxFQUFZbEksSUFFbkNpRixFQUFPVyxVQUFZLEdBQUdzQyxrQkFBMkJqSSxFQUFNa0MsTUFFL0QsSUFHRjRDLEVBQVFZLFlBQVlILEVBQ3RCLENBSUpSLEVBQVVXLFlBQVlWLEdBQ3RCRCxFQUFVVyxZQUFZNEIsR0FDdEJ6QyxFQUFjYSxZQUFZWixHQUMxQkgsRUFBVWUsWUFBWVgsR0FDdEJKLEVBQVVlLFlBQVliLEdBRXRCTCxFQUFLa0IsWUFBWWYsR0FDakJpQixFQUFjN0YsRUFDbEIsQ0FwUVlvSSxDQUFpQmxCLEVBQU1JLFFBRWxCZSxNQUFNLHlCQUF5QixHQUVoRCxDRS9CQUMsRSIsInNvdXJjZXMiOlsid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvZmFjdG9yaWVzLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9yZW5kZXIuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9nYW1lLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gU2hpcCBDbGFzcyAvL1xyXG5jbGFzcyBTaGlwIHtcclxuICAgIGNvbnN0cnVjdG9yIChzaXplKSB7XHJcbiAgICAgICAgdGhpcy5zaXplID0gc2l6ZTtcclxuICAgICAgICB0aGlzLmhpdCA9IDA7XHJcbiAgICAgICAgdGhpcy5zdW5rID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5jb29yZGluYXRlcyA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIHJlZ2lzdGVySGl0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmhpdCArPSAxO1xyXG4gICAgfVxyXG5cclxuICAgIGlzU3VuaygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5oaXQgPT09IHRoaXMuc2l6ZTtcclxuICAgIH1cclxuXHJcbiAgICBhZGRDb29yZGluYXRlcyAocG9zaXRpb24pIHtcclxuICAgICAgICB0aGlzLmNvb3JkaW5hdGVzLnB1c2gocG9zaXRpb24pO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBHYW1lYm9hcmQgQ2xhc3MgLy9cclxuY2xhc3MgR2FtZWJvYXJkIHtcclxuICAgIGNvbnN0cnVjdG9yICgpIHtcclxuICAgICAgICB0aGlzLmJvYXJkID0gW10gXHJcbiAgICAgICAgdGhpcy5zaGlwcyA9IFtdXHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNyZWF0ZUJvYXJkKHNpemUgPSA4ICkge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2l6ZTsgaSArPSAxKSB7XHJcbiAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHNpemU7IGogKz0gMSkge1xyXG4gICAgICAgICAgICBjb25zdCBjb29yZGluYXRlID0gYCR7aX0sJHtqfWA7XHJcbiAgICAgICAgICAgIHRoaXMuYm9hcmRbY29vcmRpbmF0ZV0gPSB7IGNvb3JkaW5hdGVzOiBjb29yZGluYXRlLCBhdHRhY2tlZDogZmFsc2UsIG1pc3NlZDogZmFsc2UsIGhhc1NoaXA6IGZhbHNlLCBzaGlwOiBbXSB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYm9hcmQ7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlzVmFsaWQgKGNvb3JkaW5hdGVzKSB7XHJcbiAgICAgICAgbGV0IGFyciA9IGNvb3JkaW5hdGVzLnNwbGl0KCcsJyk7XHJcbiAgICAgICAgbGV0IGEgPSBOdW1iZXIoYXJyWzBdKTtcclxuICAgICAgICBsZXQgYiA9IE51bWJlcihhcnJbMV0pO1xyXG5cclxuXHJcbiAgICAgICAgcmV0dXJuIGEgPj0gMCAmJiBhIDw9IDcgJiYgYiA+PSAwICYmIGIgPD0gNztcclxuICAgICAgfVxyXG5cclxuICAgICAgZ2V0Qm9hcmQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYm9hcmQ7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGFkZFNoaXAgKHNoaXApIHtcclxuICAgICAgICB0aGlzLnNoaXBzLnB1c2goc2hpcCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHBsYWNlU2hpcCAoc2l6ZSwgY29vcmRpbmF0ZXMpIHtcclxuICAgICAgICBpZiAoc2l6ZSAhPT0gY29vcmRpbmF0ZXMubGVuZ3RoKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgIGNvbnN0IHNoaXAgPSBuZXcgU2hpcChzaXplKTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb29yZGluYXRlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmhhc1NoaXAoY29vcmRpbmF0ZXNbaV0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ib2FyZFtjb29yZGluYXRlc1tpXV0uc2hpcC5wdXNoKGNvb3JkaW5hdGVzKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmJvYXJkW2Nvb3JkaW5hdGVzW2ldXS5oYXNTaGlwID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNoaXAuYWRkQ29vcmRpbmF0ZXMoY29vcmRpbmF0ZXMpO1xyXG4gICAgICAgICAgICB0aGlzLmFkZFNoaXAoc2hpcCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpc01vdmVMZWdhbCAobW92ZSkge1xyXG4gICAgICAgIHJldHVybiAhdGhpcy5ib2FyZFttb3ZlXS5hdHRhY2tlZCAmJiAhdGhpcy5ib2FyZFttb3ZlXS5taXNzZWQ7XHJcbiAgICB9XHJcbiAgICAgICAgXHJcbiAgICBoYXNTaGlwIChjb29yZGluYXRlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmJvYXJkW2Nvb3JkaW5hdGVdLmhhc1NoaXA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgcGxhY2VFbmVteVNoaXBzIChlbmVteUJvYXJkKSB7XHJcbiAgICAgICAgICAgIGxldCBjb29yZGluYXRlQ2FycmllciA9IHRoaXMuY3JlYXRlQ29vcmRpbmF0ZXMoKTtcclxuICAgICAgICAgICAgbGV0IGNvb3JkaW5hdGVCYXR0bGVzaGlwID0gdGhpcy5jcmVhdGVDb29yZGluYXRlcygpO1xyXG4gICAgICAgICAgICBsZXQgY29vcmRpbmF0ZUNydWlzZXIgPSB0aGlzLmNyZWF0ZUNvb3JkaW5hdGVzKCk7XHJcbiAgICAgICAgICAgIGxldCBjb29yZGluYXRlU3VibWFyaW5lID0gdGhpcy5jcmVhdGVDb29yZGluYXRlcygpO1xyXG4gICAgICAgICAgICBsZXQgY29vcmRpbmF0ZURlc3Ryb3llciA9IHRoaXMuY3JlYXRlQ29vcmRpbmF0ZXMoKTtcclxuXHJcbiAgICAgICAgICAgIC8vIGxldCBhcnJheSA9IHRoaXMuYm9hcmRBcnJheSgpO1xyXG5cclxuICAgICAgICAgICAgbGV0IGNhcnJpZXIgPSBlbmVteUJvYXJkLmdldEFkamFjZW50cyhlbmVteUJvYXJkLCA1LCBjb29yZGluYXRlQ2Fycmllcik7XHJcbiAgICAgICAgICAgIGxldCBiYXR0bGVzaGlwID0gZW5lbXlCb2FyZC5nZXRBZGphY2VudHMoZW5lbXlCb2FyZCwgNCwgY29vcmRpbmF0ZUJhdHRsZXNoaXApO1xyXG4gICAgICAgICAgICBsZXQgY3J1aXNlciA9IGVuZW15Qm9hcmQuZ2V0QWRqYWNlbnRzKGVuZW15Qm9hcmQsIDMsIGNvb3JkaW5hdGVDcnVpc2VyKTtcclxuICAgICAgICAgICAgbGV0IHN1Ym1hcmluZSA9IGVuZW15Qm9hcmQuZ2V0QWRqYWNlbnRzKGVuZW15Qm9hcmQsIDMsIGNvb3JkaW5hdGVTdWJtYXJpbmUpO1xyXG4gICAgICAgICAgICBsZXQgZGVzdHJveWVyID0gZW5lbXlCb2FyZC5nZXRBZGphY2VudHMoZW5lbXlCb2FyZCwgMiwgY29vcmRpbmF0ZURlc3Ryb3llcik7XHJcblxyXG4gICAgICAgICAgICBsZXQgc2hpcHMgPSBbY2FycmllciwgYmF0dGxlc2hpcCwgY3J1aXNlciwgc3VibWFyaW5lLCBkZXN0cm95ZXJdO1xyXG4gICAgICAgICAgICBsZXQgc2l6ZXMgPSBbNSw0LDMsMywyXTtcclxuICAgICAgICAgICAgbGV0IGZpbHRlcmVkID0gW107XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXBzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGVtcCA9IHNoaXBzW2ldLmZpbHRlcihwb3MgPT4gcG9zLmxlbmd0aCA9PT0gc2l6ZXNbaV0pO1xyXG4gICAgICAgICAgICAgICAgZmlsdGVyZWQucHVzaCh0ZW1wKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcblxyXG4gICAgICAgICAgICBmaWx0ZXJlZC5mb3JFYWNoKHNldE9mQ29vcmRpbmF0ZXMgPT4geyBcclxuICAgICAgICAgICAgICAgIHRoaXMucGxhY2VTaGlwKHNldE9mQ29vcmRpbmF0ZXNbMF0ubGVuZ3RoLCBzZXRPZkNvb3JkaW5hdGVzWzBdKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gc2V0T2ZDb29yZGluYXRlcy5mb3JFYWNoKGNvb3JkaW5hdGVzID0+IHtcclxuICAgICAgICAgICAgICAgIC8vICAgICAvLyBsZXQgYWZmaXJtYXRpdmUgPSBjb29yZGluYXRlcy5ldmVyeShwb3NpdGlvbiA9PiAhdGhpcy5oYXNTaGlwKHBvc2l0aW9uKSk7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgdGhpcy5wbGFjZVNoaXAoY29vcmRpbmF0ZXMubGVuZ3RoLCBjb29yZGluYXRlcyk7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgLy8gY29vcmRpbmF0ZXMuZm9yRWFjaChwb3NpdGlvbiA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgLy8gfSlcclxuICAgICAgICAgICAgICAgIC8vIH0pO1xyXG4gICAgICAgICAgICB9KTsgIFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgY3JlYXRlQ29vcmRpbmF0ZXMgKCkge1xyXG4gICAgICAgIGxldCBudW0xID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogOCk7IFxyXG4gICAgICAgIGxldCBudW0yID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogOCk7IFxyXG4gICAgICAgIGxldCByZXN1bHQgPSBgJHtudW0xfSwke251bTJ9YDtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmhhc1NoaXAocmVzdWx0KSkgcmV0dXJuIHJlc3VsdDtcclxuXHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHdoaWxlICh0aGlzLmhhc1NoaXAocmVzdWx0KSkge1xyXG4gICAgICAgICAgICAgICAgbnVtMSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDgpOyBcclxuICAgICAgICAgICAgICAgIG51bTIgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA4KTsgXHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBgJHtudW0xfSwke251bTJ9YDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgICAgZ2V0QWRqYWNlbnRzIChib2FyZCwgc2l6ZSwgY29vcmRpbmF0ZXMpIHtcclxuICAgICAgICBsZXQgYXJyYXlCb2FyZCA9IGJvYXJkLmJvYXJkQXJyYXkoKTtcclxuICAgICAgICBsZXQgYWRqYWNlbnRzID0gW1tdLFtdXTtcclxuICAgICAgICAvLyBsZXQgdXAgPSA4O1xyXG4gICAgICAgIGxldCByaWdodCA9IDE7XHJcbiAgICAgICAgbGV0IGRvd24gPSA4O1xyXG4gICAgICAgIC8vIGxldCBsZWZ0ID0gMTtcclxuICAgICAgICBsZXQgaW5kZXggPSAwO1xyXG5cclxuICAgICAgICAvLyBnZXQgaW5kZXggLy9cclxuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGFycmF5Qm9hcmQubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgaWYgKGFycmF5Qm9hcmRbal0uY29vcmRpbmF0ZXMgPT09IGNvb3JkaW5hdGVzKSB7XHJcbiAgICAgICAgICAgICAgICBpbmRleCA9IGo7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaXplOyBpKyspIHtcclxuICAgICAgICAgICAgLy8gMiBhZGphY2VudHMgLy8gXHJcbiAgICAgICAgICAgIC8vIGlmIChhcnJheUJvYXJkW2luZGV4IC0gdXBdKSB7XHJcbiAgICAgICAgICAgIC8vICAgICBsZXQgc3BsaXQgPSBjb29yZGluYXRlcy5zcGxpdCgnLCcpO1xyXG4gICAgICAgICAgICAvLyAgICAgbGV0IHBsYWNlID0gYXJyYXlCb2FyZFtpbmRleCAtIHVwXS5jb29yZGluYXRlcztcclxuICAgICAgICAgICAgLy8gICAgIGxldCBwbGFjZVNwbGl0ID0gcGxhY2Uuc3BsaXQoJywnKTtcclxuICAgICAgICAgICAgLy8gICAgIGlmIChwbGFjZSAmJiBwbGFjZS5pbmNsdWRlcyhzcGxpdFsxXSkpIHtcclxuICAgICAgICAgICAgLy8gICAgICAgICBhZGphY2VudHNbMF0ucHVzaChhcnJheUJvYXJkW2luZGV4IC0gdXBdLmNvb3JkaW5hdGVzKTtcclxuICAgICAgICAgICAgLy8gICAgICAgICB1cCArPSA4O1xyXG4gICAgICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgIGlmIChhcnJheUJvYXJkW2luZGV4ICsgcmlnaHRdKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc3BsaXQgPSBjb29yZGluYXRlcy5zcGxpdCgnLCcpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHBsYWNlID0gYXJyYXlCb2FyZFtpbmRleCArIHJpZ2h0XS5jb29yZGluYXRlcztcclxuICAgICAgICAgICAgICAgIGxldCBwbGFjZVNwbGl0ID0gcGxhY2Uuc3BsaXQoJywnKTtcclxuICAgICAgICAgICAgICAgIGlmIChwbGFjZSAmJiBwbGFjZVNwbGl0WzBdID09PSBzcGxpdFswXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFkamFjZW50c1swXS5wdXNoKGFycmF5Qm9hcmRbaW5kZXggKyByaWdodF0uY29vcmRpbmF0ZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0Kys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGFycmF5Qm9hcmRbaW5kZXggKyBkb3duXSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHNwbGl0ID0gY29vcmRpbmF0ZXMuc3BsaXQoJywnKTtcclxuICAgICAgICAgICAgICAgIGxldCBwbGFjZSA9IGFycmF5Qm9hcmRbaW5kZXggKyBkb3duXS5jb29yZGluYXRlcztcclxuICAgICAgICAgICAgICAgIGxldCBwbGFjZVNwbGl0ID0gcGxhY2Uuc3BsaXQoJywnKTtcclxuICAgICAgICAgICAgICAgIGlmIChwbGFjZSAmJiBwbGFjZS5pbmNsdWRlcyhzcGxpdFsxXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBhZGphY2VudHNbMV0ucHVzaChhcnJheUJvYXJkW2luZGV4ICsgZG93bl0uY29vcmRpbmF0ZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRvd24gKz0gODtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBpZiAoYXJyYXlCb2FyZFtpbmRleCAtIGxlZnRdKSB7XHJcbiAgICAgICAgICAgIC8vICAgICBsZXQgc3BsaXQgPSBjb29yZGluYXRlcy5zcGxpdCgnLCcpO1xyXG4gICAgICAgICAgICAvLyAgICAgbGV0IHBsYWNlID0gYXJyYXlCb2FyZFtpbmRleCAtIGxlZnRdLmNvb3JkaW5hdGVzO1xyXG4gICAgICAgICAgICAvLyAgICAgbGV0IHBsYWNlU3BsaXQgPSBwbGFjZS5zcGxpdCgnLCcpO1xyXG4gICAgICAgICAgICAvLyAgICAgaWYgKHBsYWNlICYmIHBsYWNlU3BsaXRbMF0gPT09IHNwbGl0WzBdKSB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgYWRqYWNlbnRzWzNdLnB1c2goYXJyYXlCb2FyZFtpbmRleCAtIGxlZnRdLmNvb3JkaW5hdGVzKTtcclxuICAgICAgICAgICAgLy8gICAgICAgICBsZWZ0Kys7XHJcbiAgICAgICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGFkamFjZW50cztcclxuICAgIH1cclxuXHJcbiAgICBoYXNBbGxTaGlwc1BsYWNlZCAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2hpcHMubGVuZ3RoID09PSA1O1xyXG4gICAgfVxyXG5cclxuICAgICAgcmVjZWl2ZUF0dGFjayAoY29vcmRpbmF0ZXMpIHtcclxuICAgICAgICBsZXQgc3RyID0gYCR7Y29vcmRpbmF0ZXN9YDtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuYm9hcmRbc3RyXS5hdHRhY2tlZCB8fCB0aGlzLmJvYXJkW3N0cl0ubWlzc2VkKSByZXR1cm47XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmJvYXJkW3N0cl0uaGFzU2hpcCkge1xyXG4gICAgICAgICAgICB0aGlzLmJvYXJkW3N0cl0uYXR0YWNrZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLnNoaXBzLmZvckVhY2goc2hpcCA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2hpcC5jb29yZGluYXRlc1swXS5pbmNsdWRlcyhzdHIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2hpcC5yZWdpc3RlckhpdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzaGlwLmlzU3VuaygpKSBzaGlwLnN1bmsgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ib2FyZFtzdHJdLm1pc3NlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBnZXRTaGlwcyAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2hpcHM7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGFsbFN1bmsgKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNoaXBzLmV2ZXJ5KHNoaXAgPT4gc2hpcC5zdW5rID09PSB0cnVlKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgYm9hcmRBcnJheSAoKSB7XHJcbiAgICAgICAgY29uc3Qgb2JqID0gdGhpcy5ib2FyZDtcclxuICAgICAgICBjb25zdCBhcnJheSA9IFtdO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBrZXkgaW4gb2JqKSB7XHJcbiAgICAgICAgICAgIGFycmF5LnB1c2gob2JqW2tleV0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIGFycmF5O1xyXG4gICAgICB9XHJcbn1cclxuXHJcbi8vIFBsYXllciBDbGFzcyAvL1xyXG5jbGFzcyBQbGF5ZXIge1xyXG4gICAgY29uc3RydWN0b3IgKGdhbWVib2FyZCkge1xyXG4gICAgICAgIHRoaXMuZ2FtZWJvYXJkID0gZ2FtZWJvYXJkO1xyXG4gICAgfVxyXG5cclxuICAgIGlzTW92ZUxlZ2FsIChtb3ZlKSB7XHJcbiAgICAgICAgcmV0dXJuICF0aGlzLmdhbWVib2FyZC5ib2FyZFttb3ZlXS5hdHRhY2tlZCAmJiAhdGhpcy5nYW1lYm9hcmQuYm9hcmRbbW92ZV0ubWlzc2VkO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBtYWtlUmFuZG9tTW92ZSAoKSB7XHJcbiAgICAgICAgbGV0IG51bTEgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA4KTsgXHJcbiAgICAgICAgbGV0IG51bTIgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA4KTsgXHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IGAke251bTF9LCR7bnVtMn1gO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5pc01vdmVMZWdhbChyZXN1bHQpKSByZXR1cm4gcmVzdWx0O1xyXG5cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgd2hpbGUgKCF0aGlzLmlzTW92ZUxlZ2FsKHJlc3VsdCkpIHtcclxuICAgICAgICAgICAgICAgIG51bTEgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA4KTsgXHJcbiAgICAgICAgICAgICAgICBudW0yID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogOCk7IFxyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gYCR7bnVtMX0sJHtudW0yfWA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxufVxyXG5cclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1NoaXAsIEdhbWVib2FyZCwgUGxheWVyfTsiLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gRE9NIE1hbmlwdWxhdGlvbiwgUmVuZGVyIHRoZSBHYW1lIC8vIFxyXG5cclxuLy8gUmVuZGVyIFdyaXRlIFlvdXIgTmFtZSAvLyBcclxuaW1wb3J0IHsgZ2FtZSB9IGZyb20gXCIuL2dhbWVcIjtcclxuaW1wb3J0IHsgR2FtZWJvYXJkLCBQbGF5ZXIsIFNoaXAgfSBmcm9tIFwiLi9mYWN0b3JpZXNcIjtcclxuXHJcbmZ1bmN0aW9uIHdyaXRlTmFtZSAoKSB7XHJcbiAgICBjb25zdCBtYWluID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21haW4nKTtcclxuICAgIGNvbnN0IGJveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMycpO1xyXG4gICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xyXG4gICAgY29uc3QgcGxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpXHJcblxyXG4gICAgYm94LmNsYXNzTGlzdC5hZGQoJ3BvcC11cC1ib3gnKTtcclxuICAgIHRpdGxlLmNsYXNzTGlzdC5hZGQoJ3RpdGxlLXBvcC11cCcpO1xyXG4gICAgaW5wdXQuY2xhc3NMaXN0LmFkZCgnaW5wdXQtcG9wLXVwJyk7XHJcbiAgICBwbGF5LmNsYXNzTGlzdC5hZGQoJ3BsYXktYnV0dG9uJyk7XHJcblxyXG5cclxuICAgIHRpdGxlLnRleHRDb250ZW50ID0gJ1dyaXRlIHlvdXIgTmFtZSc7XHJcbiAgICBwbGF5LmlubmVySFRNTCA9ICdCYXR0bGUnO1xyXG4gICAgaW5wdXQudHlwZSA9ICd0ZXh0JztcclxuICAgIHBsYXkudHlwZSA9ICdzdWJtaXQnO1xyXG5cclxuICAgIGJveC5hcHBlbmRDaGlsZCh0aXRsZSk7XHJcbiAgICBib3guYXBwZW5kQ2hpbGQoaW5wdXQpO1xyXG4gICAgYm94LmFwcGVuZENoaWxkKHBsYXkpO1xyXG5cclxuICAgIG1haW4uYXBwZW5kQ2hpbGQoYm94KTtcclxuXHJcbiAgICBwbGF5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgIGlmIChpbnB1dC52YWx1ZSkge1xyXG4gICAgICAgICAgICBjbGVhbigpO1xyXG4gICAgICAgICAgICByZW5kZXJQbGFjZVNoaXBzKGlucHV0LnZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgYWxlcnQoJ1BsZWFzZSBXcml0ZSBZb3VyIE5hbWUnKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gcmVuZGVyUGxhY2VTaGlwcyAobmFtZSkge1xyXG4gICAgY29uc3QgbWFpbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYWluJyk7XHJcbiAgICBjb25zdCBteVNlY3Rpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIGNvbnN0IG15R2FtZVNlY3Rpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIGNvbnN0IG15Qm9hcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIGNvbnN0IG15TmFtZUJveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgY29uc3QgbXlOYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDMnKTtcclxuICAgIGNvbnN0IGF4aXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuXHJcbiAgICBjb25zdCBzaGlwcyA9IFsnQ2FycmllcicsICdCYXR0bGVzaGlwJywgJ0NydWlzZXInLCAnU3VibWFyaW5lJywgJ0Rlc3Ryb3llciddO1xyXG4gICAgbGV0IHNpemVzID0gWzQsMywyLDIsMV07XHJcblxyXG4gICAgbWFpbi5jbGFzc0xpc3QuYWRkKCdtYWluLWdhbWUnKTtcclxuICAgIG15U2VjdGlvbi5jbGFzc0xpc3QuYWRkKCdteS1zZWN0aW9uJyk7XHJcbiAgICBteUdhbWVTZWN0aW9uLmNsYXNzTGlzdC5hZGQoJ215LWdhbWUtc2VjdGlvbicpO1xyXG4gICAgbXlCb2FyZC5jbGFzc0xpc3QuYWRkKCdteS1ib2FyZCcpO1xyXG4gICAgbXlOYW1lQm94LmNsYXNzTGlzdC5hZGQoJ215LW5hbWUtYm94Jyk7XHJcbiAgICBteU5hbWUuY2xhc3NMaXN0LmFkZCgnbXktbmFtZScpO1xyXG4gICAgYXhpcy5jbGFzc0xpc3QuYWRkKCdheGlzJyk7XHJcblxyXG4gICAgbGV0IHBvcyA9IDA7XHJcblxyXG4gICAgbXlOYW1lLmlubmVySFRNTCA9IGAke25hbWV9LCAgcGxhY2UgeW91ciAgJHtzaGlwc1twb3NdfWA7XHJcbiAgICBteU5hbWUuZGF0YXNldC5zaXplID0gcG9zO1xyXG5cclxuICAgIGF4aXMuaW5uZXJIVE1MID0gJ0F4aXMgWCc7XHJcblxyXG4gICAgYXhpcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICBpZiAoYXhpcy5pbm5lckhUTUwgPT09ICdBeGlzIFgnKSB7XHJcbiAgICAgICAgICAgIGF4aXMuaW5uZXJIVE1MID0gJ0F4aXMgWSc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGF4aXMuaW5uZXJIVE1MID0gJ0F4aXMgWCc7XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICBsZXQgYm9hcmQgPSBuZXcgR2FtZWJvYXJkKCk7XHJcblxyXG4gICAgYm9hcmQuY3JlYXRlQm9hcmQoKTtcclxuICAgXHJcbiAgICBsZXQgcGxheWVyID0gbmV3IFBsYXllcihib2FyZCk7XHJcbiAgICBcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgODsgaSArPSAxKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCA4OyBqICs9IDEpIHtcclxuICAgICAgICAgIGNvbnN0IGNvb3JkaW5hdGUgPSBgJHtpfSwke2p9YDtcclxuICAgICAgICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgZGl2LmNsYXNzTGlzdC5hZGQoJ215LWRpdi1ib3gnKTtcclxuICAgICAgICAgIGRpdi5pZCA9IGAke2Nvb3JkaW5hdGV9YDtcclxuICAgICAgICAgIGlmIChqID09PSA3KSB7XHJcbiAgICAgICAgICAgIGRpdi5kYXRhc2V0LnhOb3RBbGxvd2VkID0gdHJ1ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmIChpID09PSA3KSB7XHJcbiAgICAgICAgICAgIGRpdi5kYXRhc2V0LnlOb3RBbGxvd2VkID0gdHJ1ZTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBkaXYuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubXktbmFtZScpO1xyXG4gICAgICAgICAgICBsZXQgbmFtZSA9IHRpdGxlLnRleHRDb250ZW50O1xyXG4gICAgICAgICAgICBsZXQgc3BsaXQgPSBuYW1lLnNwbGl0KCcgJyk7XHJcbiAgICAgICAgICAgIGxldCBzaGlwID0gc3BsaXRbc3BsaXQubGVuZ3RoIC0xXTtcclxuICAgICAgICAgICAgbGV0IGluZGV4ID0gc2hpcHMuaW5kZXhPZihzaGlwKTtcclxuICAgICAgICAgICAgbGV0IHNpemUgPSBzaXplc1tpbmRleF07XHJcbiAgICAgICAgICAgIGxldCBheGlzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmF4aXMnKTtcclxuICAgICAgICAgICAgbGV0IGF4aXNUZXh0ID0gYXhpcy50ZXh0Q29udGVudC5zcGxpdCgnICcpWzFdO1xyXG5cclxuICAgICAgICAgICAgbGV0IGFkamFjZW50cyA9IGJvYXJkLmdldEFkamFjZW50cyhib2FyZCwgc2l6ZSwgZGl2LmlkKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChheGlzVGV4dCA9PT0gJ1gnKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgYWRqV2l0aFNoaXAgPSBhZGphY2VudHNbMF0uc29tZSh4ID0+IGJvYXJkLmhhc1NoaXAoeCkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGJvYXJkLmhhc1NoaXAoZGl2LmlkKSB8fCBhZGpXaXRoU2hpcCAgfHwgYWRqYWNlbnRzWzBdLmxlbmd0aCA8IHNpemUpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYm9hcmQuaGFzU2hpcChkaXYuaWQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpdi5zdHlsZS5jdXJzb3IgPSAnbm90LWFsbG93ZWQnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGl2LnN0eWxlLmJhY2tncm91bmQgPSAncmVkJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGl2LnN0eWxlLmN1cnNvciA9ICdub3QtYWxsb3dlZCc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhZGphY2VudHNbMF0uZm9yRWFjaChwb3NpdGlvbiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYm9hcmQuaGFzU2hpcChwb3NpdGlvbikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXYuc3R5bGUuY3Vyc29yID0gJ25vdC1hbGxvd2VkJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdWJpID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHViaS5zdHlsZS5iYWNrZ3JvdW5kID0gJ2dyZWVuJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB1YmkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwb3NpdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWJpLnN0eWxlLmJhY2tncm91bmQgPSAnYmxhY2snO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpdi5zdHlsZS5iYWNrZ3JvdW5kID0gJ2JsYWNrJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXYuc3R5bGUuY3Vyc29yID0gJ2Nyb3NzaGFpcic7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9OyBcclxuICAgICAgICAgICAgICAgIH07ICAgXHJcbiAgICAgICAgXHJcblxyXG4gICAgICAgICAgICBpZiAoYXhpc1RleHQgPT09ICdZJykge1xyXG4gICAgICAgICAgICAgICAgbGV0IGFkaldpdGhTaGlwID0gYWRqYWNlbnRzWzFdLnNvbWUoeCA9PiBib2FyZC5oYXNTaGlwKHgpKTtcclxuICAgICAgICAgICAgICAgIGlmIChib2FyZC5oYXNTaGlwKGRpdi5pZCkgfHwgYWRqV2l0aFNoaXAgIHx8IGFkamFjZW50c1sxXS5sZW5ndGggPCBzaXplKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJvYXJkLmhhc1NoaXAoZGl2LmlkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXYuc3R5bGUuY3Vyc29yID0gJ25vdC1hbGxvd2VkJztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpdi5zdHlsZS5iYWNrZ3JvdW5kID0gJ3JlZCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpdi5zdHlsZS5jdXJzb3IgPSAnbm90LWFsbG93ZWQnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWRqYWNlbnRzWzFdLmZvckVhY2gocG9zaXRpb24gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJvYXJkLmhhc1NoaXAocG9zaXRpb24pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGl2LnN0eWxlLmN1cnNvciA9ICdub3QtYWxsb3dlZCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHViaSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHBvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1Ymkuc3R5bGUuYmFja2dyb3VuZCA9ICdncmVlbic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdWJpID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHViaS5zdHlsZS5iYWNrZ3JvdW5kID0gJ2JsYWNrJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXYuc3R5bGUuYmFja2dyb3VuZCA9ICdibGFjayc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGl2LnN0eWxlLmN1cnNvciA9ICdjcm9zc2hhaXInOyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTsgIFxyXG4gICAgICAgICAgICAgICAgfTsgXHJcblxyXG5cclxuXHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICBkaXYuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsICgpID0+IHtcclxuICAgICAgICAgICAgbGV0IHRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm15LW5hbWUnKTtcclxuICAgICAgICAgICAgbGV0IG5hbWUgPSB0aXRsZS50ZXh0Q29udGVudDtcclxuICAgICAgICAgICAgbGV0IHNwbGl0ID0gbmFtZS5zcGxpdCgnICcpO1xyXG4gICAgICAgICAgICBsZXQgc2hpcCA9IHNwbGl0W3NwbGl0Lmxlbmd0aCAtMV07XHJcbiAgICAgICAgICAgIGxldCBpbmRleCA9IHNoaXBzLmluZGV4T2Yoc2hpcCk7XHJcbiAgICAgICAgICAgIGxldCBzaXplID0gc2l6ZXNbaW5kZXhdO1xyXG4gICAgICAgICAgICBsZXQgYXhpcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5heGlzJyk7XHJcbiAgICAgICAgICAgIGxldCBheGlzVGV4dCA9IGF4aXMudGV4dENvbnRlbnQuc3BsaXQoJyAnKVsxXTtcclxuXHJcbiAgICAgICAgICAgIGxldCBhZGphY2VudHMgPSBib2FyZC5nZXRBZGphY2VudHMoYm9hcmQsIHNpemUsIGRpdi5pZCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoYXhpc1RleHQgPT09ICdYJykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRpdi5kYXRhc2V0LnhOb3RBbGxvd2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGl2LnN0eWxlLmJhY2tncm91bmQgPSAnbGlnaHRnb2xkZW5yb2R5ZWxsb3cnO1xyXG4gICAgICAgICAgICAgICAgICAgIGRpdi5zdHlsZS5jdXJzb3IgPSAnY3Jvc3NoYWlyJzsgXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoYm9hcmQuaGFzU2hpcChkaXYuaWQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGl2LnN0eWxlLmJhY2tncm91bmQgPSAnZ3JlZW4nO1xyXG4gICAgICAgICAgICAgICAgICAgIGRpdi5zdHlsZS5jdXJzb3IgPSAnbm90LWFsbG93ZWQnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWRqYWNlbnRzWzBdLmZvckVhY2gocG9zaXRpb24gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYm9hcmQuaGFzU2hpcChwb3NpdGlvbikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpdi5zdHlsZS5jdXJzb3IgPSAnbm90LWFsbG93ZWQnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGl2LnN0eWxlLmJhY2tncm91bmQgPSAnbGlnaHRnb2xkZW5yb2R5ZWxsb3cnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHViaSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHBvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHViaS5zdHlsZS5iYWNrZ3JvdW5kID0gJ2dyZWVuJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB1YmkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwb3NpdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1Ymkuc3R5bGUuYmFja2dyb3VuZCA9ICdsaWdodGdvbGRlbnJvZHllbGxvdyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXYuc3R5bGUuYmFja2dyb3VuZCA9ICdsaWdodGdvbGRlbnJvZHllbGxvdyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGlmIChheGlzVGV4dCA9PT0gJ1knKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGl2LmRhdGFzZXQueU5vdEFsbG93ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBkaXYuc3R5bGUuYmFja2dyb3VuZCA9ICdsaWdodGdvbGRlbnJvZHllbGxvdyc7XHJcbiAgICAgICAgICAgICAgICAgICAgZGl2LnN0eWxlLmN1cnNvciA9ICdjcm9zc2hhaXInOyBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChib2FyZC5oYXNTaGlwKGRpdi5pZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBkaXYuc3R5bGUuYmFja2dyb3VuZCA9ICdncmVlbic7XHJcbiAgICAgICAgICAgICAgICAgICAgZGl2LnN0eWxlLmN1cnNvciA9ICdub3QtYWxsb3dlZCc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBhZGphY2VudHNbMV0uZm9yRWFjaChwb3NpdGlvbiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChib2FyZC5oYXNTaGlwKHBvc2l0aW9uKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGl2LnN0eWxlLmN1cnNvciA9ICdub3QtYWxsb3dlZCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXYuc3R5bGUuYmFja2dyb3VuZCA9ICdsaWdodGdvbGRlbnJvZHllbGxvdyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdWJpID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdWJpLnN0eWxlLmJhY2tncm91bmQgPSAnZ3JlZW4nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHViaSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHBvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHViaS5zdHlsZS5iYWNrZ3JvdW5kID0gJ2xpZ2h0Z29sZGVucm9keWVsbG93JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpdi5zdHlsZS5iYWNrZ3JvdW5kID0gJ2xpZ2h0Z29sZGVucm9keWVsbG93JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuXHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICBkaXYuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCB0aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5teS1uYW1lJyk7XHJcbiAgICAgICAgICAgIGxldCBuYW1lID0gdGl0bGUudGV4dENvbnRlbnQ7XHJcbiAgICAgICAgICAgIGxldCBzcGxpdCA9IG5hbWUuc3BsaXQoJyAnKTtcclxuICAgICAgICAgICAgbGV0IHNoaXAgPSBzcGxpdFtzcGxpdC5sZW5ndGggLTFdO1xyXG4gICAgICAgICAgICBsZXQgYWN0dWFsTmFtZSA9ICBzcGxpdFswXS5zcGxpdCgnLCcpWzBdO1xyXG4gICAgICAgICAgICBsZXQgaW5kZXggPSBzaGlwcy5pbmRleE9mKHNoaXApO1xyXG4gICAgICAgICAgICBsZXQgc2l6ZSA9IHNpemVzW2luZGV4XTtcclxuICAgICAgICAgICAgbGV0IGF4aXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXhpcycpO1xyXG4gICAgICAgICAgICBsZXQgYXhpc1RleHQgPSBheGlzLnRleHRDb250ZW50LnNwbGl0KCcgJylbMV07XHJcblxyXG4gICAgICAgICAgICBsZXQgYWRqYWNlbnRzID0gYm9hcmQuZ2V0QWRqYWNlbnRzKGJvYXJkLCBzaXplLCBkaXYuaWQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGF4aXNUZXh0ID09PSAnWCcpIHtcclxuICAgICAgICAgICAgICAgIHNpemUgKz0gMTtcclxuICAgICAgICAgICAgICAgIGFkamFjZW50c1swXS51bnNoaWZ0KGRpdi5pZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHBsYWNlZCA9IGJvYXJkLnBsYWNlU2hpcChzaXplLCBhZGphY2VudHNbMF0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBsYWNlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbmRlck15Qm9hcmQoYm9hcmQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHBvcyArPSAxO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBvcyA9PT0gc2hpcHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFuKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlckluaXRhbEJvYXJkcyhhY3R1YWxOYW1lLCBib2FyZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgbXlOYW1lLmlubmVySFRNTCA9IGAke2FjdHVhbE5hbWV9LCAgcGxhY2UgeW91ciAke3NoaXBzW3Bvc119YDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGF4aXNUZXh0ID09PSAnWScpIHtcclxuICAgICAgICAgICAgICAgIHNpemUgKz0gMTtcclxuICAgICAgICAgICAgICAgIGFkamFjZW50c1sxXS51bnNoaWZ0KGRpdi5pZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHBsYWNlZCA9IGJvYXJkLnBsYWNlU2hpcChzaXplLCBhZGphY2VudHNbMV0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBsYWNlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbmRlck15Qm9hcmQoYm9hcmQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHBvcyArPSAxO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBvcyA9PT0gc2hpcHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFuKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vcmVuZGVyQm90aEJvYXJkcyhteUJvYXJkKS8vXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlckluaXRhbEJvYXJkcyhhY3R1YWxOYW1lLCBib2FyZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgbXlOYW1lLmlubmVySFRNTCA9IGAke2FjdHVhbE5hbWV9LCAgcGxhY2UgeW91ciAke3NoaXBzW3Bvc119YDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgbXlCb2FyZC5hcHBlbmRDaGlsZChkaXYpO1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG4gICAgXHJcblxyXG4gICAgbXlOYW1lQm94LmFwcGVuZENoaWxkKG15TmFtZSk7XHJcbiAgICBteU5hbWVCb3guYXBwZW5kQ2hpbGQoYXhpcyk7XHJcbiAgICBteUdhbWVTZWN0aW9uLmFwcGVuZENoaWxkKG15Qm9hcmQpO1xyXG4gICAgbXlTZWN0aW9uLmFwcGVuZENoaWxkKG15TmFtZUJveCk7XHJcbiAgICBteVNlY3Rpb24uYXBwZW5kQ2hpbGQobXlHYW1lU2VjdGlvbik7XHJcbiAgICBcclxuICAgIG1haW4uYXBwZW5kQ2hpbGQobXlTZWN0aW9uKTtcclxuICAgIHJlbmRlck15Qm9hcmQoYm9hcmQpOyAgICBcclxufTtcclxuXHJcblxyXG5mdW5jdGlvbiByZW5kZXJJbml0YWxCb2FyZHMgKG5hbWUsIGJvYXJkKSB7XHJcbiAgICBjb25zdCBtYWluID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21haW4nKTtcclxuXHJcbiAgICBjb25zdCBteVNlY3Rpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIGNvbnN0IG15R2FtZVNlY3Rpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIGNvbnN0IG15Qm9hcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIGNvbnN0IG15TmFtZUJveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgY29uc3QgbXlOYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDMnKTtcclxuICAgICAgICBcclxuICAgIGNvbnN0IGVuZW15U2VjdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgY29uc3QgZW5lbXlHYW1lU2VjdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgY29uc3QgZW5lbXlCb2FyZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgY29uc3QgZW5lbXlOYW1lQm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBjb25zdCBlbmVteU5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMycpO1xyXG5cclxuICAgIFxyXG4gICAgbXlTZWN0aW9uLmNsYXNzTGlzdC5hZGQoJ215LXNlY3Rpb24nKTtcclxuICAgIG15R2FtZVNlY3Rpb24uY2xhc3NMaXN0LmFkZCgnbXktZ2FtZS1zZWN0aW9uJyk7XHJcbiAgICBteUJvYXJkLmNsYXNzTGlzdC5hZGQoJ215LWJvYXJkJyk7XHJcbiAgICBteU5hbWVCb3guY2xhc3NMaXN0LmFkZCgnbXktbmFtZS1ib3gnKTtcclxuICAgIG15TmFtZS5jbGFzc0xpc3QuYWRkKCdteS1uYW1lJyk7XHJcbiAgICBcclxuICAgIGVuZW15U2VjdGlvbi5jbGFzc0xpc3QuYWRkKCdlbmVteS1zZWN0aW9uJyk7XHJcbiAgICBlbmVteUdhbWVTZWN0aW9uLmNsYXNzTGlzdC5hZGQoJ2VuZW15LWdhbWUtc2VjdGlvbicpO1xyXG4gICAgZW5lbXlCb2FyZC5jbGFzc0xpc3QuYWRkKCdlbmVteS1ib2FyZCcpO1xyXG4gICAgZW5lbXlOYW1lQm94LmNsYXNzTGlzdC5hZGQoJ2VuZW15LW5hbWUtYm94Jyk7XHJcbiAgICBlbmVteU5hbWUuY2xhc3NMaXN0LmFkZCgnZW5lbXktbmFtZScpO1xyXG5cclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDg7IGkgKz0gMSkge1xyXG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgODsgaiArPSAxKSB7XHJcbiAgICAgICAgICBjb25zdCBjb29yZGluYXRlID0gYCR7aX0sJHtqfWA7XHJcbiAgICAgICAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgIGNvbnN0IGRpdkVuZW15ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICBkaXYuY2xhc3NMaXN0LmFkZCgnbXktZGl2LWJveCcpO1xyXG4gICAgICAgICAgZGl2RW5lbXkuY2xhc3NMaXN0LmFkZCgnZW5lbXktZGl2LWJveCcpO1xyXG5cclxuICAgICAgICAgIGRpdi5pZCA9IGAke2Nvb3JkaW5hdGV9YDtcclxuICAgICAgICAgIGRpdkVuZW15LmlkID0gYEUgJHtjb29yZGluYXRlfWA7XHJcbiAgXHJcbiAgICAgICAgICBteUJvYXJkLmFwcGVuZENoaWxkKGRpdik7XHJcbiAgICAgICAgICBlbmVteUJvYXJkLmFwcGVuZENoaWxkKGRpdkVuZW15KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbXlOYW1lLmlubmVySFRNTCA9IG5hbWU7XHJcbiAgICBlbmVteU5hbWUuaW5uZXJIVE1MID0gJ0VuZW15JztcclxuXHJcbiAgICBteU5hbWVCb3guYXBwZW5kQ2hpbGQobXlOYW1lKTtcclxuICAgIG15R2FtZVNlY3Rpb24uYXBwZW5kQ2hpbGQobXlCb2FyZCk7XHJcbiAgICBteVNlY3Rpb24uYXBwZW5kQ2hpbGQobXlOYW1lQm94KTtcclxuICAgIG15U2VjdGlvbi5hcHBlbmRDaGlsZChteUdhbWVTZWN0aW9uKTtcclxuICAgIFxyXG4gICAgZW5lbXlOYW1lQm94LmFwcGVuZENoaWxkKGVuZW15TmFtZSk7XHJcbiAgICBlbmVteUdhbWVTZWN0aW9uLmFwcGVuZENoaWxkKGVuZW15Qm9hcmQpO1xyXG4gICAgZW5lbXlTZWN0aW9uLmFwcGVuZENoaWxkKGVuZW15TmFtZUJveCk7XHJcbiAgICBlbmVteVNlY3Rpb24uYXBwZW5kQ2hpbGQoZW5lbXlHYW1lU2VjdGlvbik7XHJcblxyXG4gICAgbWFpbi5hcHBlbmRDaGlsZChteVNlY3Rpb24pO1xyXG4gICAgbWFpbi5hcHBlbmRDaGlsZChlbmVteVNlY3Rpb24pO1xyXG5cclxuICAgIG1haW4uY2xhc3NMaXN0LmFkZCgnbWFpbi1nYW1lJyk7XHJcbiAgICByZW5kZXJNeUJvYXJkKGJvYXJkKTtcclxuICAgIGdhbWUoYm9hcmQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXJNeUJvYXJkIChib2FyZCkge1xyXG4gICAgbGV0IGFyciA9IGJvYXJkLmJvYXJkQXJyYXkoKTtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGlmIChhcnJbaV0uaGFzU2hpcCkge1xyXG4gICAgICAgICAgICBsZXQgYm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYXJyW2ldLmNvb3JkaW5hdGVzKTtcclxuICAgICAgICAgICAgYm94LnN0eWxlLmJhY2tncm91bmQgPSAnZ3JlZW4nO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYXJyW2ldLmF0dGFja2VkKSB7XHJcbiAgICAgICAgICAgIGxldCBib3ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChhcnJbaV0uY29vcmRpbmF0ZXMpO1xyXG4gICAgICAgICAgICBib3guaW5uZXJIVE1MID0gJ+KdjCc7XHJcbiAgICAgICAgICAgIGJveC5zdHlsZS5iYWNrZ3JvdW5kID0gJyNGNUMyQzEnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYXJyW2ldLm1pc3NlZCkge1xyXG4gICAgICAgICAgICBsZXQgYm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYXJyW2ldLmNvb3JkaW5hdGVzKTtcclxuICAgICAgICAgICAgYm94LmlubmVySFRNTCA9ICfwn5KmJztcclxuICAgICAgICAgICAgYm94LnN0eWxlLmJhY2tncm91bmQgPSAnbGlnaHRibHVlJztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFhcnJbaV0uaGFzU2hpcCAmJiAhYXJyW2ldLmF0dGFja2VkICYmICFhcnJbaV0ubWlzc2VkKSB7XHJcbiAgICAgICAgICAgIGxldCBib3ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChhcnJbaV0uY29vcmRpbmF0ZXMpO1xyXG4gICAgICAgICAgICBib3guc3R5bGUuYmFja2dyb3VuZCA9ICdsaWdodGdvbGRlbnJvZHllbGxvdyc7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufTtcclxuXHJcblxyXG5mdW5jdGlvbiByZW5kZXJFbmVteUJvYXJkIChib2FyZCkge1xyXG4gICAgY29uc3QgYm94ZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZW5lbXktZGl2LWJveCcpO1xyXG5cclxuICAgIGZvciAoY29uc3QgYm94IG9mIGJveGVzKSB7XHJcbiAgICAgICAgbGV0IGNvb3JkaW5hdGVzID0gYm94LmlkO1xyXG4gICAgICAgIGxldCBzcGxpdCA9IGNvb3JkaW5hdGVzLnNwbGl0KCcgJyk7XHJcbiAgICAgICAgbGV0IG51bSA9IHNwbGl0WzFdOyBcclxuICAgICAgICBcclxuICAgICAgICBpZiAoYm9hcmQuYm9hcmRbbnVtXS5hdHRhY2tlZCkge1xyXG4gICAgICAgICAgICBib3guaW5uZXJIVE1MID0gJ+KdjCc7XHJcbiAgICAgICAgICAgIGJveC5zdHlsZS5iYWNrZ3JvdW5kID0gJyNGNUMyQzEnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYm9hcmQuYm9hcmRbbnVtXS5taXNzZWQpIHtcclxuICAgICAgICAgICAgYm94LmlubmVySFRNTCA9ICfwn5KmJztcclxuICAgICAgICAgICAgYm94LnN0eWxlLmJhY2tncm91bmQgPSAnbGlnaHRibHVlJztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGJvYXJkLmJvYXJkW251bV0uaGFzU2hpcCkge1xyXG4gICAgICAgICAgICBib3guaW5uZXJIVE1MID0gJ/CfmqInO1xyXG4gICAgICAgICAgICBib3guc3R5bGUuYmFja2dyb3VuZCA9ICdsaWdodGJsdWUnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuXHJcblxyXG5cclxuXHJcbmZ1bmN0aW9uIHJlbmRlcldpbiAoKSB7XHJcbiAgICBjb25zdCBtYWluID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21haW4nKTtcclxuICAgIGNvbnN0IGJveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMycpOyBcclxuICAgIGNvbnN0IHBsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKVxyXG5cclxuICAgIGJveC5jbGFzc0xpc3QuYWRkKCdwb3AtdXAtYm94Jyk7XHJcbiAgICB0aXRsZS5jbGFzc0xpc3QuYWRkKCd0aXRsZS1wb3AtdXAnKTtcclxuICAgIHBsYXkuY2xhc3NMaXN0LmFkZCgncGxheS1idXR0b24nKTtcclxuXHJcbiAgICB0aXRsZS50ZXh0Q29udGVudCA9ICdZb3UgV2luJztcclxuICAgIHBsYXkuaW5uZXJIVE1MID0gJ1BsYXkgQWdhaW4nO1xyXG4gICAgcGxheS50eXBlID0gJ3N1Ym1pdCc7XHJcblxyXG4gICAgYm94LmFwcGVuZENoaWxkKHRpdGxlKTtcclxuICAgIGJveC5hcHBlbmRDaGlsZChwbGF5KTtcclxuXHJcbiAgICBtYWluLmFwcGVuZENoaWxkKGJveCk7XHJcblxyXG4gICAgcGxheS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICBjbGVhbigpO1xyXG4gICAgICAgIHdyaXRlTmFtZSgpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbmRlckxvc2UgKCkge1xyXG4gICAgY29uc3QgbWFpbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYWluJyk7XHJcbiAgICBjb25zdCBib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDMnKTsgXHJcbiAgICBjb25zdCBwbGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJylcclxuXHJcbiAgICBib3guY2xhc3NMaXN0LmFkZCgncG9wLXVwLWJveCcpO1xyXG4gICAgdGl0bGUuY2xhc3NMaXN0LmFkZCgndGl0bGUtcG9wLXVwJyk7XHJcbiAgICBwbGF5LmNsYXNzTGlzdC5hZGQoJ3BsYXktYnV0dG9uJyk7XHJcblxyXG4gICAgdGl0bGUudGV4dENvbnRlbnQgPSAnWW91IExvc2UnO1xyXG4gICAgcGxheS5pbm5lckhUTUwgPSAnUGxheSBBZ2Fpbic7XHJcbiAgICBwbGF5LnR5cGUgPSAnc3VibWl0JztcclxuXHJcbiAgICBib3guYXBwZW5kQ2hpbGQodGl0bGUpO1xyXG4gICAgYm94LmFwcGVuZENoaWxkKHBsYXkpO1xyXG5cclxuICAgIG1haW4uYXBwZW5kQ2hpbGQoYm94KTtcclxuXHJcbiAgICBwbGF5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgIGNsZWFuKCk7XHJcbiAgICAgICAgd3JpdGVOYW1lKCk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gY2xlYW4gKCkge1xyXG4gICAgY29uc3QgbWFpbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYWluJyk7XHJcbiAgICBtYWluLmlubmVySFRNTCA9ICcnO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IHt3cml0ZU5hbWUsIGNsZWFuLCByZW5kZXJJbml0YWxCb2FyZHMsIHJlbmRlck15Qm9hcmQsIHJlbmRlckVuZW15Qm9hcmQsIHJlbmRlcldpbiwgcmVuZGVyTG9zZX07XHJcbiIsImltcG9ydCB7IFNoaXAsIEdhbWVib2FyZCwgUGxheWVyIH0gZnJvbSBcIi4vZmFjdG9yaWVzXCI7XHJcbmltcG9ydCB7IHdyaXRlTmFtZSwgcmVuZGVySW5pdGFsQm9hcmRzLCByZW5kZXJNeUJvYXJkLCByZW5kZXJFbmVteUJvYXJkLCAgY2xlYW4sIHJlbmRlcldpbiwgcmVuZGVyTG9zZSB9IGZyb20gXCIuL3JlbmRlclwiO1xyXG5cclxuXHJcbmZ1bmN0aW9uIGdhbWUgKGJvYXJkKSB7XHJcbiAgICBsZXQgZW5lbXlCb2FyZCA9IG5ldyBHYW1lYm9hcmQoKTtcclxuICAgIGxldCBteUJvYXJkID0gYm9hcmQ7XHJcbiAgICBsZXQgcGxheWVyID0gbmV3IFBsYXllcihteUJvYXJkKTtcclxuXHJcbiAgICBlbmVteUJvYXJkLmNyZWF0ZUJvYXJkKCk7XHJcbiAgICBsZXQgZW5lbXkgPSBuZXcgUGxheWVyKGVuZW15Qm9hcmQpO1xyXG5cclxuICAgIFxyXG4gICAgLy8gZW5lbXlCb2FyZC5wbGFjZUVuZW15U2hpcHMoZW5lbXlCb2FyZCk7XHJcblxyXG4gICAgXHJcbiAgICByZW5kZXJNeUJvYXJkKGJvYXJkKTtcclxuICAgIHJlbmRlckVuZW15Qm9hcmQoZW5lbXlCb2FyZCk7XHJcblxyXG4gICAgY29uc3QgZW5lbXlCb3hlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lbmVteS1kaXYtYm94Jyk7XHJcbiAgICBsZXQgZUJveGVzID0gWy4uLmVuZW15Qm94ZXNdO1xyXG5cclxuICAgIGVCb3hlcy5mb3JFYWNoKGVCb3ggPT4ge1xyXG4gICAgICAgIGVCb3guYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgZUNvb3JkaW5hdGVzID0gZS50YXJnZXQuaWQ7XHJcbiAgICAgICAgICAgIGxldCBlU3BsaXQgPSBlQ29vcmRpbmF0ZXMuc3BsaXQoJyAnKTtcclxuICAgICAgICAgICAgbGV0IGVOdW0gPSBlU3BsaXRbMV07IFxyXG5cclxuICAgICAgICAgICAgbGV0IGVuZW15TW92ZSA9IGVuZW15Lm1ha2VSYW5kb21Nb3ZlKCk7XHJcbiAgICAgICAgICAgIGxldCBlbmVteUF0dGFjayA9IG15Qm9hcmQucmVjZWl2ZUF0dGFjayhlbmVteU1vdmUpO1xyXG4gICAgICAgICAgICBsZXQgYXR0YWNrID0gZW5lbXlCb2FyZC5yZWNlaXZlQXR0YWNrKGVOdW0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKGF0dGFjaykge1xyXG4gICAgICAgICAgICAgICAgcmVuZGVyRW5lbXlCb2FyZChlbmVteS5nYW1lYm9hcmQpO1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoIWVuZW15QXR0YWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZW15TW92ZSA9IGVuZW15Lm1ha2VSYW5kb21Nb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZW15QXR0YWNrID0gbXlCb2FyZC5yZWNlaXZlQXR0YWNrKGVuZW15TW92ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJlbmRlck15Qm9hcmQocGxheWVyLmdhbWVib2FyZCk7XHJcbiAgICAgICAgICAgICAgICAgIH0sIDEwMDApOyBcclxuICAgICAgICAgICAgICAgICAgXHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIGxldCBteVN1bmsgPSBteUJvYXJkLmFsbFN1bmsoKTtcclxuICAgICAgICAgICAgICAgIC8vIGxldCBlbmVteVN1bmsgPSBlbmVteUJvYXJkLmFsbFN1bmsoKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gaWYgKG15U3Vuaykge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgIGNsZWFuKCk7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgcmVuZGVyTG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgLy8gfTtcclxuICAgICAgICAgICAgICAgIC8vIGlmIChlbmVteVN1bmspIHtcclxuICAgICAgICAgICAgICAgIC8vICAgICBjbGVhbigpO1xyXG4gICAgICAgICAgICAgICAgLy8gICAgIHJlbmRlcldpbigpO1xyXG4gICAgICAgICAgICAgICAgLy8gfTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5cclxuXHJcblxyXG5cclxuLy8gMS4gQ3JlYXRlIHRoZSBtYWluIGdhbWUgbG9vcCBhbmQgYSBtb2R1bGUgZm9yIERPTSBpbnRlcmFjdGlvbi5cclxuLy8gICAgICBhLiBBdCB0aGlzIHBvaW50IGl0IGlzIGFwcHJvcHJpYXRlIHRvIGJlZ2luIGNyYWZ0aW5nIHlvdXIgVXNlciBJbnRlcmZhY2UuXHJcbi8vICAgICAgYi4gVGhlIGdhbWUgbG9vcCBzaG91bGQgc2V0IHVwIGEgbmV3IGdhbWUgYnkgY3JlYXRpbmcgUGxheWVycyBhbmQgR2FtZWJvYXJkcy4gRm9yIG5vdyBqdXN0IHBvcHVsYXRlIGVhY2ggR2FtZWJvYXJkIHdpdGggcHJlZGV0ZXJtaW5lZCBjb29yZGluYXRlcy4gWW91IGNhbiBpbXBsZW1lbnQgYSBzeXN0ZW0gZm9yIGFsbG93aW5nIHBsYXllcnMgdG8gcGxhY2UgdGhlaXIgc2hpcHMgbGF0ZXIuXHJcbi8vICAgICAgYy4gV2XigJlsbCBsZWF2ZSB0aGUgSFRNTCBpbXBsZW1lbnRhdGlvbiB1cCB0byB5b3UgZm9yIG5vdywgYnV0IHlvdSBzaG91bGQgZGlzcGxheSBib3RoIHRoZSBwbGF5ZXLigJlzIGJvYXJkcyBhbmQgcmVuZGVyIHRoZW0gdXNpbmcgaW5mb3JtYXRpb24gZnJvbSB0aGUgR2FtZWJvYXJkIGNsYXNzL2ZhY3RvcnkuXHJcbi8vICAgICAgICAgIGEuIFlvdSBuZWVkIG1ldGhvZHMgdG8gcmVuZGVyIHRoZSBnYW1lYm9hcmRzIGFuZCB0byB0YWtlIHVzZXIgaW5wdXQgZm9yIGF0dGFja2luZy4gRm9yIGF0dGFja3MsIGxldCB0aGUgdXNlciBjbGljayBvbiBhIGNvb3JkaW5hdGUgaW4gdGhlIGVuZW15IEdhbWVib2FyZC5cclxuLy8gICAgICBkLiBUaGUgZ2FtZSBsb29wIHNob3VsZCBzdGVwIHRocm91Z2ggdGhlIGdhbWUgdHVybiBieSB0dXJuIHVzaW5nIG9ubHkgbWV0aG9kcyBmcm9tIG90aGVyIG9iamVjdHMuIElmIGF0IGFueSBwb2ludCB5b3UgYXJlIHRlbXB0ZWQgdG8gd3JpdGUgYSBuZXcgZnVuY3Rpb24gaW5zaWRlIHRoZSBnYW1lIGxvb3AsIHN0ZXAgYmFjayBhbmQgZmlndXJlIG91dCB3aGljaCBjbGFzcyBvciBtb2R1bGUgdGhhdCBmdW5jdGlvbiBzaG91bGQgYmVsb25nIHRvLlxyXG4vLyAgICAgIGUuIENyZWF0ZSBjb25kaXRpb25zIHNvIHRoYXQgdGhlIGdhbWUgZW5kcyBvbmNlIG9uZSBwbGF5ZXLigJlzIHNoaXBzIGhhdmUgYWxsIGJlZW4gc3Vuay4gVGhpcyBmdW5jdGlvbiBpcyBhcHByb3ByaWF0ZSBmb3IgdGhlIEdhbWUgbW9kdWxlLlxyXG5cclxuXHJcbi8vIDIuIEZpbmlzaCBpdCB1cFxyXG4vLyAgICAgIGEuIFRoZXJlIGFyZSBzZXZlcmFsIG9wdGlvbnMgYXZhaWxhYmxlIGZvciBsZXR0aW5nIHVzZXJzIHBsYWNlIHRoZWlyIHNoaXBzLiBZb3UgY2FuIGxldCB0aGVtIHR5cGUgY29vcmRpbmF0ZXMgZm9yIGVhY2ggc2hpcCwgb3IgaW52ZXN0aWdhdGUgaW1wbGVtZW50aW5nIGRyYWcgYW5kIGRyb3AuXHJcbi8vICAgICAgYi4gWW91IGNhbiBwb2xpc2ggdGhlIGludGVsbGlnZW5jZSBvZiB0aGUgY29tcHV0ZXIgcGxheWVyIGJ5IGhhdmluZyBpdCB0cnkgYWRqYWNlbnQgc2xvdHMgYWZ0ZXIgZ2V0dGluZyBhIOKAmGhpdOKAmS5cclxuLy8gICAgICBjLiBPcHRpb25hbGx5LCBjcmVhdGUgYSAyIHBsYXllciBvcHRpb24gdGhhdCBsZXRzIHVzZXJzIHRha2UgdHVybnMgYnkgcGFzc2luZyB0aGUgZGV2aWNlIGJhY2sgYW5kIGZvcnRoLiBJZiB5b3XigJlyZSBnb2luZyB0byBnbyB0aGlzIHJvdXRlLCBtYWtlIHN1cmUgdGhlIGdhbWUgaXMgcGxheWFibGUgb24gYSBtb2JpbGUgc2NyZWVuIGFuZCBpbXBsZW1lbnQgYSDigJhwYXNzIGRldmljZeKAmSBzY3JlZW4gc28gdGhhdCBwbGF5ZXJzIGRvbuKAmXQgc2VlIGVhY2ggb3RoZXJzIGJvYXJkcyFcclxuIFxyXG5cclxuLy8gIFRoZSA1IHNoaXBzIGFyZTogQ2FycmllciAob2NjdXBpZXMgNSBzcGFjZXMpLCBCYXR0bGVzaGlwICg0KSwgQ3J1aXNlciAoMyksIFN1Ym1hcmluZSAoMyksIGFuZCBEZXN0cm95ZXIgKDIpLiAvL1xyXG5cclxuXHJcblxyXG5leHBvcnQge2dhbWV9OyIsIi8vIExpbnRlciwgUHJldHRpZXIsIEplc3QuY29uZmlnIC8vIFxyXG5cclxuaW1wb3J0IHsgU2hpcCwgR2FtZWJvYXJkLCBQbGF5ZXIgfSBmcm9tIFwiLi9mYWN0b3JpZXNcIjtcclxuaW1wb3J0IHsgd3JpdGVOYW1lLCBjbGVhbiwgcmVuZGVySW5pdGFsQm9hcmRzLCByZW5kZXJXaW4sIHJlbmRlckxvc2UsIHNlbGVjdFNoaXBzIH0gZnJvbSBcIi4vcmVuZGVyXCI7XHJcbmltcG9ydCB7IGdhbWUgfSBmcm9tIFwiLi9nYW1lXCI7XHJcblxyXG53cml0ZU5hbWUoKTsiXSwibmFtZXMiOlsiU2hpcCIsImNvbnN0cnVjdG9yIiwic2l6ZSIsInRoaXMiLCJoaXQiLCJzdW5rIiwiY29vcmRpbmF0ZXMiLCJyZWdpc3RlckhpdCIsImlzU3VuayIsImFkZENvb3JkaW5hdGVzIiwicG9zaXRpb24iLCJwdXNoIiwibW9kdWxlIiwiZXhwb3J0cyIsIkdhbWVib2FyZCIsImJvYXJkIiwic2hpcHMiLCJjcmVhdGVCb2FyZCIsImkiLCJqIiwiY29vcmRpbmF0ZSIsImF0dGFja2VkIiwibWlzc2VkIiwiaGFzU2hpcCIsInNoaXAiLCJpc1ZhbGlkIiwiYXJyIiwic3BsaXQiLCJhIiwiTnVtYmVyIiwiYiIsImdldEJvYXJkIiwiYWRkU2hpcCIsInBsYWNlU2hpcCIsImxlbmd0aCIsImlzTW92ZUxlZ2FsIiwibW92ZSIsInBsYWNlRW5lbXlTaGlwcyIsImVuZW15Qm9hcmQiLCJjb29yZGluYXRlQ2FycmllciIsImNyZWF0ZUNvb3JkaW5hdGVzIiwiY29vcmRpbmF0ZUJhdHRsZXNoaXAiLCJjb29yZGluYXRlQ3J1aXNlciIsImNvb3JkaW5hdGVTdWJtYXJpbmUiLCJjb29yZGluYXRlRGVzdHJveWVyIiwiZ2V0QWRqYWNlbnRzIiwic2l6ZXMiLCJmaWx0ZXJlZCIsInRlbXAiLCJmaWx0ZXIiLCJwb3MiLCJmb3JFYWNoIiwic2V0T2ZDb29yZGluYXRlcyIsIm51bTEiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJudW0yIiwicmVzdWx0IiwiYXJyYXlCb2FyZCIsImJvYXJkQXJyYXkiLCJhZGphY2VudHMiLCJyaWdodCIsImRvd24iLCJpbmRleCIsInBsYWNlIiwicGxhY2VTcGxpdCIsImluY2x1ZGVzIiwiaGFzQWxsU2hpcHNQbGFjZWQiLCJyZWNlaXZlQXR0YWNrIiwic3RyIiwiZ2V0U2hpcHMiLCJhbGxTdW5rIiwiZXZlcnkiLCJvYmoiLCJhcnJheSIsImtleSIsIlBsYXllciIsImdhbWVib2FyZCIsIm1ha2VSYW5kb21Nb3ZlIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsInJlbmRlckluaXRhbEJvYXJkcyIsIm5hbWUiLCJtYWluIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsIm15U2VjdGlvbiIsImNyZWF0ZUVsZW1lbnQiLCJteUdhbWVTZWN0aW9uIiwibXlCb2FyZCIsIm15TmFtZUJveCIsIm15TmFtZSIsImVuZW15U2VjdGlvbiIsImVuZW15R2FtZVNlY3Rpb24iLCJlbmVteU5hbWVCb3giLCJlbmVteU5hbWUiLCJjbGFzc0xpc3QiLCJhZGQiLCJkaXYiLCJkaXZFbmVteSIsImlkIiwiYXBwZW5kQ2hpbGQiLCJpbm5lckhUTUwiLCJyZW5kZXJNeUJvYXJkIiwicGxheWVyIiwiZW5lbXkiLCJyZW5kZXJFbmVteUJvYXJkIiwicXVlcnlTZWxlY3RvckFsbCIsImVCb3giLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsImVOdW0iLCJ0YXJnZXQiLCJlbmVteU1vdmUiLCJlbmVteUF0dGFjayIsInNldFRpbWVvdXQiLCJnYW1lIiwic3R5bGUiLCJiYWNrZ3JvdW5kIiwiYm94IiwiYm94ZXMiLCJudW0iLCJjbGVhbiIsInRpdGxlIiwiaW5wdXQiLCJwbGF5IiwidGV4dENvbnRlbnQiLCJ0eXBlIiwidmFsdWUiLCJheGlzIiwiZGF0YXNldCIsInhOb3RBbGxvd2VkIiwieU5vdEFsbG93ZWQiLCJxdWVyeVNlbGVjdG9yIiwiaW5kZXhPZiIsImF4aXNUZXh0IiwiYWRqV2l0aFNoaXAiLCJzb21lIiwieCIsImN1cnNvciIsImFjdHVhbE5hbWUiLCJ1bnNoaWZ0IiwicmVuZGVyUGxhY2VTaGlwcyIsImFsZXJ0Iiwid3JpdGVOYW1lIl0sInNvdXJjZVJvb3QiOiIifQ==